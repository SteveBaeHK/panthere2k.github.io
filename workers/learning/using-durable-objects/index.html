<!doctype html><html lang=en theme=light is-docs-page js-focus-visible-polyfill-available><head><meta charset=utf-8><title>Using Durable Objects · Cloudflare Workers docs</title><meta http-equiv=cleartype content="on"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=application-name content="Using Durable Objects · Cloudflare Workers docs"><meta name=msapplication-tap-highlight content="no"><meta name=apple-mobile-web-app-title content="Using Durable Objects · Cloudflare Workers docs"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-capable content="yes"><meta name=mobile-web-app-capable content="yes"><meta name=theme-color content="#f38020"><meta name=description content="Documentation for Cloudflare Workers, a serverless execution environment that allows you to create entirely new applications or augment existing ones without configuring or maintaining infrastructure."><meta property="og:image" content="https://panthere2k.github.io/dev-products-preview.png"><meta property="og:title" content="Using Durable Objects · Cloudflare Workers docs"><meta property="og:description" content="Documentation for Cloudflare Workers, a serverless execution environment that allows you to create entirely new applications or augment existing ones without configuring or maintaining infrastructure."><meta property="og:type" content="website"><meta name=twitter:title content="Using Durable Objects · Cloudflare Workers docs"><meta name=twitter:image content="https://panthere2k.github.io/dev-products-preview.png"><meta name=twitter:description content="Documentation for Cloudflare Workers, a serverless execution environment that allows you to create entirely new applications or augment existing ones without configuring or maintaining infrastructure."><meta name=twitter:creator content="@cloudflare"><meta name=twitter:card content="summary_large_image"><meta name=pcx_content_type content="concept"><link rel=icon href=/favicon-32x32.png><link rel=canonical href=https://panthere2k.github.io/workers/learning/using-durable-objects/><link rel=sitemap href=/sitemap.xml type=application/xml><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon sizes=48x48 href=/icons/icon-48x48.png><link rel=apple-touch-icon sizes=72x72 href=/icons/icon-72x72.png><link rel=apple-touch-icon sizes=96x96 href=/icons/icon-96x96.png><link rel=apple-touch-icon sizes=144x144 href=/icons/icon-144x144.png><link rel=apple-touch-icon sizes=192x192 href=/icons/icon-192x192.png><link rel=apple-touch-icon sizes=256x256 href=/icons/icon-256x256.png><link rel=apple-touch-icon sizes=384x384 href=/icons/icon-384x384.png><link rel=apple-touch-icon sizes=512x512 href=/icons/icon-512x512.png><script src=/search.redirect.min.6828ce878577fe91120d67814d68c0d8.js defer></script><link rel="stylesheet preconnect" href=/style.css><script>(function(){let s=!1,e,n;document.readyState!=="loading"?o():addEventListener("DOMContentLoaded",o),e=document.querySelector("#ThemeToggle"),s=!e;function t(n){try{let o=n?"dark":"light";document.documentElement.setAttribute("theme",o),localStorage.theme=JSON.stringify({theme:o}),e?(e.checked=n,s=!1):s&&setTimeout(t,1,n)}catch{}}function o(){e=e||document.querySelector("#ThemeToggle"),e.addEventListener("change",()=>t(!!e.checked)),addEventListener("keydown",n=>{n.target===document.body&&n.which===68&&n.shiftKey&&(n.preventDefault(),t(!e.checked))})}try{n=window.matchMedia("(prefers-color-scheme:dark)"),n.onchange=e=>t(e.matches)}catch{}try{let e=localStorage.theme,s=e&&JSON.parse(e);t(s?/dark/.test(s.theme):!!(n&&n.matches))}catch{}})()</script><script src=/main.min.c2a5e976c412695a3d9389cba84aa5bd.js defer></script>
<script data-source=docs defer src=https://feedback.developers.cloudflare.com/sdk.js></script>
<link rel=preload href=https://feedback.developers.cloudflare.com/sdk.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://feedback.developers.cloudflare.com/sdk.css></noscript></head><body><div class=DocsPage><div><a class=skip-link href=#main>Skip to content</a></div><div class=DocsMobileHeader><a class="DocsMobileHeader--cloudflare-logo-link Link Link-without-underline" href=/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsMobileTitleHeader><a aria-current=page class="DocsMobileTitleHeader--logo-link Link Link-without-underline" href=/workers/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><span title="Cloudflare Workers logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 49"><path d="m18.63 37.418-9.645-12.9 9.592-12.533-1.852-2.527L5.917 23.595l-.015 1.808 10.86 14.542 1.868-2.527z"/><path d="M21.997 6.503h-3.712l13.387 18.3-13.072 17.7h3.735L35.4 24.81 21.997 6.503z"/><path d="M29.175 6.503h-3.758l13.598 18.082-13.598 17.918h3.765l12.908-17.01v-1.808L29.175 6.503z"/></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:7>Workers</span></span></div></a><button class="Button DocsMobileTitleHeader--sidebar-toggle-button">
<span class=DocsMobileTitleHeader--sidebar-toggle-button-icon aria-hidden=true><svg viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" role="img" aria-labelledby="title-1332672649688018" xmlns="http://www.w3.org/2000/svg"><title id="title-1332672649688018">Navigation menu icon</title><path data-index="1" d="M5 7h10" transform-origin="10 7"/><path data-index="2" d="M5 10h10" transform-origin="10 10"/><path data-index="3" d="M5 13h10" transform-origin="10 13"/></svg><span is-visually-hidden>Open external link</span></span></button></div><div class=DocsMobileNavBackdrop></div><div class=DocsSidebar><div class=DocsSidebar--sections><div class="DocsSidebar--section DocsSidebar--header-section"><a class="DocsSidebar--cloudflare-logo-link DocsSidebar--link" href=/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsSidebar--section-separator></div><div class="DocsSidebar--section DocsSidebar--docs-title-section"><a aria-current=page class="DocsSidebar--docs-title-logo-link DocsSidebar--link" href=/workers/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><span title="Cloudflare Workers logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 49"><path d="m18.63 37.418-9.645-12.9 9.592-12.533-1.852-2.527L5.917 23.595l-.015 1.808 10.86 14.542 1.868-2.527z"/><path d="M21.997 6.503h-3.712l13.387 18.3-13.072 17.7h3.735L35.4 24.81 21.997 6.503z"/><path d="M29.175 6.503h-3.758l13.598 18.082-13.598 17.918h3.765l12.908-17.01v-1.808L29.175 6.503z"/></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:7>Workers</span></span></div></a><div class="DocsSidebar--section-more Dropdown" data-expanded=false><button class="DocsSidebar--section-more-button Button" aria-expanded=false><div class=DocsSidebar--section-more-button-icon><svg viewBox="0 0 4 16" stroke="currentcolor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" fill="currentcolor" role="img" aria-labelledby="title-6032186738345315" xmlns="http://www.w3.org/2000/svg"><title id="title-6032186738345315">Dropdown icon</title><path d="M2 2v0m0 6v0m0 6v0z"/></svg><span is-visually-hidden>Workers menu</span></div></button><div class="DocsSidebar--section-more-dropdown Dropdown--dropdown"><ul class=Dropdown--list><li class=Dropdown--item><a class=Dropdown--link href=https://workers.cloudflare.com tabindex=-1>Workers home</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://cloudflareworkers.com tabindex=-1>Playground</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://workers.cloudflare.com/#plans tabindex=-1>Pricing</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://discord.gg/cloudflaredev tabindex=-1>Discord</a></li></ul></div></div></div><div class="DocsSidebar--section DocsSidebar--nav-section" style=position:relative;overflow:hidden;width:100%;height:100%><div style=position:absolute;inset:0;overflow-y:auto;margin-right:0;margin-bottom:0><div class=DocsSidebar--nav-section-shadow style=opacity:0></div><ul class=DocsSidebar--nav><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Overview</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Get started</span>
</button><a class=DocsSidebar--nav-link href=/workers/get-started/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/get-started/guide/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Guide</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/get-started/quickstarts/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Quickstarts</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/examples/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Examples</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/tutorials/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Tutorials</span></a></li><li class=DocsSidebar--nav-item is-active-root is-expanded><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Learning</span>
</button><a class=DocsSidebar--nav-link href=/workers/learning/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Learning</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-expanded" style=min-height:0;transition-duration:400ms is-expanded><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/how-workers-works/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>How Workers works</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/security-model/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Security model</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/debugging-workers/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Debugging Workers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/logging-workers/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Logging from Workers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/metrics-and-analytics/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Metrics and analytics</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/how-the-cache-works/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>How the Cache works</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Integrations</span>
</button><a class=DocsSidebar--nav-link href=/workers/learning/integrations/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Integrations</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/integrations/apis/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>APIs</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/integrations/databases/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Databases</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/integrations/external-services/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>External Services</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/how-kv-works/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>How KV works</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/how-routing-works/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>How routing works</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/migrating-to-module-workers/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migrating to module Workers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/service-worker/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Using Service Worker syntax</span></a></li><li class=DocsSidebar--nav-item is-active><a aria-current=page class=DocsSidebar--nav-link href=/workers/learning/using-durable-objects/ is-active><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Using Durable Objects</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/using-streams/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Using Streams</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/using-websockets/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Using WebSockets</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/using-services/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Workers Services</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/continuous-integration/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Continuous Integration</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/learning/playground/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Playground</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Platform</span>
</button><a class=DocsSidebar--nav-link href=/workers/platform/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Platform</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/storage-objects/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Storage options guide</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/pricing/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Pricing</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/betas/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Betas</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Bindings</span>
</button><a class=DocsSidebar--nav-link href=/workers/platform/bindings/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Bindings</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/bindings/about-service-bindings/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>About Service bindings</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/changelog/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Changelog</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/compatibility-dates/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Compatibility dates</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/deploy-button/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy button</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/deployments/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deployments</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/environment-variables/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Environment variables</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/environments/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Environments</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/known-issues/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Known issues</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/languages/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Languages</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/limits/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Limits</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/logpush/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Logpush</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/workers-with-page-rules/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Page Rules</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Triggers</span>
</button><a class=DocsSidebar--nav-link href=/workers/platform/triggers/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Triggers</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/triggers/cron-triggers/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cron Triggers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/triggers/custom-domains/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Custom Domains</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/triggers/routes/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Routes</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/notifications/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Usage notifications</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Workers Sites</span>
</button><a class=DocsSidebar--nav-link href=/workers/platform/sites/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Workers Sites</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/sites/start-from-existing/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Start from existing</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/sites/start-from-scratch/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Start from scratch</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/sites/start-from-worker/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Start from worker</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/platform/sites/configuration/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Workers Sites configuration</span></a></li></ul></div></div></div></div></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Runtime APIs</span>
</button><a class=DocsSidebar--nav-link href=/workers/runtime-apis/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Runtime APIs</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/add-event-listener/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>addEventListener</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/cache/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/durable-objects/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Durable Objects</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/encoding/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Encoding</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/fetch/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Fetch</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/fetch-event/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>FetchEvent</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/headers/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Headers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/html-rewriter/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>HTMLRewriter</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/kv/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>KV</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/r2/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>R2</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/request/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Request</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/response/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Response</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/scheduled-event/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>ScheduledEvent</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/service-bindings/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Service bindings</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Streams</span>
</button><a class=DocsSidebar--nav-link href=/workers/runtime-apis/streams/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Streams</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/streams/readablestream/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>ReadableStream</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/streams/readablestreambyobreader/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>ReadableStream BYOBReader</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/streams/readablestreamdefaultreader/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>ReadableStream DefaultReader</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/streams/transformstream/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>TransformStream</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/streams/writablestream/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>WritableStream</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/streams/writablestreamdefaultwriter/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>WritableStream DefaultWriter</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/web-crypto/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Web Crypto</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/web-standards/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Web standards</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/runtime-apis/websockets/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>WebSockets</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Wrangler</span>
</button><a class=DocsSidebar--nav-link href=/workers/wrangler/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Wrangler</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/install-and-update/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Install/Update Wrangler</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/commands/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Commands</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/configuration/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Configuration</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/custom-builds/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Custom builds</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/workers-kv/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Workers KV</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/bundling/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Bundling</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/system-environment-variables/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>System Environment Variables</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/environments/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Environments</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/ci-cd/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Running in CI/CD</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/compare-v1-v2/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Comparing Wrangler 1 & 2</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/api/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>API</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Migration</span>
</button><a class=DocsSidebar--nav-link href=/workers/wrangler/migration/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migration</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/migration/migrating-from-wrangler-1/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migrating from Wrangler 1</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/migration/deprecations/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deprecations</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/migration/eject-webpack/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Ejecting webpack</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Wrangler 1 (legacy)</span>
</button><a class=DocsSidebar--nav-link href=/workers/wrangler/cli-wrangler/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Wrangler 1 (legacy)</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/cli-wrangler/install-update/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Install / Update</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/cli-wrangler/authentication/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Authentication</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/cli-wrangler/commands/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Commands</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/cli-wrangler/configuration/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Configuration</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/workers/wrangler/cli-wrangler/webpack/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Webpack</span></a></li></ul></div></div></div></div></li></ul></div></div></div></div></li></ul></div><div style=position:absolute;height:6px;display:none;right:2px;bottom:2px;left:2px;border-radius:3px><div style=position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)></div></div><div style=position:absolute;width:6px;display:none class="Scrollbars--track Scrollbars--track-vertical"><div style=position:relative;display:block;width:100% class="Scrollbars--thumb Scrollbars--thumb-vertical"></div></div></div><div class=toggleSidebar><button id=toggleSidebarButton style=width:2em;height:2em title="Click to collapse and expand the sidebar navigation"><svg id="toggleSidebarSVG" aria-hidden="true" height="1" width="1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path id="toggleSidebarSVGPath" d="M15 2a1 1 0 00-1 1v10a1 1 0 002 0V3a1 1 0 00-1-1zm-10.407.993-4.3 4.3a1 1 0 000 1.414l4.3 4.3a1 1 0 001.415-1.416L3.417 9H10a1 1 0 100-2H3.417l2.591-2.591A1 1 0 104.593 2.993z"/></svg></button></div></div><div class=DocsSidebar--shadow></div></div><div class=DocsToolbar><div class=DocsToolbar--search><div class=DocsSearch><div class=DocsSearch--input-wrapper><input type=text id=DocsSearch--input class=DocsSearch--input spellcheck=false autocomplete=false placeholder="Search docs..."><div class=DocsSearch--input-icon><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-9701125841014673" xmlns="http://www.w3.org/2000/svg"><title id="title-9701125841014673">Search icon (depiction of a magnifying glass)</title><path d="M11.999 10.585l3.458 3.458a1 1 0 01-1.414 1.414L10.585 12a6.5 6.5.0 111.414-1.414zM6.75 11.5a4.75 4.75.0 100-9.5 4.75 4.75.0 000 9.5z"/></svg></div><button disabled class=slashPlaceholder title="Press '/' to focus on the search bar" aria-label="Forward slash keyboard shortcut" tabindex=-1 type=button><div style=margin-top:-1px>/</span></div></button></div></div></div><div class=DocsToolbar--tools><button data-feedback=true class="DocsToolbar--feedback Button Button-is-docs-secondary">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17"><path d="M14 2.5H2l-.5.5v11.165l.863.345 2.852-3.01H14l.5-.5V3l-.5-.5zm-.5 8H4.785L2.5 12.911V3.5h11v7z" fill="currentcolor"/><path d="M12.5 5.003h-9v1h9v-1zm0 2.497h-9v1h9v-1z" fill="currentcolor"/></svg>Give Feedback</button><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--tools-icon-item><div class=Tooltip---root><div class=DocsToolbar--tools-icon-item-content><a class="Link Link-without-underline" href=https://github.com/cloudflare/cloudflare-docs><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-6991762763429039" xmlns="http://www.w3.org/2000/svg"><title id="title-6991762763429039">GitHub icon</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z" fill-rule="evenodd"/></svg></a></div><span class=Tooltip role=tooltip position=bottom-end>Visit Workers on GitHub</span></div></div><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--theme-toggle><div class=Tooltip---root><div class=ThemeToggle><input type=checkbox id=ThemeToggle class=ThemeToggle--input>
<label class=ThemeToggle--toggle for=ThemeToggle><div class=ThemeToggle--toggle-handle></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--sun"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-8812071124069258" xmlns="http://www.w3.org/2000/svg"><title id="title-8812071124069258">Light theme icon (depiction of a sun)</title><path d="M7.5 11.465a3.482 3.482.0 01-1.596-.662L4.11 12.596a.5.5.0 01-.707-.707l1.793-1.793A3.482 3.482.0 014.535 8.5H2a.5.5.0 010-1h2.535a3.482 3.482.0 01.662-1.596L3.404 4.11a.5.5.0 01.707-.707l1.793 1.793A3.482 3.482.0 017.5 4.535V2a.5.5.0 011 0v2.535a3.482 3.482.0 011.596.662l1.793-1.793a.5.5.0 01.707.707l-1.793 1.793c.343.458.577 1.003.662 1.596H14a.5.5.0 110 1h-2.535a3.482 3.482.0 01-.662 1.596l1.793 1.793a.5.5.0 01-.707.707l-1.793-1.793a3.482 3.482.0 01-1.596.662V14a.5.5.0 11-1 0v-2.535z"/></svg></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--moon"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-5971296394189265" xmlns="http://www.w3.org/2000/svg"><title id="title-5971296394189265">Dark theme icon (depiction of a moon)</title><path d="M7.067 3.087a5 5 0 005.466 7.026A5 5 0 117.067 3.087z"/></svg></div></label><span class=Tooltip role=tooltip position=bottom-end>Set theme to dark (⇧+D)</span></div></div></div></div></div><main class=DocsBody><div class=DocsBody--sidebar with-styled-webkit-scrollbars><div class=DocsBody--sidebar-content-scroll-fade></div><div class=DocsBody--sidebar-content><ul class=DocsTableOfContents hidden><li><a class=DocsTableOfContents-link href=#docs-content>↑ Top</a></li></ul></nav></div></div><div id=docs-content data-reach-skip-nav-content></div><div class=DocsContent id=main page-type=document><article class=DocsMarkdown><h1 id=using-durable-objects>Using Durable Objects</h1><p>Durable Objects provide low-latency coordination and consistent storage for the Workers platform through two features: global uniqueness and a transactional storage API.</p><ul><li><p>Global Uniqueness guarantees that there will be a single instance of a Durable Object class with a given ID running at once, across the world. Requests for a Durable Object ID are routed by the Workers runtime to the Cloudflare data center that owns the Durable Object.</p></li><li><p>The transactional storage API provides strongly consistent key-value storage to the Durable Object. Each Object can only read and modify keys associated with that Object. Execution of a Durable Object is single-threaded, but multiple request events may still be processed out-of-order from how they arrived at the Object.</p></li></ul><p>For a high-level introduction to Durable Objects, refer to <a href=https://blog.cloudflare.com/introducing-workers-durable-objects/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>the announcement blog post</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span>
</span></a>.</p><p>For details on the specific Durable Object APIs, refer to the <a href=/workers/runtime-apis/durable-objects/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Runtime API documentation</span></a>.</p><p><a href=https://discord.gg/cloudflaredev class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>The Workers community on Discord</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> has a #durable-objects channel where you can ask questions, show off what you are building, and discuss Durable Objects with other developers.</p><h2 id=using-durable-objects-1><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#using-durable-objects-1>&#8203;​</a></span>
<span>Using Durable Objects</span></h2><p>Durable Objects are named instances of a class you define. Like a class in object-oriented programming, the class defines the methods and data a Durable Object can access.</p><p>To start, enable Durable Objects for your account by logging in to <a href=https://dash.cloudflare.com/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>the Cloudflare dashboard</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> > <strong>Workers</strong> > <strong>Durable Objects</strong>.</p><p>There are three steps to creating and using a Durable Object:</p><ul><li><a href=#writing-a-class-that-defines-a-durable-object class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Writing the class</span></a> that defines a Durable Object.</li><li><a href=#instantiating-and-communicating-with-a-durable-object class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Instantiating and communicating with a Durable Object</span></a> from another Worker via the <a href=/workers/runtime-apis/durable-objects/#fetch-handler-method class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Fetch</span></a> API.</li><li><a href=#uploading-a-durable-object-worker class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Uploading the Durable Object and Worker</span></a> to Cloudflare&rsquo;s servers using Wrangler.</li></ul><h2 id=writing-a-class-that-defines-a-durable-object><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#writing-a-class-that-defines-a-durable-object>&#8203;​</a></span>
<span>Writing a class that defines a Durable Object</span></h2><p>Before you can create and access Durable Objects, you must define their behavior by exporting an ordinary JavaScript class. Other languages will need a shim that translates their class definition to a JavaScript class.</p><p>The first parameter passed to the class constructor contains state specific to the Durable Object, including methods for accessing storage. The second parameter, <code>env</code>, contains any bindings you have associated with the Worker when you uploaded it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>DurableObjectExample</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Note this means bindings are no longer global variables. For example, if you had a secret binding <code>MY_SECRET</code>, you must access it as <code>env.MY_SECRET</code>.</p><p>Workers communicate with a Durable Object via the Fetch API. Like a Worker, a Durable Object listens for incoming Fetch events by registering an event handler. The difference is that for Durable Objects the fetch handler is defined as a method on the class.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>DurableObjectExample</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nx>Response</span><span class=p>(</span><span class=s2>&#34;Hello World&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>A Worker can pass information to a Durable Object via headers, the HTTP method, the Request body, or the Request URI.</p><aside class=DocsMarkdown--aside role=note data-type=note>HTTP requests received by a Durable Object do not come directly from the Internet. They come from other Worker code – possibly other Durable Objects, or just plain Workers. Durable Objects use HTTP for familiarity, but plan to introduce other protocols in the future.</aside><h3 id=accessing-persistent-storage-from-a-durable-object><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#accessing-persistent-storage-from-a-durable-object>&#8203;​</a></span>
<span>Accessing Persistent Storage from a Durable Object</span></h3><p>Durable Objects gain access to a <a href=/workers/runtime-apis/durable-objects/#transactional-storage-api class=DocsMarkdown--link><span class=DocsMarkdown--link-content>persistent storage API</span></a> via the first parameter passed to the Durable Object constructor. While access to a Durable Object is single-threaded, it is important to remember that request executions can still interleave with each other when they wait on I/O, such as when waiting on the promises returned by persistent storage methods or <code>fetch</code> requests.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>DurableObjectExample</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=nx>state</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>ip</span> <span class=o>=</span> <span class=nx>request</span><span class=p>.</span><span class=nx>headers</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;CF-Connecting-IP&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>data</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>request</span><span class=p>.</span><span class=nx>text</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>storagePromise</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>storage</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=nx>ip</span><span class=p>,</span> <span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>storagePromise</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nx>Response</span><span class=p>(</span><span class=nx>ip</span> <span class=o>+</span> <span class=s2>&#34; stored &#34;</span> <span class=o>+</span> <span class=nx>data</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The Durable Objects storage API employs several techniques to help you avoid subtle-yet-common storage bugs:</p><ul><li><p>Each individual storage operation is strictly ordered with respect to all others. Even if the operation completes asynchronously (requiring you to <code>await</code> a promise), the results will always be accurate as of the time the operation was invoked.</p></li><li><p>A Durable Object can process multiple concurrent requests. However, when a storage operation is in progress (such as, when you are <code>await</code>ing the result of a <code>get()</code>), delivery of concurrent events will be paused. This ensures that the state of the Object cannot unexpectedly change while a read operation is in-flight, which would otherwise make it very hard to keep in-memory state properly synchronized with on-disk state. If desired, this behavior can be bypassed using the option <a href=/workers/runtime-apis/durable-objects/#methods class=DocsMarkdown--link><span class=DocsMarkdown--link-content><code>allowConcurrency: true</code></span></a>.</p></li><li><p>If multiple write operations are performed consecutively – without <code>await</code>ing anything in the meantime – then they will automatically be coalesced and applied atomically. This means that, even in the case of a machine failure, either all of the operations will have been stored to disk, or none of them will have been.</p></li><li><p>Write operations are queued to a write buffer, allowing calls like <code>put()</code> and <code>delete()</code> to complete immediately from the application&rsquo;s point of view. However, when the application initiates an outgoing network message (such as responding to a request, or invoking <code>fetch()</code>), the network request will be held until all previous writes are confirmed to be durable. This ensures that an application cannot accidentally confirm a write prematurely. If desired, this behavior can be bypassed using the option <a href=/workers/runtime-apis/durable-objects/#methods class=DocsMarkdown--link><span class=DocsMarkdown--link-content><code>allowUnconfirmed: true</code></span></a>.</p></li><li><p>The storage API implements an in-memory caching layer to improve performance. Reads that hit cache will return instantly, without context-switching to another thread. When reading or writing a value where caching is not worthwhile, you may use the option <a href=/workers/runtime-apis/durable-objects/#methods class=DocsMarkdown--link><span class=DocsMarkdown--link-content><code>noCache: true</code></span></a> to avoid it – but this option only affects performance, it will not change behavior.</p></li></ul><p>For more discussion about these features, refer to the <a href=https://blog.cloudflare.com/durable-objects-easy-fast-correct-choose-three/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Durable Objects: Easy, Fast, Correct – Choose Three</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> blog post.</p><h3 id=in-memory-state-in-a-durable-object><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#in-memory-state-in-a-durable-object>&#8203;​</a></span>
<span>In-memory state in a Durable Object</span></h3><p>Variables in a Durable Object will maintain state as long as your Durable Object is not evicted from memory. A common pattern is to initialize an object from persistent storage and set instance variables the first time it is accessed. Since future accesses are routed to the same object, it is then possible to return any initialized values without making further calls to persistent storage.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>Counter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=nx>state</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// `blockConcurrencyWhile()` ensures no requests are delivered until
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// initialization completes.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>blockConcurrencyWhile</span><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kd>let</span> <span class=nx>stored</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>storage</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;value&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=c1>// After initialization, future reads do not need to access storage.
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=k>this</span><span class=p>.</span><span class=nx>value</span> <span class=o>=</span> <span class=nx>stored</span> <span class=o>||</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Handle HTTP requests from clients.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>async</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// use this.value rather than storage
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>A given instance of a Durable Object may share global memory with other instances of the same class. In the example above, using a global variable <code>value</code> instead of the instance variable <code>this.value</code> would be incorrect. Two different instances of <code>Counter</code> will each have their own separate memory for <code>this.value</code>, but might share memory for the global variable <code>value</code>, leading to unexpected results. Because of this, it is best to avoid global variables.</p><aside class=DocsMarkdown--aside role=note data-type=note><div class=DocsMarkdown--aside-header>Built-in caching</div><p>The Durable Object&rsquo;s storage has a built-in in-memory cache of its own – if you <code>get()</code> a value that was read or written recently, the result will be instantly returned from cache. Instead of writing initialization code like above, you could <code>get("value")</code> whenever you need it, and rely on the built-in cache to make this fast. Refer to the <a href=#example---counter class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Counter example</span></a> below for an example of this approach.</p><p>However, in applications with more complex state, <a href=/workers/learning/using-durable-objects/#in-memory-state-in-a-durable-object class=DocsMarkdown--link><span class=DocsMarkdown--link-content>explicitly storing state in your Object</span></a> may be easier than making storage API calls on every access. Depending on the configuration of your project, write your code in the way that is easiest for you.</p></aside><h3 id=websockets-in-durable-objects><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#websockets-in-durable-objects>&#8203;​</a></span>
<span>WebSockets in Durable Objects</span></h3><p>As part of Durable Objects, Workers can act as WebSocket endpoints – including as a client or as a server. Previously, Workers could proxy WebSocket connections on to a back-end server, but could not speak the protocol directly.</p><p>While technically any Worker can speak WebSocket in this way, WebSockets are most useful when combined with Durable Objects. When a client connects to your application using a WebSocket, you need a way for server-generated events to be sent back to the existing socket connection. Without Durable Objects, there is no way to send an event to the specific Worker holding a WebSocket. With Durable Objects, you can forward the WebSocket to an Object. Messages can then be addressed to that Object by its unique ID, and the Object can then forward those messages down the WebSocket to the client.</p><p>For more information, refer to <a href=/workers/learning/using-websockets/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Using WebSockets</span></a>. For an example of WebSockets in action within Durable Objects, review the <a href=https://github.com/cloudflare/workers-chat-demo class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>example chat application</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span>
</span></a>.</p><h3 id=alarms-in-durable-objects><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#alarms-in-durable-objects>&#8203;​</a></span>
<span>Alarms in Durable Objects</span></h3><p>Alarms allow Durable Objects to wake themselves up by executing the <code>alarm()</code> handler at some point in the future. Alarms are modified using the <a href=/workers/runtime-apis/durable-objects/#transactional-storage-api class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Transactional Storage API</span></a>, and so alarm operations follow the same rules as other storage operations. Each Durable Object instance is able to schedule a single alarm at a time by calling <code>setAlarm()</code>. Alarms have guaranteed at-least-once execution and are retried automatically when the <code>alarm()</code> handler throws. Retries are performed using exponential backoff starting at a 2 second delay from the first failure with up to 6 retries allowed.</p><aside class=DocsMarkdown--aside role=note data-type=note><div class=DocsMarkdown--aside-header>How are alarms different from Cron Triggers?</div><p>Alarms are more fine grained than Cron Triggers. A Workers service can have up to three Cron Triggers configured at once, but it can have an unlimited amount of Durable Objects each of which can have an alarm set.</p><p>Alarms are directly scheduled from within your Durable Object. Cron Triggers, on the other hand, are not programmatic. Cron Triggers execute based on their schedules, which have to be configured through the Cloudflare dashboard or API.</p></aside><p>Alarms can be used to build distributed primitives, like queues or batching of work atop Durable Objects. They also provide a method for guaranteeing work within a Durable Object will complete without relying on incoming requests to keep the object alive. For more discussion about alarms, refer to the <a href=https://blog.cloudflare.com/durable-objects-alarms/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>announcement blog post</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span>
</span></a>.</p><h2 id=instantiating-and-communicating-with-a-durable-object><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#instantiating-and-communicating-with-a-durable-object>&#8203;​</a></span>
<span>Instantiating and communicating with a Durable Object</span></h2><p>Durable Objects do not receive requests directly from the Internet. Durable Objects receive requests from Workers or other Durable Objects. This is achieved by configuring a binding in the calling Worker for each Durable Object class that you would like it to be able to talk to. These bindings work similarly to KV bindings and must be configured at upload time. Methods exposed by the binding can be used to communicate with particular Durable Object instances.</p><p>A binding is defined in the <code>wrangler.toml</code> file of your Worker project’s directory.</p><aside class=DocsMarkdown--aside role=note data-type=note><div class=DocsMarkdown--aside-header>What is a binding?</div><p>A binding is a how your Worker interacts with external resources such as <a href=/workers/runtime-apis/kv/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>KV Namespaces</span></a> or Durable Objects. A binding is a runtime variable that the Workers runtime provides to your code.</p><p>You can declare a variable name in your <code>wrangler.toml</code> file that will be bound to these resources at runtime, and interact with them through this variable. Every binding’s variable name and behavior is determined by you when deploying the Worker. Refer to the <a href=/workers/platform/environment-variables/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Environment Variables</span></a> documentation for more information.</p></aside><p>When a Worker talks to a Durable Object, it does so through a stub object. The class binding&rsquo;s <code>get()</code> method returns a stub to the particular Durable Object instance, and the stub&rsquo;s <code>fetch()</code> method sends HTTP <a href=/workers/runtime-apis/request/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Requests</span></a> to the instance.</p><p>The fetch handler in the example below implements the Worker that talks to the Durable Object. Note that the fetch handler is written using a new kind of Workers syntax based on ES Modules. This syntax is required for scripts that export Durable Objects classes, but is not required for scripts that make calls to Durable Objects. However, Workers written in the modules syntax (including Durable Objects) cannot share a script with Workers written in the Service Worker syntax.</p><p>We recommend following this approach of implementing Durable Objects and a corresponding fetch handler in the same script (written in the modules format) for convenience, but it is not required.</p><p>ES Modules differ from regular JavaScript files in that they have imports and exports. <a href=/workers/learning/using-durable-objects/#writing-a-class-that-defines-a-durable-object class=DocsMarkdown--link><span class=DocsMarkdown--link-content>As shown earlier</span></a>, you wrote <code>export class DurableObjectExample</code> when defining our class. To implement a fetch handler, you must export a method named <code>fetch</code> in an <code>export default {}</code> block.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// In modules-syntax workers, you use `export default` to export your script&#39;s
</span></span></span><span class=line><span class=cl><span class=c1>// main event handlers, such as the `fetch` handler for receiving HTTP
</span></span></span><span class=line><span class=cl><span class=c1>// requests. In pre-modules workers, the fetch handler was registered using
</span></span></span><span class=line><span class=cl><span class=c1>// `addEventHandler(&#34;fetch&#34;, event =&gt; { ... })`; this is just new syntax for
</span></span></span><span class=line><span class=cl><span class=c1>// essentially the same thing.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// In modules-syntax workers, bindings are delivered as a property of the
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// environment object passed as the second parameter when an event handler or
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// class constructor is invoked. This is new compared to pre-ES Module workers,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// in which bindings show up as global variables.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>async</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Derive an object ID from the URL path. `EXAMPLE_CLASS` is the Durable
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// Object binding that you will read how to configure in the next section.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// `EXAMPLE_CLASS.idFromName()` always returns the same ID when given the
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// same string as input (and called on the same class), but never the same
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ID for two different strings (or for different classes). So, in this
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// case, you are creating a new object for each unique path.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>id</span> <span class=o>=</span> <span class=nx>env</span><span class=p>.</span><span class=nx>EXAMPLE_CLASS</span><span class=p>.</span><span class=nx>idFromName</span><span class=p>(</span><span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>).</span><span class=nx>pathname</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Construct the stub for the Durable Object using the ID. A stub is a
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// client object used to send messages to the Durable Object.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>stub</span> <span class=o>=</span> <span class=nx>env</span><span class=p>.</span><span class=nx>EXAMPLE_CLASS</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Forward the request to the Durable Object. Note that `stub.fetch()` has
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// the same signature as the global `fetch()` function, except that the
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// request is always sent to the object, regardless of the request&#39;s URL.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// The first time you send a request to a new object, the object will be
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// created for us. If you do not store durable state in the object, it will
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// automatically be deleted later (and recreated if you request it again).
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// If you do store durable state, then the object may be evicted from memory
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// but its durable state will be kept around permanently.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>stub</span><span class=p>.</span><span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// You received an HTTP response back. You could process it in the usual
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ways, but in this case, you will just return it to the client.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nx>response</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>Learn more about communicating with a Durable Object in the <a href=/workers/runtime-apis/durable-objects/#accessing-a-durable-object-from-a-worker class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Workers Durable Objects API reference</span></a>.</p><aside class=DocsMarkdown--aside role=note data-type=note><div class=DocsMarkdown--aside-header>String-derived IDs versus system-generated IDs</div>In the above example, you used a string-derived object ID by calling the <code>idFromName()</code> function on the binding. You can also ask the system to generate random unique IDs. System-generated unique IDs have better performance characteristics, but require that you store the ID somewhere in order to access the object again later. Refer to the <a href=/workers/runtime-apis/durable-objects/#accessing-a-durable-object-from-a-worker class=DocsMarkdown--link><span class=DocsMarkdown--link-content>API reference documentation</span></a> for more information.</aside><h2 id=uploading-a-durable-object-worker><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#uploading-a-durable-object-worker>&#8203;​</a></span>
<span>Uploading a Durable Object Worker</span></h2><aside class=DocsMarkdown--aside role=note data-type=warning><div class=DocsMarkdown--aside-header>Custom Wrangler installation instructions</div>You must use <a href=/workers/wrangler/install-and-update/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Wrangler version 1.19.3 or greater</span></a> in order to manage Durable Objects.</aside><p>The easiest way to upload Workers that implement or bind to Durable Objects is to use <a href=/workers/wrangler/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Wrangler</span></a>, the Workers CLI. You can start with one of our templates, the simplest of which can be used by running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ git clone https://github.com/cloudflare/durable-objects-template
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> durable-objects-template
</span></span><span class=line><span class=cl>$ wrangler dev
</span></span></code></pre></div><p>This will create a directory for your project with basic configuration and a single JavaScript source file already set up. If you want to use TypeScript, or be able to bundle external dependencies with your code using Rollup or Webpack, or to use CommonJS modules rather than ES modules, try one of the other starter templates instead:</p><ul><li><a href=https://github.com/cloudflare/durable-objects-rollup-esm class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Durable Objects Rollup ES Modules template</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></li><li><a href=https://github.com/cloudflare/durable-objects-typescript-rollup-esm class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Durable Objects TypeScript Rollup ES Modules template</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></li><li><a href=https://github.com/cloudflare/durable-objects-webpack-commonjs class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Durable Objects Webpack CommonJS template</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></li></ul><p>The following sections will cover how to customize the configuration, but you can also immediately publish the generated project using the <a href=/workers/wrangler/commands/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content><code>wrangler publish</code></span></a> command.</p><h3 id=specifying-the-main-module><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#specifying-the-main-module>&#8203;​</a></span>
<span>Specifying the main module</span></h3><p>Workers that use ES Modules syntax must have a main module specified from which all Durable Objects and event handlers are exported. The file that should be treated as the main module is configured using the <code>"main"</code> key in the <code>[build.upload]</code> section of <code>wrangler.toml</code>. Refer to the <a href=/workers/wrangler/configuration/#modules class=DocsMarkdown--link><span class=DocsMarkdown--link-content>modules section of the custom builds documentation</span></a> for more details.</p><h3 id=configuring-durable-object-bindings><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#configuring-durable-object-bindings>&#8203;​</a></span>
<span>Configuring Durable Object bindings</span></h3><p>Durable Objects bindings can be configured in <code>wrangler.toml</code> by providing the class name and script name whose objects you wish to access using the binding. The script name can be omitted when creating a binding for a class that is defined in the same Worker as the binding.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>durable_objects</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>bindings</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;EXAMPLE_CLASS&#34;</span><span class=p>,</span> <span class=nx>class_name</span> <span class=p>=</span> <span class=s2>&#34;DurableObjectExample&#34;</span> <span class=p>}</span> <span class=c># Binding to our DurableObjectExample class</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>The <code>[durable_objects]</code> section has 1 subsection:</p><ul><li><code>bindings</code> - An array of tables, each table can contain the below fields.<ul><li><code>name</code> - Required. The binding name to use within your Worker.</li><li><code>class_name</code> - Required. The class name you wish to bind to.</li><li><code>script_name</code> - Optional. Defaults to the current <a href=/workers/platform/environments/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>environment&rsquo;s</span></a> script.</li></ul></li></ul><p>If you are using Wrangler <a href=/workers/platform/environments/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>environments</span></a>, you must specify any Durable Object bindings you wish to use on a per-environment basis. Durable Object bindings are not inherited. For example, an environment named <code>staging</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>env</span><span class=p>.</span><span class=nx>staging</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>durable_objects</span><span class=p>.</span><span class=nx>bindings</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;EXAMPLE_CLASS&#34;</span><span class=p>,</span> <span class=nx>class_name</span> <span class=p>=</span> <span class=s2>&#34;DurableObjectExample&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>Because Wrangler <a href=/workers/platform/environments/#naming class=DocsMarkdown--link><span class=DocsMarkdown--link-content>appends the environment name to the top-level name</span></a> when publishing, for a Worker named <code>worker-name</code> the above example is equivalent to:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>env</span><span class=p>.</span><span class=nx>staging</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>durable_objects</span><span class=p>.</span><span class=nx>bindings</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;EXAMPLE_CLASS&#34;</span><span class=p>,</span> <span class=nx>class_name</span> <span class=p>=</span> <span class=s2>&#34;DurableObjectExample&#34;</span><span class=p>,</span> <span class=nx>script_name</span> <span class=p>=</span> <span class=s2>&#34;worker-name-staging&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>Note that <code>"EXAMPLE_CLASS"</code> in the staging environment is bound to a different script name compared to the top-level <code>"EXAMPLE_CLASS"</code> binding, and will therefore access different objects with different persistent storage. If you want an environment-specific binding that accesses the same objects as the top-level binding, specify the top-level script name explicitly:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>env</span><span class=p>.</span><span class=nx>another</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>durable_objects</span><span class=p>.</span><span class=nx>bindings</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;EXAMPLE_CLASS&#34;</span><span class=p>,</span> <span class=nx>class_name</span> <span class=p>=</span> <span class=s2>&#34;DurableObjectExample&#34;</span><span class=p>,</span> <span class=nx>script_name</span> <span class=p>=</span> <span class=s2>&#34;worker-name&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h3 id=configuring-durable-object-classes-with-migrations><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#configuring-durable-object-classes-with-migrations>&#8203;​</a></span>
<span>Configuring Durable Object classes with migrations</span></h3><p>When you make changes to your list of Durable Objects classes, you must initiate a migration process. A migration is informing the Workers platform of the changes and provide it with instructions on how to deal with those changes.</p><p>The most common migration performed is a new class migration, which informs the system that a new Durable Object class is being uploaded.</p><p>Migrations can also be used for transferring stored data between two Durable Object classes:</p><ul><li>Rename migrations are used to transfer stored objects between two Durable Object classes in the same script.</li><li>Transfer migrations are used to transfer stored objects between two Durable Object classes in different scripts.</li></ul><p>The destination class (the class that stored objects are being transferred to) for a rename or transfer migration must be exported by the deployed script.</p><aside class=DocsMarkdown--aside role=note data-type=warning><div class=DocsMarkdown--aside-header>Important</div><p>After a rename or transfer migration, requests to the destination Durable Object class will have access to the source Durable Object&rsquo;s stored data.</p><p>After a migration, any existing bindings to the original Durable Object class (for example, from other Workers) will automatically forward to the updated destination class. However, any Worker scripts bound to the updated Durable Object class must update their <code>[durable_objects]</code> configuration in the <code>wrangler.toml</code> file for their next deployment.</p></aside><p>Migrations can also be used to delete a Durable Object class and its stored objects.</p><aside class=DocsMarkdown--aside role=note data-type=warning><div class=DocsMarkdown--aside-header>Important</div>Running a delete migration will delete all Durable Object instances associated with the deleted class, including all of their stored data. Do not run a delete migration on a class without first ensuring that you are not relying on the Durable Objects within that class anymore. Copy any important data to some other location before deleting.</aside><h3 id=durable-object-migrations-in-wranglertoml><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#durable-object-migrations-in-wranglertoml>&#8203;​</a></span>
<span>Durable Object migrations in <code>wrangler.toml</code></span></h3><p>Migrations are performed through the <code>[[migrations]]</code> configurations key in your <code>wrangler.toml</code> file. Migrations require a migration tag, which is defined by the <code>tag</code> property in each migration entry. Migration tags are treated like unique names and are used to determine which migrations have already been applied. Once a given script has a migration tag set on it, all future script uploads must include a migration tag.</p><p>The migration list is an ordered array of tables, specified as a top-level key in your <code>wrangler.toml</code> file. The migration list is inherited by all environments and cannot be overridden by a specific environment.</p><p>All migrations are applied at deployment. Each migration can only be applied once per <a href=/workers/platform/environments/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>environment</span></a>.</p><p>To illustrate an example migrations workflow, the <code>DurableObjectExample</code> class can be initially defined with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[[</span><span class=nx>migrations</span><span class=p>]]</span>
</span></span><span class=line><span class=cl><span class=nx>tag</span> <span class=p>=</span> <span class=s2>&#34;v1&#34;</span> <span class=c># Should be unique for each entry</span>
</span></span><span class=line><span class=cl><span class=nx>new_classes</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;DurableObjectExample&#34;</span><span class=p>]</span> <span class=c># Array of new classes</span>
</span></span></code></pre></div><p>Each migration in the list can have multiple directives, and multiple migrations can be specified as your project grows in complexity. For example, you may want to rename the <code>DurableObjectExample</code> class to <code>UpdatedName</code> and delete an outdated <code>DeprecatedClass</code> entirely.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[[</span><span class=nx>migrations</span><span class=p>]]</span>
</span></span><span class=line><span class=cl><span class=nx>tag</span> <span class=p>=</span> <span class=s2>&#34;v1&#34;</span> <span class=c># Should be unique for each entry</span>
</span></span><span class=line><span class=cl><span class=nx>new_classes</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;DurableObjectExample&#34;</span><span class=p>]</span> <span class=c># Array of new classes</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[[</span><span class=nx>migrations</span><span class=p>]]</span>
</span></span><span class=line><span class=cl><span class=nx>tag</span> <span class=p>=</span> <span class=s2>&#34;v2&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>renamed_classes</span> <span class=p>=</span> <span class=p>[{</span><span class=nx>from</span> <span class=p>=</span> <span class=s2>&#34;DurableObjectExample&#34;</span><span class=p>,</span> <span class=nx>to</span> <span class=p>=</span> <span class=s2>&#34;UpdatedName&#34;</span> <span class=p>}]</span> <span class=c># Array of rename directives</span>
</span></span><span class=line><span class=cl><span class=nx>deleted_classes</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;DeprecatedClass&#34;</span><span class=p>]</span> <span class=c># Array of deleted class names</span>
</span></span></code></pre></div><aside class=DocsMarkdown--aside role=note data-type=note>Note that <code>.toml</code> files do not allow line breaks in inline tables (the <code>{key = "value"}</code> syntax), but line breaks in the surrounding inline array are acceptable.</aside><h3 id=durable-object-migrations-through-wrangler-cli><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#durable-object-migrations-through-wrangler-cli>&#8203;​</a></span>
<span>Durable Object migrations through Wrangler CLI</span></h3><aside class=DocsMarkdown--aside role=note data-type=warning><div class=DocsMarkdown--aside-header>Deprecation Notice</div>While CLI migrations initially served a way to quickly migrate Durable Objects, this method is now deprecated and will be removed in a future release.</aside><p>It is possible to define a migration purely through extra arguments to the <code>wrangler publish</code> command. When taking this route, any migrations listed in the <code>wrangler.toml</code> configuration file are ignored.</p><p>You should provide an <code>--old-tag</code> value whenever possible. This value should be the name of the migration tag that you believe to be most recently active. Your <code>wrangler publish</code> command will throw an error if your <code>--old-tag</code> expectation does not align with Cloudflare&rsquo;s value.</p><p>The list of CLI migration arguments that can be added to <code>wrangler publish</code> is as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>--old-tag &lt;tag name&gt; <span class=c1># Optional if your script does not have a migration tag set yet.</span>
</span></span><span class=line><span class=cl>--new-tag &lt;tag name&gt; <span class=c1># new-tag and old-tag are optional if you only use CLI migrations.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Each of the migration directives can be specified multiple times if you are</span>
</span></span><span class=line><span class=cl><span class=c1># creating/deleting/renaming/transferring multiple classes at once.</span>
</span></span><span class=line><span class=cl>--new-class &lt;class name&gt;
</span></span><span class=line><span class=cl>--delete-class &lt;class name&gt;
</span></span><span class=line><span class=cl>--rename-class &lt;from class&gt; &lt;to class&gt;
</span></span><span class=line><span class=cl>--transfer-class &lt;from script&gt; &lt;from class&gt; &lt;to class&gt;
</span></span></code></pre></div><h3 id=test-your-durable-objects-project><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#test-your-durable-objects-project>&#8203;​</a></span>
<span>Test your Durable Objects project</span></h3><p>If you copy the <code>DurableObjectExample</code> and fetch handler code from above into a generated Wrangler project, publish it using a <code>--new-class</code> migration, and make a request to it, you will notice that your request was stored in a Durable Object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ curl -H <span class=s2>&#34;Content-Type: text/plain&#34;</span> https://&lt;worker-name&gt;.&lt;your-namespace&gt;.workers.dev/ --data <span class=s2>&#34;important data!&#34;</span>
</span></span><span class=line><span class=cl>***.***.***.*** stored important data!
</span></span></code></pre></div><p>As you write Durable Objects, find more helpful details in the <a href=/workers/runtime-apis/durable-objects/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Durable Objects runtime API documentation</span></a>.</p><p><a href=https://github.com/cloudflare/miniflare class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Miniflare</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> includes helpful tools for mocking and testing your Durable Objects.</p><h2 id=limits><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#limits>&#8203;​</a></span>
<span>Limits</span></h2><p>Refer to the <a href=/workers/platform/limits/#durable-objects class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Durable Objects section of the Limits page</span></a> for relevant usage limits.</p><h2 id=limitations><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#limitations>&#8203;​</a></span>
<span>Limitations</span></h2><p>Durable Objects is generally available. However, there are some known limitations.</p><h3 id=global-uniqueness><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#global-uniqueness>&#8203;​</a></span>
<span>Global Uniqueness</span></h3><p>Uniqueness is enforced upon starting a new event (such as receiving an HTTP request), and upon accessing storage. After an event is received, if the event takes some time to execute and does not ever access its durable storage, then it is possible that the Durable Object instance may no longer be current, and some other instance of the same Object ID will have been created elsewhere. If the event accesses storage at this point, it will receive an exception. If the event completes without ever accessing storage, it may not ever realize that the Object was no longer current.</p><p>In particular, a Durable Object may be superseded in this way in the event of a network partition or a software update (including either an update of the Durable Object&rsquo;s class code, or of the Workers system itself). Enabling <code>wrangler tail</code> or dashboard logs requires a software update.</p><h3 id=development-tools><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#development-tools>&#8203;​</a></span>
<span>Development tools</span></h3><p><a href=/workers/wrangler/commands/#tail class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Wrangler tail</span></a> logs from requests that are upgraded to WebSockets are delayed until the WebSocket is closed. Wrangler tail should not be connected to a script that you expect will receive heavy volumes of traffic.</p><p>The Workers editor in <a href=https://dash.cloudflare.com/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>the Cloudflare dashboard</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> allows you to interactively edit and preview your Worker and Durable Objects. Note that in the editor Durable Objects can only be talked to by a preview request if the Worker being previewed both exports the Durable Object class and binds to it. Durable Objects exported by other Workers cannot be talked to in the editor preview.</p><p><a href=/workers/wrangler/commands/#dev class=DocsMarkdown--link><span class=DocsMarkdown--link-content><code>wrangler dev</code></span></a> has read access to Durable Object storage, but writes will be kept in memory and will not affect persistent data. However, if you specify the <code>script_name</code> explicitly in the Durable Object binding, then writes will affect persistent data. <a href=/workers/wrangler/compare-v1-v2/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Wrangler 2</span></a> will emit a warning in that case.</p><h3 id=object-location><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#object-location>&#8203;​</a></span>
<span>Object location</span></h3><p>Not all Cloudflare locations host Durable Objects, so Objects may not be created in the same data center where they are first requested.</p><p>Currently, Durable Objects do not migrate between locations after initial creation. Cloudflare will be exploring automatic migration compatibility in the future.</p><h3 id=performance><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#performance>&#8203;​</a></span>
<span>Performance</span></h3><p>Using Durable Objects will often add response latency, as the request must be forwarded to the data center where the object is located. Because objects are usually located near where they were first requested, it can be bad for latency to precreate objects from a single location such as your development workstation. It is better for latency to create objects in response to actual production traffic.</p><h2 id=example---counter><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#example---counter>&#8203;​</a></span>
<span>Example - Counter</span></h2><p>The complete example code is included for both the Worker and the Durable Object for a basic counter below. Refer <a href=https://github.com/cloudflare/durable-objects-template class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>to GitHub</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> for the full code template.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// Worker
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kr>await</span> <span class=nx>handleRequest</span><span class=p>(</span><span class=nx>request</span><span class=p>,</span> <span class=nx>env</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>handleRequest</span><span class=p>(</span><span class=nx>request</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>url</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>name</span> <span class=o>=</span> <span class=nx>url</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;name&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nx>Response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Select a Durable Object to contact by using&#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34; the `name` URL query string parameter. e.g. ?name=A&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Every unique ID refers to an individual instance of the Counter class that
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// has its own state. `idFromName()` always returns the same ID when given the
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// same string as input (and called on the same class), but never the same
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// ID for two different strings (or for different classes).
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>let</span> <span class=nx>id</span> <span class=o>=</span> <span class=nx>env</span><span class=p>.</span><span class=nx>COUNTER</span><span class=p>.</span><span class=nx>idFromName</span><span class=p>(</span><span class=nx>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Construct the stub for the Durable Object using the ID. A stub is a
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// client object used to send messages to the Durable Object.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>let</span> <span class=nx>obj</span> <span class=o>=</span> <span class=nx>env</span><span class=p>.</span><span class=nx>COUNTER</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>id</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Send a request to the Durable Object, then await its response.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>let</span> <span class=nx>resp</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>obj</span><span class=p>.</span><span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>count</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>resp</span><span class=p>.</span><span class=nx>text</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=k>new</span> <span class=nx>Response</span><span class=p>(</span><span class=sb>`Durable Object &#39;</span><span class=si>${</span><span class=nx>name</span><span class=si>}</span><span class=sb>&#39; count: </span><span class=si>${</span><span class=nx>count</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Durable Object
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>Counter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>constructor</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span> <span class=nx>env</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>state</span> <span class=o>=</span> <span class=nx>state</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// Handle HTTP requests from clients.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>async</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Apply requested action.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>url</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Durable Object storage is automatically cached in-memory, so reading the
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// same key every request is fast. (That said, you could also store the
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// value in a class member if you prefer.)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>let</span> <span class=nx>value</span> <span class=o>=</span> <span class=p>(</span><span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>storage</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;value&#34;</span><span class=p>))</span> <span class=o>||</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=p>(</span><span class=nx>url</span><span class=p>.</span><span class=nx>pathname</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=s2>&#34;/increment&#34;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=o>++</span><span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=s2>&#34;/decrement&#34;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=o>--</span><span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>case</span> <span class=s2>&#34;/&#34;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Just serve the current value.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>default</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=nx>Response</span><span class=p>(</span><span class=s2>&#34;Not found&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>status</span><span class=o>:</span> <span class=mi>404</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// You do not have to worry about a concurrent request having modified the
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// value in storage because &#34;input gates&#34; will automatically protect against
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// unwanted concurrency. So, read-modify-write is safe. For more details,
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// refer to: https://blog.cloudflare.com/durable-objects-easy-fast-correct-choose-three/
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>state</span><span class=p>.</span><span class=nx>storage</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=s2>&#34;value&#34;</span><span class=p>,</span> <span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nx>Response</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=related-resources><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#related-resources>&#8203;​</a></span>
<span>Related resources</span></h2><ul><li><a href=/workers/runtime-apis/durable-objects/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Durable Objects runtime API</span></a></li></ul><h2 id=troubleshooting><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#troubleshooting>&#8203;​</a></span>
<span>Troubleshooting</span></h2><h3 id=debugging><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#debugging>&#8203;​</a></span>
<span>Debugging</span></h3><p><a href=/workers/wrangler/commands/#dev class=DocsMarkdown--link><span class=DocsMarkdown--link-content><code>wrangler dev</code></span></a> and <a href=/workers/wrangler/commands/#tail class=DocsMarkdown--link><span class=DocsMarkdown--link-content><code>wrangler tail</code></span></a> are both available to help you debug your Durable Objects.</p><p>The <code>wrangler dev</code> command opens up a tunnel from your local development environment to Cloudflare&rsquo;s network edge, letting you test your Durable Objects code in the Workers environment as you write it.</p><p><code>wrangler tail</code> displays a live feed of console and exception logs for each request served by your script, including both normal Worker requests and Durable Object requests. After doing a <code>wrangler publish</code>, you can use <code>wrangler tail</code> in the root directory of your Worker project and visit your Worker URL to see console and error logs in your terminal.</p><h3 id=graphql-analytics><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#graphql-analytics>&#8203;​</a></span>
<span>GraphQL Analytics</span></h3><p>Durable Object metrics are powered by GraphQL, like other Workers metrics. Learn more about querying Workers data sets in this <a href=/analytics/graphql-api/tutorials/querying-workers-metrics/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>tutorial</span></a>. The data sets that include Durable Object metrics include <code>durableObjectsInvocationsAdaptiveGroups</code>, <code>durableObjectsPeriodicGroups</code>, <code>durableObjectsStorageGroups</code>, and <code>durableObjectsSubrequestsAdaptiveGroups</code>. You can <a href=/analytics/graphql-api/getting-started/explore-graphql-schema class=DocsMarkdown--link><span class=DocsMarkdown--link-content>use GraphQL introspection to get information on the fields exposed by each</span></a>.</p><h3 id=common-errors><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#common-errors>&#8203;​</a></span>
<span>Common errors</span></h3><h4 id=error-no-event-handlers-were-registered-this-script-does-nothing><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#error-no-event-handlers-were-registered-this-script-does-nothing>&#8203;​</a></span>
<span>Error: <code>No event handlers were registered. This script does nothing.</code></span></h4><p>In your <code>wrangler.toml</code> file, make sure the <code>dir</code> and <code>main</code> entries point to the correct file containing your Worker script, and that the file extension is <code>.mjs</code> instead of <code>.js</code> if using ES Modules Syntax.</p><h4 id=error-when-deleting-migration><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#error-when-deleting-migration>&#8203;​</a></span>
<span>Error when deleting migration</span></h4><p>When deleting a migration using <code>wrangler publish --delete-class &lt;ClassName></code>, you may encounter this error: <code>"Cannot apply --delete-class migration to class &lt;ClassName> without also removing the binding that references it"</code>. You should remove the corresponding binding under <code>[durable_objects]</code> in <code>wrangler.toml</code> before attempting to apply <code>--delete-class</code> again.</p><h4 id=error-durable-object-is-overloaded><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#error-durable-object-is-overloaded>&#8203;​</a></span>
<span>Error: Durable Object is overloaded.</span></h4><p>A single instance of a Durable Object cannot do more work than is possible on a single thread. These errors mean the Durable Object has too much work to keep up with incoming requests:</p><ul><li><code>Error: Durable Object is overloaded. Too many requests queued.</code> The total count of queued requests is too high.</li><li><code>Error: Durable Object is overloaded. Too much data queued.</code> The total size of data in queued requests is too high.</li><li><code>Error: Durable Object is overloaded. Requests queued for too long.</code> The oldest request has been in the queue too long.</li></ul><p>To solve this you can either do less work per request, or send fewer requests, for example, by splitting the requests among more instances of the Durable Object.</p><h4 id=error-your-account-is-generating-too-much-load-on-durable-objects-please-back-off-and-try-again-later><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#error-your-account-is-generating-too-much-load-on-durable-objects-please-back-off-and-try-again-later>&#8203;​</a></span>
<span>Error: Your account is generating too much load on Durable Objects. Please back off and try again later.</span></h4><p>There is a limit on how quickly you can <a href=/workers/runtime-apis/durable-objects/#obtaining-an-object-stub class=DocsMarkdown--link><span class=DocsMarkdown--link-content>create new objects or lookup different existing objects</span></a>. Those lookups are usually cached, meaning attempts for the same set of recently accessed objects should be successful, so catching this error and retrying after a short wait is safe. If possible, also consider spreading those lookups across multiple requests.</p><h4 id=error-durable-object-reset-because-its-code-was-updated><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#error-durable-object-reset-because-its-code-was-updated>&#8203;​</a></span>
<span>Error: Durable Object reset because its code was updated.</span></h4><p>Refer to <a href=/workers/learning/using-durable-objects/#global-uniqueness class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Global Uniqueness</span></a>. &ldquo;Reset&rdquo; in error messages refers to in-memory state. Any durable state that has already been successfully persisted via <code>state.storage</code> is not affected.</p><h4 id=error-durable-object-storage-operation-exceeded-timeout-which-caused-object-to-be-reset><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#error-durable-object-storage-operation-exceeded-timeout-which-caused-object-to-be-reset>&#8203;​</a></span>
<span>Error: Durable Object storage operation exceeded timeout which caused object to be reset.</span></h4><p>To prevent indefinite blocking, there is a limit on how much time storage operations can take. In objects containing a sufficiently large number of key-value pairs, <code>deleteAll()</code> may hit that time limit and fail. When this happens, note that each <code>deleteAll()</code> call does make progress and that it is safe to retry until it succeeds. Otherwise contact <a href=https://support.cloudflare.com/hc/en-us/articles/200172476-Contacting-Cloudflare-Support class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Cloudflare support</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span>
</span></a>.</p></article></div></main><footer class=DocsFooter><div class=DocsFooter--content><div class=DocsFooterResources><span class=DocsFooter--content-additional-wrapper><a href="https://dash.cloudflare.com/?to=/:account/workers" class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Cloudflare Dashboard</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://discord.com/invite/cloudflaredev class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Discord</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://community.cloudflare.com/c/developers/workers/40 class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Community</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://www.cloudflare.com/learning/serverless/what-is-serverless/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Learning Center</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href="https://dash.cloudflare.com/?to=/:account/support" class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Support Portal</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span></div><div><span class=DocsFooter--edit-on-gh-link-wrapper><a href=https://github.com/panthere2k/panthere2k.github.io/blob/content/content/workers/learning/using-durable-objects.md class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Edit on GitHub</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-time>Updated <time class=relative datetime=2023-01-02T09:58:19+09:00 title=2023-01-02>January 2, 2023</time></span></div></div></footer></div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKQFGQB" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-PKQFGQB")</script><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style></noscript><script defer src=https://unpkg.com/littlefoot/dist/littlefoot.js type=application/javascript></script>
<script type=application/javascript>document.addEventListener("DOMContentLoaded",()=>littlefoot.default())</script></body></html>
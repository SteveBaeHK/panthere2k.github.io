<!doctype html><html lang=en theme=light is-docs-page js-focus-visible-polyfill-available><head><meta charset=utf-8><title>Use GraphQL to create widgets · Cloudflare Analytics docs</title><meta http-equiv=cleartype content="on"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=application-name content="Use GraphQL to create widgets · Cloudflare Analytics docs"><meta name=msapplication-tap-highlight content="no"><meta name=apple-mobile-web-app-title content="Use GraphQL to create widgets · Cloudflare Analytics docs"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-capable content="yes"><meta name=mobile-web-app-capable content="yes"><meta name=theme-color content="#f38020"><meta name=description content="With the GraphQL Analytics API, all of your performance, security, and reliability data is available from one endpoint. And you can select exactly what you need, from one metric for a domain to multiple metrics aggregated for your account."><meta property="og:image" content="https://panthere2k.github.io/core-services-preview.png"><meta property="og:title" content="Use GraphQL to create widgets · Cloudflare Analytics docs"><meta property="og:description" content="With the GraphQL Analytics API, all of your performance, security, and reliability data is available from one endpoint. And you can select exactly what you need, from one metric for a domain to multiple metrics aggregated for your account."><meta property="og:type" content="website"><meta name=twitter:title content="Use GraphQL to create widgets · Cloudflare Analytics docs"><meta name=twitter:image content="https://panthere2k.github.io/core-services-preview.png"><meta name=twitter:description content="With the GraphQL Analytics API, all of your performance, security, and reliability data is available from one endpoint. And you can select exactly what you need, from one metric for a domain to multiple metrics aggregated for your account."><meta name=twitter:creator content="@cloudflare"><meta name=twitter:card content="summary_large_image"><meta name=pcx_content_type content="tutorial"><link rel=icon href=/favicon-32x32.png><link rel=canonical href=https://panthere2k.github.io/analytics/graphql-api/tutorials/use-graphql-create-widgets/><link rel=sitemap href=/sitemap.xml type=application/xml><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon sizes=48x48 href=/icons/icon-48x48.png><link rel=apple-touch-icon sizes=72x72 href=/icons/icon-72x72.png><link rel=apple-touch-icon sizes=96x96 href=/icons/icon-96x96.png><link rel=apple-touch-icon sizes=144x144 href=/icons/icon-144x144.png><link rel=apple-touch-icon sizes=192x192 href=/icons/icon-192x192.png><link rel=apple-touch-icon sizes=256x256 href=/icons/icon-256x256.png><link rel=apple-touch-icon sizes=384x384 href=/icons/icon-384x384.png><link rel=apple-touch-icon sizes=512x512 href=/icons/icon-512x512.png><script src=/search.redirect.min.6828ce878577fe91120d67814d68c0d8.js defer></script><link rel="stylesheet preconnect" href=/style.css><script>(function(){let s=!1,e,n;document.readyState!=="loading"?o():addEventListener("DOMContentLoaded",o),e=document.querySelector("#ThemeToggle"),s=!e;function t(n){try{let o=n?"dark":"light";document.documentElement.setAttribute("theme",o),localStorage.theme=JSON.stringify({theme:o}),e?(e.checked=n,s=!1):s&&setTimeout(t,1,n)}catch{}}function o(){e=e||document.querySelector("#ThemeToggle"),e.addEventListener("change",()=>t(!!e.checked)),addEventListener("keydown",n=>{n.target===document.body&&n.which===68&&n.shiftKey&&(n.preventDefault(),t(!e.checked))})}try{n=window.matchMedia("(prefers-color-scheme:dark)"),n.onchange=e=>t(e.matches)}catch{}try{let e=localStorage.theme,s=e&&JSON.parse(e);t(s?/dark/.test(s.theme):!!(n&&n.matches))}catch{}})()</script><script src=/main.min.c2a5e976c412695a3d9389cba84aa5bd.js defer></script>
<script data-source=docs defer src=https://feedback.developers.cloudflare.com/sdk.js></script>
<link rel=preload href=https://feedback.developers.cloudflare.com/sdk.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://feedback.developers.cloudflare.com/sdk.css></noscript></head><body><div class=DocsPage><div><a class=skip-link href=#main>Skip to content</a></div><div class=DocsMobileHeader><a class="DocsMobileHeader--cloudflare-logo-link Link Link-without-underline" href=/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsMobileTitleHeader><a aria-current=page class="DocsMobileTitleHeader--logo-link Link Link-without-underline" href=/analytics/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><span title="Cloudflare Analytics logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M23.25 39A14.245 14.245.0 0119.5 11.01V7.912A17.25 17.25.0 1040.087 28.5H36.99A14.303 14.303.0 0123.25 39z"/><path d="M24 4.5 22.5 6v18l1.5 1.5h18l1.5-1.5A19.521 19.521.0 0024 4.5zm1.5 18V7.567A16.529 16.529.0 0140.432 22.5H25.5z"/></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:9>Analytics</span></span></div></a><button class="Button DocsMobileTitleHeader--sidebar-toggle-button">
<span class=DocsMobileTitleHeader--sidebar-toggle-button-icon aria-hidden=true><svg viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" role="img" aria-labelledby="title-1332672649688018" xmlns="http://www.w3.org/2000/svg"><title id="title-1332672649688018">Navigation menu icon</title><path data-index="1" d="M5 7h10" transform-origin="10 7"/><path data-index="2" d="M5 10h10" transform-origin="10 10"/><path data-index="3" d="M5 13h10" transform-origin="10 13"/></svg><span is-visually-hidden>Open external link</span></span></button></div><div class=DocsMobileNavBackdrop></div><div class=DocsSidebar><div class=DocsSidebar--sections><div class="DocsSidebar--section DocsSidebar--header-section"><a class="DocsSidebar--cloudflare-logo-link DocsSidebar--link" href=/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsSidebar--section-separator></div><div class="DocsSidebar--section DocsSidebar--docs-title-section"><a aria-current=page class="DocsSidebar--docs-title-logo-link DocsSidebar--link" href=/analytics/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><span title="Cloudflare Analytics logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M23.25 39A14.245 14.245.0 0119.5 11.01V7.912A17.25 17.25.0 1040.087 28.5H36.99A14.303 14.303.0 0123.25 39z"/><path d="M24 4.5 22.5 6v18l1.5 1.5h18l1.5-1.5A19.521 19.521.0 0024 4.5zm1.5 18V7.567A16.529 16.529.0 0140.432 22.5H25.5z"/></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:9>Analytics</span></span></div></a><div class="DocsSidebar--section-more Dropdown" data-expanded=false><button class="DocsSidebar--section-more-button Button" aria-expanded=false><div class=DocsSidebar--section-more-button-icon><svg viewBox="0 0 4 16" stroke="currentcolor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" fill="currentcolor" role="img" aria-labelledby="title-6032186738345315" xmlns="http://www.w3.org/2000/svg"><title id="title-6032186738345315">Dropdown icon</title><path d="M2 2v0m0 6v0m0 6v0z"/></svg><span is-visually-hidden>Analytics menu</span></div></button><div class="DocsSidebar--section-more-dropdown Dropdown--dropdown"><ul class=Dropdown--list><li class=Dropdown--item><a class=Dropdown--link href=https://cloudflare.com tabindex=-1>Cloudflare homepage</a></li></ul></div></div></div><div class="DocsSidebar--section DocsSidebar--nav-section" style=position:relative;overflow:hidden;width:100%;height:100%><div style=position:absolute;inset:0;overflow-y:auto;margin-right:0;margin-bottom:0><div class=DocsSidebar--nav-section-shadow style=opacity:0></div><ul class=DocsSidebar--nav><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Overview</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Workers Analytics Engine (beta)</span>
</button><a class=DocsSidebar--nav-link href=/analytics/analytics-engine/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Workers Analytics Engine (beta)</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/analytics-engine/get-started/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/analytics-engine/sql-api/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>SQL API</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/analytics-engine/sql-reference/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>SQL Reference</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/analytics-engine/grafana/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying from Grafana</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Cloudflare Web Analytics</span>
</button><a class=DocsSidebar--nav-link href=/analytics/web-analytics/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cloudflare Web Analytics</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Get started</span>
</button><a class=DocsSidebar--nav-link href=/analytics/web-analytics/getting-started/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/getting-started/web-analytics-spa/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Web Analytics for SPAs</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/getting-started/notifications/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Notifications</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Understanding Cloudflare Web Analytics</span>
</button><a class=DocsSidebar--nav-link href=/analytics/web-analytics/understanding-web-analytics/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Understanding Cloudflare Web Analytics</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/understanding-web-analytics/core-web-vitals/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Core Web Vitals</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/understanding-web-analytics/data-origin-and-collection/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Data origin and collection</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/understanding-web-analytics/dimensions/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Dimensions</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/understanding-web-analytics/high-level-metrics/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>High-level metrics</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/understanding-web-analytics/page-load-time-summary/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Page load time summary</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/understanding-web-analytics/limits/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Limits</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Configuring Cloudflare Web Analytics</span>
</button><a class=DocsSidebar--nav-link href=/analytics/web-analytics/configuring-web-analytics/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Configuring Cloudflare Web Analytics</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/configuring-web-analytics/filters/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Filters</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/configuring-web-analytics/rules/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Rules</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/web-analytics/changelog/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Changelog</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Cloudflare Network Analytics</span>
</button><a class=DocsSidebar--nav-link href=/analytics/network-analytics/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cloudflare Network Analytics</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/network-analytics/get-started/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Understanding Network Analytics</span>
</button><a class=DocsSidebar--nav-link href=/analytics/network-analytics/understand/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Understanding Network Analytics</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/network-analytics/understand/concepts/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Concepts</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/network-analytics/understand/main-dashboard/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Main dashboard</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Configuring Network Analytics</span>
</button><a class=DocsSidebar--nav-link href=/analytics/network-analytics/configure/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Configuring Network Analytics</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/network-analytics/configure/time-range/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Adjust the time range</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/network-analytics/configure/displayed-data/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Adjust the displayed data</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/network-analytics/configure/share-export/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Share and export data</span></a></li></ul></div></div></div></div></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item is-active-root is-expanded><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: GraphQL Analytics API</span>
</button><a class=DocsSidebar--nav-link href=/analytics/graphql-api/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>GraphQL Analytics API</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-expanded" style=min-height:0;transition-duration:400ms is-expanded><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Get started</span>
</button><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Authentication</span>
</button><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/authentication/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Authentication</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=3 style=--depth:3><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/authentication/api-token-auth/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Configure an Analytics API token</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/authentication/api-key-auth/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Authenticate with a Cloudflare API key</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/authentication/graphql-client-headers/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Configure GraphQL client endpoint and HTTP headers</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/querying-basics/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying basics</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/explore-graphql-schema/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Explore the GraphQL schema</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/compose-graphql-query/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Compose a query in GraphiQL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/getting-started/execute-graphql-query/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Execute a GraphQL query with curl</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Features</span>
</button><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Features</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/data-sets/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Datasets (tables)</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Discovery</span>
</button><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/discovery/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Discovery</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=3 style=--depth:3><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/discovery/introspection/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Introspection</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/discovery/settings/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Settings node</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/filtering/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Filtering</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/sorting/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Sorting</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/pagination/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Pagination</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/features/nested-structures/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Nested Structures</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/errors/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Error responses</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/limits/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Limits</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/sampling/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Sampling</span></a></li><li class=DocsSidebar--nav-item is-active-root is-expanded><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Tutorials</span>
</button><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Tutorials</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-expanded" style=min-height:0;transition-duration:400ms is-expanded><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/build-your-own-analytics/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Build your own Analytics dashboard</span></a></li><li class=DocsSidebar--nav-item is-active><a aria-current=page class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/use-graphql-create-widgets/ is-active><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Use GraphQL to create widgets</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/export-graphql-to-csv/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Export GraphQL data to CSV</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/querying-access-login-events/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying Access login events with GraphQL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/querying-firewall-events/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying Firewall Events with GraphQL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/end-customer-analytics/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying HTTP events by hostname with GraphQL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/querying-magic-firewall-samples/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying Magic Firewall Samples with GraphQL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/querying-magic-transit-tunnel-bandwidth-analytics/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying Magic Transit tunnel bandwidth analytics with GraphQL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/querying-magic-transit-tunnel-healthcheck-results/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying Magic Transit Tunnel Health Check Results with GraphQL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/tutorials/querying-workers-metrics/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Querying Workers Metrics with GraphQL</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Migration guides</span>
</button><a class=DocsSidebar--nav-link href=/analytics/graphql-api/migration-guides/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migration guides</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/migration-guides/graphql-api-analytics/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>HTTP Requests by Colo Groups to HTTP Requests by Adaptive Groups</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/migration-guides/zone-analytics/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Zone Analytics to GraphQL Analytics</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/migration-guides/zone-analytics-colos/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Zone Analytics Colos Endpoint to GraphQL Analytics</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Network Analytics v1 to Network Analytics v2</span>
</button><a class=DocsSidebar--nav-link href=/analytics/graphql-api/migration-guides/network-analytics-v2/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Network Analytics v1 to Network Analytics v2</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=3 style=--depth:3><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/migration-guides/network-analytics-v2/differences/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Main differences</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/migration-guides/network-analytics-v2/node-reference/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>NAv2 node reference</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/graphql-api/migration-guides/network-analytics-v2/schema-map/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>NAv1 to NAv2 schema map</span></a></li></ul></div></div></div></div></li></ul></div></div></div></div></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: FAQs</span>
</button><a class=DocsSidebar--nav-link href=/analytics/faq/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>FAQs</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/analytics/faq/web-analytics/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Web Analytics FAQ</span></a></li></ul></div></div></div></div></li></ul></div><div style=position:absolute;height:6px;display:none;right:2px;bottom:2px;left:2px;border-radius:3px><div style=position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)></div></div><div style=position:absolute;width:6px;display:none class="Scrollbars--track Scrollbars--track-vertical"><div style=position:relative;display:block;width:100% class="Scrollbars--thumb Scrollbars--thumb-vertical"></div></div></div><div class=toggleSidebar><button id=toggleSidebarButton style=width:2em;height:2em title="Click to collapse and expand the sidebar navigation"><svg id="toggleSidebarSVG" aria-hidden="true" height="1" width="1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path id="toggleSidebarSVGPath" d="M15 2a1 1 0 00-1 1v10a1 1 0 002 0V3a1 1 0 00-1-1zm-10.407.993-4.3 4.3a1 1 0 000 1.414l4.3 4.3a1 1 0 001.415-1.416L3.417 9H10a1 1 0 100-2H3.417l2.591-2.591A1 1 0 104.593 2.993z"/></svg></button></div></div><div class=DocsSidebar--shadow></div></div><div class=DocsToolbar><div class=DocsToolbar--search><div class=DocsSearch><div class=DocsSearch--input-wrapper><input type=text id=DocsSearch--input class=DocsSearch--input spellcheck=false autocomplete=false placeholder="Search docs..."><div class=DocsSearch--input-icon><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-9701125841014673" xmlns="http://www.w3.org/2000/svg"><title id="title-9701125841014673">Search icon (depiction of a magnifying glass)</title><path d="M11.999 10.585l3.458 3.458a1 1 0 01-1.414 1.414L10.585 12a6.5 6.5.0 111.414-1.414zM6.75 11.5a4.75 4.75.0 100-9.5 4.75 4.75.0 000 9.5z"/></svg></div><button disabled class=slashPlaceholder title="Press '/' to focus on the search bar" aria-label="Forward slash keyboard shortcut" tabindex=-1 type=button><div style=margin-top:-1px>/</span></div></button></div></div></div><div class=DocsToolbar--tools><button data-feedback=true class="DocsToolbar--feedback Button Button-is-docs-secondary">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17"><path d="M14 2.5H2l-.5.5v11.165l.863.345 2.852-3.01H14l.5-.5V3l-.5-.5zm-.5 8H4.785L2.5 12.911V3.5h11v7z" fill="currentcolor"/><path d="M12.5 5.003h-9v1h9v-1zm0 2.497h-9v1h9v-1z" fill="currentcolor"/></svg>Give Feedback</button><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--tools-icon-item><div class=Tooltip---root><div class=DocsToolbar--tools-icon-item-content><a class="Link Link-without-underline" href=https://github.com/cloudflare/cloudflare-docs><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-6991762763429039" xmlns="http://www.w3.org/2000/svg"><title id="title-6991762763429039">GitHub icon</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z" fill-rule="evenodd"/></svg></a></div><span class=Tooltip role=tooltip position=bottom-end>Visit Analytics on GitHub</span></div></div><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--theme-toggle><div class=Tooltip---root><div class=ThemeToggle><input type=checkbox id=ThemeToggle class=ThemeToggle--input>
<label class=ThemeToggle--toggle for=ThemeToggle><div class=ThemeToggle--toggle-handle></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--sun"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-8812071124069258" xmlns="http://www.w3.org/2000/svg"><title id="title-8812071124069258">Light theme icon (depiction of a sun)</title><path d="M7.5 11.465a3.482 3.482.0 01-1.596-.662L4.11 12.596a.5.5.0 01-.707-.707l1.793-1.793A3.482 3.482.0 014.535 8.5H2a.5.5.0 010-1h2.535a3.482 3.482.0 01.662-1.596L3.404 4.11a.5.5.0 01.707-.707l1.793 1.793A3.482 3.482.0 017.5 4.535V2a.5.5.0 011 0v2.535a3.482 3.482.0 011.596.662l1.793-1.793a.5.5.0 01.707.707l-1.793 1.793c.343.458.577 1.003.662 1.596H14a.5.5.0 110 1h-2.535a3.482 3.482.0 01-.662 1.596l1.793 1.793a.5.5.0 01-.707.707l-1.793-1.793a3.482 3.482.0 01-1.596.662V14a.5.5.0 11-1 0v-2.535z"/></svg></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--moon"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-5971296394189265" xmlns="http://www.w3.org/2000/svg"><title id="title-5971296394189265">Dark theme icon (depiction of a moon)</title><path d="M7.067 3.087a5 5 0 005.466 7.026A5 5 0 117.067 3.087z"/></svg></div></label><span class=Tooltip role=tooltip position=bottom-end>Set theme to dark (⇧+D)</span></div></div></div></div></div><main class=DocsBody><div class=DocsBody--sidebar with-styled-webkit-scrollbars><div class=DocsBody--sidebar-content-scroll-fade></div><div class=DocsBody--sidebar-content><ul class=DocsTableOfContents hidden><li><a class=DocsTableOfContents-link href=#docs-content>↑ Top</a></li></ul></nav></div></div><div id=docs-content data-reach-skip-nav-content></div><div class=DocsContent id=main page-type=document><article class=DocsMarkdown><h1 id=use-graphql-to-create-widgets>Use GraphQL to create widgets</h1><p>This article presents examples of queries you can use to populate your own dashboard.</p><ul><li><a href=#parameters-and-filters class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Parameters and filters</span></a></li><li><a href=#timeseries-graph class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Timeseries graph</span></a></li><li><a href=#activity-log class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Activity log</span></a></li><li><a href=#top-n-cards---source class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Top N cards - source</span></a></li><li><a href=#top-n-cards---destination class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Top N cards - destination</span></a></li><li><a href=#tcp-flags class=DocsMarkdown--link><span class=DocsMarkdown--link-content>TCP Flags</span></a></li><li><a href=#executive-summary class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Executive summary</span></a></li></ul><p>Use this workflow to build and test queries:</p><ul><li>Install and configure the <a href=https://www.electronjs.org/apps/graphiql class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>GraphiQL</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> app to authenticate to the Cloudflare Analytics GraphQL API. Cloudflare recommends token authentication. Refer to <a href=/analytics/graphql-api/getting-started/authentication/api-token-auth/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Configure an Analytics API token</span></a>, for more information.</li><li>Construct the queries in the GraphiQL. You can use the introspective documentation in the GraphQL client to explore the nodes available. For further information about queries, refer to <a href=/analytics/graphql-api/getting-started/querying-basics/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Querying basics</span></a>.</li><li>Test your queries by running them from GraphiQL or by passing them as the payload in a cURL request to the GraphQL API endpoint.</li><li>Use the queries in your application to provide data for your dashboard widgets.</li></ul><h2 id=parameters-and-filters><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#parameters-and-filters>&#8203;​</a></span>
<span>Parameters and filters</span></h2><p>These examples use the account ID for the Cloudflare account that you are querying. You can define this as a variable (<code>accountTag</code>) and reference it in your queries.</p><p>The queries also use a filter to specify the time interval that you want to query. The filter uses a start time and end time to define the time interval. You use different attributes to specify the start and end times, depending on the time period that you want to query. Refer to <a href=/analytics/graphql-api/features/filtering/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Filtering</span></a> for further information about filters.</p><p>The following example queries for data with dates greater than or equal to <code>date_geq</code> and less than or equal to <code>date_leq</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>---</span>
</span></span><span class=line><span class=cl><span class=err>header:</span> <span class=err>Account</span> <span class=err>and</span> <span class=err>query</span> <span class=err>time</span> <span class=err>interval</span> <span class=err>settings</span>
</span></span><span class=line><span class=cl><span class=err>---</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;accountTag&#34;</span><span class=p>:</span> <span class=s2>&#34;{account-id}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;filter&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;AND&#34;</span><span class=p>:[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nt>&#34;date_geq&#34;</span><span class=p>:</span> <span class=s2>&#34;2020-01-19&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nt>&#34;date_leq&#34;</span><span class=p>:</span> <span class=s2>&#34;2020-01-20&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This table lists Network Analytics datasets (nodes) and the <code>datetimeDimension</code> that you should use when querying data for a given time selection.</p><p>When you want an aggregated view of data, use the <code>Groups</code> query nodes. For example, the <code>ipFlows1mAttacksGroups</code> dataset represents minute-wise rollup reports of attack activity. For more detail, refer to <a href=/analytics/graphql-api/features/data-sets/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Datasets</span></a>.</p><div class=DocsMarkdown--table-wrap><div class=DocsMarkdown--table-wrap-inner><table><thead><tr><th><strong>Time Selection</strong></th><th><strong>Query node</strong></th><th><strong>datetimeDimension</strong></th></tr></thead><tbody><tr><td>Last week</td><td>ipFlows1dGroups</td><td>date</td></tr><tr><td>Last month</td><td>ipFlows1dGroups</td><td>date</td></tr><tr><td>24 hours</td><td>ipFlows1mGroups</td><td>datetimeFifteenMinutes</td></tr><tr><td>12 hours</td><td>ipFlows1mGroups</td><td>datetimeFifteenMinutes</td></tr><tr><td>6 hours</td><td>ipFlows1mGroups</td><td>datetimeFiveMinutes</td></tr><tr><td>30 mins</td><td>ipFlows1mGroups</td><td>datetimeMinute</td></tr><tr><td>Custom range</td><td>Dependent on range selected</td><td>Dependent on range selected</td></tr></tbody></table></div></div><p>The table below lists the start and end time attributes that are valid for query nodes representing different time ranges.</p><div class=DocsMarkdown--table-wrap><div class=DocsMarkdown--table-wrap-inner><table><thead><tr><th><strong>Query node</strong></th><th><strong>Start day / time filter</strong></th><th><strong>End day / time filter</strong></th></tr></thead><tbody><tr><td>ipFlows1mGroups</td><td>datetimeMinute_geq</td><td>datetimeMinute_leq</td></tr><tr><td>ipFlows1mAttacksGroups</td><td>date_geq</td><td>date_leq</td></tr><tr><td>ipFlows1hGroups</td><td>datetimeHour_geq</td><td>datetimeHour_leq</td></tr><tr><td>ipFlows1dGroups</td><td>date_geq</td><td>date_leq</td></tr></tbody></table></div></div><h2 id=timeseries-graph><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#timeseries-graph>&#8203;​</a></span>
<span>Timeseries graph</span></h2><p>Use the following query to build the timeseries graph in network analytics:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>header</span><span class=p>:</span><span class=w> </span><span class=nc>Timeseries</span><span class=w> </span><span class=py>graph</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>query</span><span class=w> </span><span class=nc>ipFlowTimeseries</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$accountTag</span><span class=p>:</span><span class=w> </span><span class=nc>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$filter</span><span class=p>:</span><span class=w> </span><span class=nc>AccountIpFlows1mGroupsFilter_InputObject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>viewer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>accounts</span><span class=p>(</span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nc>accountTag</span><span class=p>:</span><span class=w> </span><span class=nv>$accountTag</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=nc>datetimeMinute_ASC</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>timestamp</span><span class=p>:</span><span class=w> </span><span class=nc>datetimeMinute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackMitigationType</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackId</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>bits</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>packets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=activity-log><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#activity-log>&#8203;​</a></span>
<span>Activity log</span></h2><p>This query returns an activity log summarizing minute-wise rollups of attack traffic in IP flows. The query groups the data by the fields listed in the <code>dimensions</code> object.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>header</span><span class=p>:</span><span class=w> </span><span class=nc>Activity</span><span class=w> </span><span class=py>log</span><span class=w> </span><span class=kd>query</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nc>query</span><span class=w> </span><span class=py>ipFlowEventLog</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$accountTag</span><span class=p>:</span><span class=w> </span><span class=nc>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$filter</span><span class=p>:</span><span class=w> </span><span class=nc>AccountIpFlows1mAttacksGroupsFilter_InputObject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>viewer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>accounts</span><span class=p>(</span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nc>accountTag</span><span class=p>:</span><span class=w> </span><span class=nv>$accountTag</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>ipFlows1mAttacksGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>min_datetimeMinute_ASC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackId</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackDestinationIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackDestinationPort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackMitigationType</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackSourcePort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackType</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>avg</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>bitsPerSecond</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>packetsPerSecond</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>min</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>datetimeMinute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>bitsPerSecond</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>packetsPerSecond</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>max</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>datetimeMinute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>bitsPerSecond</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>packetsPerSecond</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>bits</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>packets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=top-n-cards---source><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#top-n-cards---source>&#8203;​</a></span>
<span>Top N cards - source</span></h2><p>This query returns data about the top source IPs.
The <code>limit</code> parameter controls the amount of records returned for each node. In the following code, the highlighted lines indicate where you configure <code>limit</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>header</span><span class=p>:</span><span class=w> </span><span class=nc>Top</span><span class=w> </span><span class=py>N</span><span class=w> </span><span class=py>Cards</span><span class=w> </span><span class=kd>query</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nc>highlight</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=mi>9</span><span class=p>,</span><span class=mi>22</span><span class=p>,</span><span class=mi>35</span><span class=p>,</span><span class=mi>47</span><span class=p>,</span><span class=mi>60</span><span class=p>,</span><span class=mi>72</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nc>query</span><span class=w> </span><span class=py>GetTopNBySource</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$accountTag</span><span class=p>:</span><span class=w> </span><span class=nc>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$filter</span><span class=p>:</span><span class=w> </span><span class=nc>AccountIpFlows1mGroupsFilter_InputObject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$portFilter</span><span class=p>:</span><span class=w> </span><span class=nc>AccountIpFlows1mGroupsFilter_InputObject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>viewer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>accounts</span><span class=p>(</span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nc>accountTag</span><span class=p>:</span><span class=w> </span><span class=nv>$accountTag</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>topNPorts</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$portFilter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>metric</span><span class=p>:</span><span class=w> </span><span class=nc>sourcePort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>ipProtocol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>topNASN</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>metric</span><span class=p>:</span><span class=w> </span><span class=nc>sourceIPAsn</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>description</span><span class=p>:</span><span class=w> </span><span class=nc>sourceIPASNDescription</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>topNIPs</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>metric</span><span class=p>:</span><span class=w> </span><span class=nc>sourceIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>topNColos</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>metric</span><span class=p>:</span><span class=w> </span><span class=nc>coloCity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>coloCode</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>topNCountries</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>metric</span><span class=p>:</span><span class=w> </span><span class=nc>coloCountry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>topNIPVersions</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>metric</span><span class=p>:</span><span class=w> </span><span class=nc>ipVersion</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=top-n-cards---destination><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#top-n-cards---destination>&#8203;​</a></span>
<span>Top N cards - destination</span></h2><p>This query returns data about the top destination IPs. The <code>limit</code> parameter controls the amount of records returned. In the following code, the highlighted lines indicate that the query returns the five highest results.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>header</span><span class=p>:</span><span class=w> </span><span class=nc>Top</span><span class=w> </span><span class=py>N</span><span class=w> </span><span class=py>Cards</span><span class=w> </span><span class=err>-</span><span class=w> </span><span class=py>Destination</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>highlight</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=mi>10</span><span class=p>,</span><span class=mi>22</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nc>query</span><span class=w> </span><span class=py>GetTopNByDestination</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$accountTag</span><span class=p>:</span><span class=w> </span><span class=nc>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$filter</span><span class=p>:</span><span class=w> </span><span class=nc>AccountIpFlows1mGroupsFilter_InputObject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$portFilter</span><span class=p>:</span><span class=w> </span><span class=nc>AccountIpFlows1mGroupsFilter_InputObject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>viewer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>accounts</span><span class=p>(</span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nc>accountTag</span><span class=p>:</span><span class=w> </span><span class=nv>$accountTag</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>topNIPs</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>limit</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>metric</span><span class=p>:</span><span class=w> </span><span class=nc>destinationIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>topNPorts</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$portFilter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>limit</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>metric</span><span class=p>:</span><span class=w> </span><span class=nc>destinationPort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>ipProtocol</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=tcp-flags><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#tcp-flags>&#8203;​</a></span>
<span>TCP Flags</span></h2><p>This query extracts the number of TCP packets from the minute-wise rollups of IP flows, and groups the results by TCP flag value. It uses <code>limit: 8</code> to display the top eight results, and presents them in descending order.</p><p>Add the following line to the filter to indicate that you want to view TCP data:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span> <span class=err>ipProtocol:</span> <span class=err>&#39;TCP&#39;</span> <span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>header</span><span class=p>:</span><span class=w> </span><span class=nc>TCP</span><span class=w> </span><span class=py>Flags</span><span class=w> </span><span class=kd>query</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nc>query</span><span class=w> </span><span class=py>GetTCPFlags</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$accountTag</span><span class=p>:</span><span class=w> </span><span class=nc>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nv>$filter</span><span class=p>:</span><span class=w> </span><span class=nc>AccountIpFlows1mGroupsFilter_InputObject</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>viewer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>accounts</span><span class=p>(</span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nc>accountTag</span><span class=p>:</span><span class=w> </span><span class=nv>$accountTag</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>tcpFlags</span><span class=p>:</span><span class=w> </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>limit</span><span class=p>:</span><span class=w> </span><span class=mi>8</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>orderBy</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=nc>sum_</span><span class=p>(</span><span class=py>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=py>_DESC</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>count</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=nc>bits</span><span class=err>/</span><span class=py>packets</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>tcpFlags</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=executive-summary><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#executive-summary>&#8203;​</a></span>
<span>Executive summary</span></h2><p>The executive summary query summarizes overall activity, therefore it only filters by the selected time interval, and ignores all filters applied to the analytics.
Use different queries, depending on the time interval you want to examine and what kind of traffic the account is seeing.</p><p>If the time interval is absolute, for example March 25th 09:00 to March 25th 17:00, then execute a query for attacks within those times. <a href=#parameters-and-filters class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Use the appropriate query node</span></a>, for example <code>ipFlows1dGroups</code>, for the time interval.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>header</span><span class=p>:</span><span class=w> </span><span class=nc>GetPreviousAttacks</span><span class=w> </span><span class=kd>query</span><span class=w> </span><span class=err>-</span><span class=w> </span><span class=nc>fetch</span><span class=w> </span><span class=py>previous</span><span class=w> </span><span class=py>attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>query</span><span class=w> </span><span class=nc>GetPreviousAttacks</span><span class=p>(</span><span class=nv>$accountTag</span><span class=p>:</span><span class=w> </span><span class=nc>string</span><span class=p>,</span><span class=w> </span><span class=nv>$filter</span><span class=p>:</span><span class=w> </span><span class=nc>filter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=py>viewer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>accounts</span><span class=p>(</span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nc>accountTag</span><span class=p>:</span><span class=w> </span><span class=nv>$accountTag</span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=err>$</span><span class=p>{</span><span class=nc>queryNode</span><span class=p>}(</span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span><span class=w> </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>attackId</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=py>sum</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>packets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>bits</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>If the time interval is relative to the current time, for example the last 24 hours or the last 30 minutes, then make a query to the <code>ipFlows1mGroup</code> node to check whether there were attacks in the past five minutes. Attacks within the past five minutes are classed as ongoing: the Activity Log displays <code>Present</code>.
The query response lists the <code>attackID</code> values of ongoing attacks.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>header</span><span class=p>:</span><span class=w> </span><span class=nc>GetOngoingAttackIds</span><span class=w> </span><span class=kd>query</span><span class=w> </span><span class=err>-</span><span class=w> </span><span class=nc>check</span><span class=w> </span><span class=py>for</span><span class=w> </span><span class=kd>on</span><span class=py>going</span><span class=w> </span><span class=py>attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>query</span><span class=w> </span><span class=nc>GetOngoingAttackIds</span><span class=p>(</span><span class=nv>$accountTag</span><span class=p>:</span><span class=w> </span><span class=nc>string</span><span class=p>,</span><span class=w> </span><span class=nv>$filter</span><span class=p>:</span><span class=w> </span><span class=nc>filter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>viewer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>accounts</span><span class=p>(</span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nc>accountTag</span><span class=p>:</span><span class=w> </span><span class=nv>$accountTag</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>ipFlows1mGroups</span><span class=p>(</span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span><span class=w> </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackId</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>If there are ongoing attacks, query the <code>ipFlows1mAttacksGroups</code> node, filtering with the <code>attackID</code> values from the previous query. The query below returns the maximum bit and packet rates.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-graphql data-lang=graphql><span class=line><span class=cl><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=py>header</span><span class=p>:</span><span class=w> </span><span class=nc>GetOngoingAttacks</span><span class=w> </span><span class=kd>query</span><span class=w> </span><span class=err>-</span><span class=w> </span><span class=nc>fetch</span><span class=w> </span><span class=py>data</span><span class=w> </span><span class=py>for</span><span class=w> </span><span class=kd>on</span><span class=py>going</span><span class=w> </span><span class=py>attacks</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>query</span><span class=w> </span><span class=nc>GetOngoingAttacks</span><span class=p>(</span><span class=nv>$accountTag</span><span class=p>:</span><span class=w> </span><span class=nc>string</span><span class=p>,</span><span class=w> </span><span class=nv>$filter</span><span class=p>:</span><span class=w> </span><span class=nc>filter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=py>viewer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=py>accounts</span><span class=p>(</span><span class=py>filter</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nc>accountTag</span><span class=p>:</span><span class=w> </span><span class=nv>$accountTag</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nc>ipFlows1mAttacksGroups</span><span class=p>(</span><span class=py>limit</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span><span class=w> </span><span class=nc>filter</span><span class=p>:</span><span class=w> </span><span class=nv>$filter</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nc>dimensions</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>attackId</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=py>max</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>bitsPerSecond</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=py>packetsPerSecond</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>If there are no ongoing attacks, use the <code>GetPreviousAttacks</code> query to display data for attacks within an absolute time interval.</p></article></div></main><footer class=DocsFooter><div class=DocsFooter--content><div class=DocsFooterResources><span class=DocsFooter--content-additional-wrapper><a href=https://dash.cloudflare.com class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Cloudflare Dashboard</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://community.cloudflare.com class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Community</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://www.cloudflare.com/learning/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Learning Center</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href="https://dash.cloudflare.com/?to=/:account/support" class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Support Portal</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span></div><div><span class=DocsFooter--edit-on-gh-link-wrapper><a href=https://github.com/panthere2k/panthere2k.github.io/blob/content/content/analytics/graphql-api/tutorials/use-graphql-create-widgets/index.md class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Edit on GitHub</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-time>Updated <time class=relative datetime=2023-01-02T09:58:19+09:00 title=2023-01-02>January 2, 2023</time></span></div></div></footer></div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKQFGQB" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-PKQFGQB")</script><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style></noscript><script defer src=https://unpkg.com/littlefoot/dist/littlefoot.js type=application/javascript></script>
<script type=application/javascript>document.addEventListener("DOMContentLoaded",()=>littlefoot.default())</script></body></html>
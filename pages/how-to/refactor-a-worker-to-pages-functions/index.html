<!doctype html><html lang=en theme=light is-docs-page js-focus-visible-polyfill-available><head><meta charset=utf-8><title>Refactor a Worker to a Pages Function · Cloudflare Pages docs</title><meta http-equiv=cleartype content="on"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=application-name content="Refactor a Worker to a Pages Function · Cloudflare Pages docs"><meta name=msapplication-tap-highlight content="no"><meta name=apple-mobile-web-app-title content="Refactor a Worker to a Pages Function · Cloudflare Pages docs"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-capable content="yes"><meta name=mobile-web-app-capable content="yes"><meta name=theme-color content="#f38020"><meta name=description content="Documentation for Cloudflare Pages, the best way to deploy your static and JAMstack sites"><meta property="og:image" content="https://panthere2k.github.io/dev-products-preview.png"><meta property="og:title" content="Refactor a Worker to a Pages Function · Cloudflare Pages docs"><meta property="og:description" content="Documentation for Cloudflare Pages, the best way to deploy your static and JAMstack sites"><meta property="og:type" content="website"><meta name=twitter:title content="Refactor a Worker to a Pages Function · Cloudflare Pages docs"><meta name=twitter:image content="https://panthere2k.github.io/dev-products-preview.png"><meta name=twitter:description content="Documentation for Cloudflare Pages, the best way to deploy your static and JAMstack sites"><meta name=twitter:creator content="@cloudflare"><meta name=twitter:card content="summary_large_image"><meta name=pcx_content_type content="how-to"><link rel=icon href=/favicon-32x32.png><link rel=canonical href=https://panthere2k.github.io/pages/how-to/refactor-a-worker-to-pages-functions/><link rel=sitemap href=/sitemap.xml type=application/xml><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon sizes=48x48 href=/icons/icon-48x48.png><link rel=apple-touch-icon sizes=72x72 href=/icons/icon-72x72.png><link rel=apple-touch-icon sizes=96x96 href=/icons/icon-96x96.png><link rel=apple-touch-icon sizes=144x144 href=/icons/icon-144x144.png><link rel=apple-touch-icon sizes=192x192 href=/icons/icon-192x192.png><link rel=apple-touch-icon sizes=256x256 href=/icons/icon-256x256.png><link rel=apple-touch-icon sizes=384x384 href=/icons/icon-384x384.png><link rel=apple-touch-icon sizes=512x512 href=/icons/icon-512x512.png><script src=/search.redirect.min.6828ce878577fe91120d67814d68c0d8.js defer></script><link rel="stylesheet preconnect" href=/style.css><script>(function(){let s=!1,e,n;document.readyState!=="loading"?o():addEventListener("DOMContentLoaded",o),e=document.querySelector("#ThemeToggle"),s=!e;function t(n){try{let o=n?"dark":"light";document.documentElement.setAttribute("theme",o),localStorage.theme=JSON.stringify({theme:o}),e?(e.checked=n,s=!1):s&&setTimeout(t,1,n)}catch{}}function o(){e=e||document.querySelector("#ThemeToggle"),e.addEventListener("change",()=>t(!!e.checked)),addEventListener("keydown",n=>{n.target===document.body&&n.which===68&&n.shiftKey&&(n.preventDefault(),t(!e.checked))})}try{n=window.matchMedia("(prefers-color-scheme:dark)"),n.onchange=e=>t(e.matches)}catch{}try{let e=localStorage.theme,s=e&&JSON.parse(e);t(s?/dark/.test(s.theme):!!(n&&n.matches))}catch{}})()</script><script src=/main.min.c2a5e976c412695a3d9389cba84aa5bd.js defer></script>
<script data-source=docs defer src=https://feedback.developers.cloudflare.com/sdk.js></script>
<link rel=preload href=https://feedback.developers.cloudflare.com/sdk.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://feedback.developers.cloudflare.com/sdk.css></noscript></head><body><div class=DocsPage><div><a class=skip-link href=#main>Skip to content</a></div><div class=DocsMobileHeader><a class="DocsMobileHeader--cloudflare-logo-link Link Link-without-underline" href=/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsMobileTitleHeader><a aria-current=page class="DocsMobileTitleHeader--logo-link Link Link-without-underline" href=/pages/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><span title="Cloudflare Pages logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="m21.375 7.5-1.95 3H9v27h8.7l-.525 3H7.5L6 39V9l1.5-1.5h13.875zm9.45.0H40.5L42 9v30l-1.5 1.5H26.625l1.95-3H39v-27h-8.7l.525-3z"/><path d="M21.45 28.5h-8.7l-1.275-2.325 15.6-24 2.7 1.125-3.225 16.2h8.7l1.275 2.325-15.6 24-2.7-1.125 3.225-16.2zM11.175 13.725a1.05 1.05.0 100-2.1 1.05 1.05.0 000 2.1zm2.775.0a1.05 1.05.0 100-2.1 1.05 1.05.0 000 2.1zm2.775.0a1.05 1.05.0 100-2.1 1.05 1.05.0 000 2.1z"/></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:5>Pages</span></span></div></a><button class="Button DocsMobileTitleHeader--sidebar-toggle-button">
<span class=DocsMobileTitleHeader--sidebar-toggle-button-icon aria-hidden=true><svg viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" role="img" aria-labelledby="title-1332672649688018" xmlns="http://www.w3.org/2000/svg"><title id="title-1332672649688018">Navigation menu icon</title><path data-index="1" d="M5 7h10" transform-origin="10 7"/><path data-index="2" d="M5 10h10" transform-origin="10 10"/><path data-index="3" d="M5 13h10" transform-origin="10 13"/></svg><span is-visually-hidden>Open external link</span></span></button></div><div class=DocsMobileNavBackdrop></div><div class=DocsSidebar><div class=DocsSidebar--sections><div class="DocsSidebar--section DocsSidebar--header-section"><a class="DocsSidebar--cloudflare-logo-link DocsSidebar--link" href=/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsSidebar--section-separator></div><div class="DocsSidebar--section DocsSidebar--docs-title-section"><a aria-current=page class="DocsSidebar--docs-title-logo-link DocsSidebar--link" href=/pages/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><span title="Cloudflare Pages logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="m21.375 7.5-1.95 3H9v27h8.7l-.525 3H7.5L6 39V9l1.5-1.5h13.875zm9.45.0H40.5L42 9v30l-1.5 1.5H26.625l1.95-3H39v-27h-8.7l.525-3z"/><path d="M21.45 28.5h-8.7l-1.275-2.325 15.6-24 2.7 1.125-3.225 16.2h8.7l1.275 2.325-15.6 24-2.7-1.125 3.225-16.2zM11.175 13.725a1.05 1.05.0 100-2.1 1.05 1.05.0 000 2.1zm2.775.0a1.05 1.05.0 100-2.1 1.05 1.05.0 000 2.1zm2.775.0a1.05 1.05.0 100-2.1 1.05 1.05.0 000 2.1z"/></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:5>Pages</span></span></div></a><div class="DocsSidebar--section-more Dropdown" data-expanded=false><button class="DocsSidebar--section-more-button Button" aria-expanded=false><div class=DocsSidebar--section-more-button-icon><svg viewBox="0 0 4 16" stroke="currentcolor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" fill="currentcolor" role="img" aria-labelledby="title-6032186738345315" xmlns="http://www.w3.org/2000/svg"><title id="title-6032186738345315">Dropdown icon</title><path d="M2 2v0m0 6v0m0 6v0z"/></svg><span is-visually-hidden>Pages menu</span></div></button><div class="DocsSidebar--section-more-dropdown Dropdown--dropdown"><ul class=Dropdown--list><li class=Dropdown--item><a class=Dropdown--link href=https://pages.cloudflare.com tabindex=-1>Pages home</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://blog.cloudflare.com/cloudflare-pages tabindex=-1>Announcement blog post</a></li><li class=Dropdown--item><a class=Dropdown--link href="https://www.youtube.com/watch?v=IeHC4NwkEfc" tabindex=-1>First look at Cloudflare Pages (video)</a></li></ul></div></div></div><div class="DocsSidebar--section DocsSidebar--nav-section" style=position:relative;overflow:hidden;width:100%;height:100%><div style=position:absolute;inset:0;overflow-y:auto;margin-right:0;margin-bottom:0><div class=DocsSidebar--nav-section-shadow style=opacity:0></div><ul class=DocsSidebar--nav><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Overview</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/get-started/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Framework guides</span>
</button><a class=DocsSidebar--nav-link href=/pages/framework-guides/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Framework guides</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-blazor-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Blazor Site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-brunch-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Brunch site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-docusaurus-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Docusaurus site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-gatsby-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Gatsby site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-gridsome-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Gridsome site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-hexo-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Hexo site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-honojs-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Honojs site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-hugo-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Hugo site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-jekyll-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Jekyll site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-nextjs-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Next.js site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/nuxt/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Nuxt.js site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-pelican-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Pelican site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-preact-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Preact site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-qwik-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Qwik site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-react-application/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a React application</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/remix/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Remix site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-sphinx-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Sphinx site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-svelte-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Svelte site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-vite3-project/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Vite 3 project</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-vue-application/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Vue application</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-vuepress-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Vuepress site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-a-zola-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a Zola site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-an-angular-application/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy an Angular application</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/astro/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy an Astro site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/elderjs/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy an Elder.js site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-an-eleventy-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy an Eleventy site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-an-emberjs-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy an Ember site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-an-mkdocs-site/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy an Mkdocs site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/framework-guides/deploy-anything/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploying your site</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item is-active-root is-expanded><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: How to</span>
</button><a class=DocsSidebar--nav-link href=/pages/how-to/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>How to</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-expanded" style=min-height:0;transition-duration:400ms is-expanded><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/custom-branch-aliases/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Add a custom domain to a branch</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/add-custom-http-headers/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Add custom HTTP headers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/deploy-a-wordpress-site/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy a static WordPress site</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/use-bulk-redirects/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Handle redirects with Bulk Redirects</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/npm-private-registry/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Install private packages</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/preview-with-cloudflare-tunnel/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Preview Local Projects with Cloudflare Tunnel</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/www-redirect/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Redirecting www to domain apex</span></a></li><li class=DocsSidebar--nav-item is-active><a aria-current=page class=DocsSidebar--nav-link href=/pages/how-to/refactor-a-worker-to-pages-functions/ is-active><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Refactor a Worker to a Pages Function</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/build-commands-branches/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Set build commands per branch</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/use-direct-upload-with-continuous-integration/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Use Direct Upload with continuous integration</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/how-to/use-worker-for-ab-testing-in-pages/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Use Pages Functions for A/B testing</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Tutorials</span>
</button><a class=DocsSidebar--nav-link href=/pages/tutorials/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Tutorials</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/tutorials/add-a-react-form-with-formspree/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Add a React form with Formspree</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/tutorials/add-an-html-form-with-formspree/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Add an HTML form with Formspree</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/tutorials/build-a-blog-using-nuxt-and-sanity/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Build a blog using Nuxt.js and Sanity.io on Cloudflare Pages</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/tutorials/build-an-api-with-workers/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Build an API for your front end using Cloudflare Workers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/tutorials/forms/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Create an HTML form</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Migration guides</span>
</button><a class=DocsSidebar--nav-link href=/pages/migrations/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migration guides</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/migrations/migrating-jekyll-from-github-pages/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migrating a Jekyll-based site from GitHub Pages</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/migrations/migrating-from-firebase/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migrating from Firebase</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/migrations/migrating-from-netlify/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migrating from Netlify to Pages</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/migrations/migrating-from-vercel/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migrating from Vercel to Pages</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/migrations/migrating-from-workers/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Migrating from Workers Sites to Pages</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Platform</span>
</button><a class=DocsSidebar--nav-link href=/pages/platform/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Platform</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/branch-build-controls/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Branch build controls</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/build-configuration/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Build configuration</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/custom-domains/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Custom domains</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/debugging-pages/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Debugging Pages</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/deploy-hooks/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Deploy Hooks</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/direct-upload/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Direct Uploads</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/early-hints/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Early Hints</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Functions</span>
</button><a class=DocsSidebar--nav-link href=/pages/platform/functions/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Functions</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=2 style=--depth:2><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/get-started/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/routing/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Routing</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/api-reference/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>API Reference</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Examples</span>
</button><a class=DocsSidebar--nav-link href=/pages/platform/functions/examples/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Examples</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=3 style=--depth:3><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/examples/ab-testing/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>A/B testing with middleware</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/examples/cors-headers/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Adding CORS headers</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/middleware/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Middleware</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/local-development/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Local Development</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/bindings/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Bindings</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/typescript/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>TypeScript</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/advanced-mode/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Advanced Mode</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button" tabindex=-1>
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Pages Plugins</span>
</button><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/ tabindex=-1>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Pages Plugins</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=3 style=--depth:3><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/cloudflare-access/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cloudflare Access</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/google-chat/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Google Chat</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/graphql/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>GraphQL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/hcaptcha/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>hCaptcha</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/honeycomb/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Honeycomb</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/mailchannels/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>MailChannels</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/sentry/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Sentry</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/static-forms/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Static Forms</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/stytch/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Stytch</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/plugins/community-plugins/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Community Plugins</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/metrics/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Metrics</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/debugging-and-logging/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Debugging and logging</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/functions/pricing/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Pricing</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/git-integration/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Git integration</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/headers/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Headers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/known-issues/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Known issues</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/limits/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Limits</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/preview-deployments/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Preview deployments</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/redirects/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Redirects</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/api/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>REST API</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/rollbacks/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Rollbacks</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/pages/platform/serving-pages/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Serving Pages</span></a></li></ul></div></div></div></div></li></ul></div><div style=position:absolute;height:6px;display:none;right:2px;bottom:2px;left:2px;border-radius:3px><div style=position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)></div></div><div style=position:absolute;width:6px;display:none class="Scrollbars--track Scrollbars--track-vertical"><div style=position:relative;display:block;width:100% class="Scrollbars--thumb Scrollbars--thumb-vertical"></div></div></div><div class=toggleSidebar><button id=toggleSidebarButton style=width:2em;height:2em title="Click to collapse and expand the sidebar navigation"><svg id="toggleSidebarSVG" aria-hidden="true" height="1" width="1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path id="toggleSidebarSVGPath" d="M15 2a1 1 0 00-1 1v10a1 1 0 002 0V3a1 1 0 00-1-1zm-10.407.993-4.3 4.3a1 1 0 000 1.414l4.3 4.3a1 1 0 001.415-1.416L3.417 9H10a1 1 0 100-2H3.417l2.591-2.591A1 1 0 104.593 2.993z"/></svg></button></div></div><div class=DocsSidebar--shadow></div></div><div class=DocsToolbar><div class=DocsToolbar--search><div class=DocsSearch><div class=DocsSearch--input-wrapper><input type=text id=DocsSearch--input class=DocsSearch--input spellcheck=false autocomplete=false placeholder="Search docs..."><div class=DocsSearch--input-icon><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-9701125841014673" xmlns="http://www.w3.org/2000/svg"><title id="title-9701125841014673">Search icon (depiction of a magnifying glass)</title><path d="M11.999 10.585l3.458 3.458a1 1 0 01-1.414 1.414L10.585 12a6.5 6.5.0 111.414-1.414zM6.75 11.5a4.75 4.75.0 100-9.5 4.75 4.75.0 000 9.5z"/></svg></div><button disabled class=slashPlaceholder title="Press '/' to focus on the search bar" aria-label="Forward slash keyboard shortcut" tabindex=-1 type=button><div style=margin-top:-1px>/</span></div></button></div></div></div><div class=DocsToolbar--tools><button data-feedback=true class="DocsToolbar--feedback Button Button-is-docs-secondary">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17"><path d="M14 2.5H2l-.5.5v11.165l.863.345 2.852-3.01H14l.5-.5V3l-.5-.5zm-.5 8H4.785L2.5 12.911V3.5h11v7z" fill="currentcolor"/><path d="M12.5 5.003h-9v1h9v-1zm0 2.497h-9v1h9v-1z" fill="currentcolor"/></svg>Give Feedback</button><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--tools-icon-item><div class=Tooltip---root><div class=DocsToolbar--tools-icon-item-content><a class="Link Link-without-underline" href=https://github.com/cloudflare/cloudflare-docs><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-6991762763429039" xmlns="http://www.w3.org/2000/svg"><title id="title-6991762763429039">GitHub icon</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z" fill-rule="evenodd"/></svg></a></div><span class=Tooltip role=tooltip position=bottom-end>Visit Pages on GitHub</span></div></div><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--theme-toggle><div class=Tooltip---root><div class=ThemeToggle><input type=checkbox id=ThemeToggle class=ThemeToggle--input>
<label class=ThemeToggle--toggle for=ThemeToggle><div class=ThemeToggle--toggle-handle></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--sun"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-8812071124069258" xmlns="http://www.w3.org/2000/svg"><title id="title-8812071124069258">Light theme icon (depiction of a sun)</title><path d="M7.5 11.465a3.482 3.482.0 01-1.596-.662L4.11 12.596a.5.5.0 01-.707-.707l1.793-1.793A3.482 3.482.0 014.535 8.5H2a.5.5.0 010-1h2.535a3.482 3.482.0 01.662-1.596L3.404 4.11a.5.5.0 01.707-.707l1.793 1.793A3.482 3.482.0 017.5 4.535V2a.5.5.0 011 0v2.535a3.482 3.482.0 011.596.662l1.793-1.793a.5.5.0 01.707.707l-1.793 1.793c.343.458.577 1.003.662 1.596H14a.5.5.0 110 1h-2.535a3.482 3.482.0 01-.662 1.596l1.793 1.793a.5.5.0 01-.707.707l-1.793-1.793a3.482 3.482.0 01-1.596.662V14a.5.5.0 11-1 0v-2.535z"/></svg></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--moon"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-5971296394189265" xmlns="http://www.w3.org/2000/svg"><title id="title-5971296394189265">Dark theme icon (depiction of a moon)</title><path d="M7.067 3.087a5 5 0 005.466 7.026A5 5 0 117.067 3.087z"/></svg></div></label><span class=Tooltip role=tooltip position=bottom-end>Set theme to dark (⇧+D)</span></div></div></div></div></div><main class=DocsBody><div class=DocsBody--sidebar with-styled-webkit-scrollbars><div class=DocsBody--sidebar-content-scroll-fade></div><div class=DocsBody--sidebar-content><ul class=DocsTableOfContents hidden><li><a class=DocsTableOfContents-link href=#docs-content>↑ Top</a></li></ul></nav></div></div><div id=docs-content data-reach-skip-nav-content></div><div class=DocsContent id=main page-type=document><article class=DocsMarkdown><h1 id=refactor-a-worker-to-a-pages-function>Refactor a Worker to a Pages Function</h1><p>In this guide, you will learn how to refactor a Worker made to intake form submissions to a Pages Function that can be hosted on your Cloudflare Pages application. <a href=/pages/platform/functions/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Pages Functions</span></a> is a serverless function that lives within the same project directory as your application and is deployed with Cloudflare Pages. It enables you to run server-side code that adds dynamic functionality without running a dedicated server. You may want to refactor a Worker to a Pages Function for one of these reasons:</p><ol><li>If you manage a serverless function that your Pages application depends on and wish to ship the logic without managing a Worker as a separate service.</li><li>If you are migrating your Worker to Pages Functions and want to use the routing and middleware capabilities of Pages Functions.</li></ol><aside class=DocsMarkdown--aside role=note data-type=note><p>You can import your Worker to a Pages project without using Functions by creating a <code>_worker.js</code> file in the output directory of your Pages project. This <a href=/pages/platform/functions/#advanced-mode class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Advanced mode</span></a> requires writing your Worker with <a href=/workers/learning/migrating-to-module-workers/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Module syntax</span></a>.</p><p>However, when using the <code>_worker.js</code> file in Pages, the entire <code>/functions</code> directory is ignored – including its routing and middleware characteristics.</p></aside><h2 id=general-refactoring-steps><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#general-refactoring-steps>&#8203;​</a></span>
<span>General refactoring steps</span></h2><ol><li>Remove the <code>addEventListener()</code> method and its event response and replace it with the appropriate <code>OnRequest</code> method. Refer to <a href=/pages/platform/functions/#writing-your-first-function class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Functions</span></a> to select the appropriate method for your Function.</li><li>Pass the <code>context</code> object as an argument to your new <code>OnRequest</code> method to access the properties of the context parameter: <code>request</code>,<code>env</code>,<code>params</code> and <code>next</code>.</li><li>Use middleware to handle logic that must be executed before or after route handlers. Learn more about <a href=/pages/platform/functions/#adding-middleware class=DocsMarkdown--link><span class=DocsMarkdown--link-content>using Middleware</span></a> in the Functions documentation.</li></ol><h2 id=background><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#background>&#8203;​</a></span>
<span>Background</span></h2><p>To explain the process of refactoring, this guide uses a simple form submission example.</p><p>Form submissions can be handled by Workers but can also be a good use case for Pages Functions, since forms are most times specific to a particular application.</p><p>Assuming you are already using a Worker to handle your form, you would have deployed this Worker and then added the URL to your form action attribute in your HTML form. This means that when you change how the Worker handles your submissions, you must make changes to the Worker script. If the logic in your Worker is used by more than one application, Pages Functions would not be a good use case.</p><p>However, it can be beneficial to use a <a href=/pages/platform/functions/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Pages Function</span></a> when you would like to organize your function logic in the same project directory as your application.</p><p>Building your application using Pages Functions can help you manage your client and serverless logic from the same place and make it easier to write and debug your code.</p><h2 id=handle-form-entries-with-airtable-and-workers><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#handle-form-entries-with-airtable-and-workers>&#8203;​</a></span>
<span>Handle form entries with Airtable and Workers</span></h2><p>An <a href=https://airtable.com/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Airtable</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> is a low-code platform for building collaborative applications. It helps customize your workflow, collaborate, and handle form submissions. For this example, you will utilize Airtable&rsquo;s form submission feature.</p><p><a href=https://airtable.com/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Airtable</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> can be used to store entries of information in different tables for the same account. When creating a Worker for handling the submission logic, the first step is to use <a href=/workers/wrangler/install-and-update/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Wrangler</span></a> to initialize a new Worker within a specific folder or at the root of your application.</p><p>This step creates the boilerplate to write your Airtable submission Worker. After writing your Worker, you can deploy it to Cloudflare&rsquo;s edge network after you <a href=/workers/get-started/guide/#7-configure-your-project-for-deployment class=DocsMarkdown--link><span class=DocsMarkdown--link-content>configure your project for deployment</span></a>. Refer to the Workers documentation for a full tutorial on how to <a href=/workers/tutorials/handle-form-submissions-with-airtable/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>handle form submission with Workers</span></a>.</p><p>The following code block shows an example of a Worker that handles Airtable form submission.</p><p>Every Worker will have the default response to a <code>fetch</code> action with a <code>request</code> handler. The <code>submitHandler</code> async function is called if the pathname of the work is <code>/submit</code>. This function checks that the request method is a <code>POST</code> request and then proceeds to parse and post the form entries to Airtable using your credentials, which you can store using <a href=/workers/wrangler/commands/#secret class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Wrangler <code>secret</code></span></a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>---</span>
</span></span><span class=line><span class=cl><span class=nx>filename</span><span class=o>:</span> <span class=nx>worker</span><span class=o>/</span><span class=nx>index</span><span class=p>.</span><span class=nx>js</span>
</span></span><span class=line><span class=cl><span class=o>---</span>
</span></span><span class=line><span class=cl><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;fetch&#34;</span><span class=p>,</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>event</span><span class=p>.</span><span class=nx>respondWith</span><span class=p>(</span><span class=nx>handleRequest</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>request</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>handleRequest</span><span class=p>(</span><span class=nx>request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>url</span><span class=p>.</span><span class=nx>pathname</span> <span class=o>===</span> <span class=s2>&#34;/submit&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>submitHandler</span><span class=p>(</span><span class=nx>request</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>submitHandler</span><span class=p>(</span><span class=nx>request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>method</span> <span class=o>!==</span> <span class=s2>&#34;POST&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nx>Response</span><span class=p>(</span><span class=s2>&#34;Method not allowed&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>status</span><span class=o>:</span> <span class=mi>405</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>request</span><span class=p>.</span><span class=nx>formData</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>first_name</span><span class=p>,</span> <span class=nx>last_name</span><span class=p>,</span> <span class=nx>email</span><span class=p>,</span> <span class=nx>phone</span><span class=p>,</span> <span class=nx>subject</span><span class=p>,</span> <span class=nx>message</span> <span class=p>}</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=nb>Object</span><span class=p>.</span><span class=nx>fromEntries</span><span class=p>(</span><span class=nx>body</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>reqBody</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;First Name&#34;</span><span class=o>:</span> <span class=nx>first_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Last Name&#34;</span><span class=o>:</span> <span class=nx>last_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>Email</span><span class=o>:</span> <span class=nx>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Phone number&#34;</span><span class=o>:</span> <span class=nx>phone</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>Subject</span><span class=o>:</span> <span class=nx>subject</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>Message</span><span class=o>:</span> <span class=nx>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>HandleAirtableData</span><span class=p>(</span><span class=nx>reqBody</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>HandleAirtableData</span> <span class=o>=</span> <span class=p>(</span><span class=nx>body</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>fetch</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=sb>`https://api.airtable.com/v0/</span><span class=si>${</span><span class=nx>AIRTABLE_BASE_ID</span><span class=si>}</span><span class=sb>/</span><span class=si>${</span><span class=nb>encodeURIComponent</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>AIRTABLE_TABLE_NAME</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>method</span><span class=o>:</span> <span class=s2>&#34;POST&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>body</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Authorization</span><span class=o>:</span> <span class=sb>`Bearer </span><span class=si>${</span><span class=nx>AIRTABLE_API_KEY</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Content-type&#34;</span><span class=o>:</span> <span class=sb>`application/json`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><h3 id=refactor-your-worker><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#refactor-your-worker>&#8203;​</a></span>
<span>Refactor your Worker</span></h3><p>To refactor the above Worker, go to your Pages project directory and create a <code>/functions</code> folder. In <code>/functions</code>, create a <code>form.js</code> file. This file will handle form submissions.</p><p>Then, in the <code>form.js</code> file, export a single <code>onRequestPost</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>---</span>
</span></span><span class=line><span class=cl><span class=nx>filename</span><span class=o>:</span> <span class=nx>functions</span><span class=o>/</span><span class=nx>form</span><span class=p>.</span><span class=nx>js</span>
</span></span><span class=line><span class=cl><span class=o>---</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>async</span> <span class=kd>function</span> <span class=nx>onRequestPost</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>env</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kr>await</span> <span class=nx>submitHandler</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>env</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Every Worker has an <code>addEventListener</code> to listen for <code>fetch</code> events, but you will not need this in a Pages Function. Instead, you will <code>export</code> a single <code>onRequest</code> function, and depending on the HTTPS request it handles, you will name it accordingly. Refer to <a href=/pages/platform/functions/#writing-your-first-function class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Function documentation</span></a> to select the appropriate method for your function.</p><p>The above code takes a <code>request</code> and <code>env</code> as arguments which pass these properties down to the <code>submitHandler</code> function, which remains unchanged from the <a href=#handle-form-entries-with-airtable-and-workers class=DocsMarkdown--link><span class=DocsMarkdown--link-content>original Worker</span></a>. However, because Functions allow you to specify the HTTPS request type, you can remove the <code>request.method</code> check in your Worker. This is now handled by Pages Functions by naming the <code>onRequest</code> handler.</p><p>Now, you will introduce the <code>submitHandler</code> function and pass the <code>env</code> parameter as a property. This will allow you to access <code>env</code> in the <code>HandleAirtableData</code> function below. This function does a <code>POST</code> request to Airtable using your Airtable credentials:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>---</span>
</span></span><span class=line><span class=cl><span class=nx>filename</span><span class=o>:</span> <span class=nx>functions</span><span class=o>/</span><span class=nx>form</span><span class=p>.</span><span class=nx>js</span>
</span></span><span class=line><span class=cl><span class=nx>highlight</span><span class=o>:</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>,</span><span class=mi>16</span><span class=p>,</span><span class=mi>17</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>19</span><span class=p>,</span><span class=mi>20</span><span class=p>,</span><span class=mi>21</span><span class=p>,</span><span class=mi>22</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=o>---</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>async</span> <span class=kd>function</span> <span class=nx>onRequestPost</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>env</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kr>await</span> <span class=nx>submitHandler</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>env</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>submitHandler</span><span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>env</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>body</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>request</span><span class=p>.</span><span class=nx>formData</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>first_name</span><span class=p>,</span> <span class=nx>last_name</span><span class=p>,</span> <span class=nx>email</span><span class=p>,</span> <span class=nx>phone</span><span class=p>,</span> <span class=nx>subject</span><span class=p>,</span> <span class=nx>message</span> <span class=p>}</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=nb>Object</span><span class=p>.</span><span class=nx>fromEntries</span><span class=p>(</span><span class=nx>body</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>reqBody</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;First Name&#34;</span><span class=o>:</span> <span class=nx>first_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Last Name&#34;</span><span class=o>:</span> <span class=nx>last_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>Email</span><span class=o>:</span> <span class=nx>email</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Phone number&#34;</span><span class=o>:</span> <span class=nx>phone</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>Subject</span><span class=o>:</span> <span class=nx>subject</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>Message</span><span class=o>:</span> <span class=nx>message</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>HandleAirtableData</span><span class=p>({</span> <span class=nx>body</span><span class=o>:</span> <span class=nx>reqBody</span><span class=p>,</span> <span class=nx>env</span><span class=o>:</span> <span class=nx>env</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Finally, create a <code>HandleAirtableData</code> function. This function will send a <code>fetch</code> request to Airtable with your Airtable credentials and the body of your request:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>---</span>
</span></span><span class=line><span class=cl><span class=nx>filename</span><span class=o>:</span> <span class=nx>functions</span><span class=o>/</span><span class=nx>form</span><span class=p>.</span><span class=nx>js</span>
</span></span><span class=line><span class=cl><span class=o>---</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ..
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>HandleAirtableData</span> <span class=o>=</span> <span class=kr>async</span> <span class=kd>function</span> <span class=nx>onRequest</span><span class=p>({</span> <span class=nx>body</span><span class=p>,</span> <span class=nx>env</span> <span class=p>})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>fetch</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=sb>`https://api.airtable.com/v0/</span><span class=si>${</span><span class=nx>env</span><span class=p>.</span><span class=nx>AIRTABLE_BASE_ID</span><span class=si>}</span><span class=sb>/</span><span class=si>${</span><span class=nb>encodeURIComponent</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>env</span><span class=p>.</span><span class=nx>AIRTABLE_TABLE_NAME</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>method</span><span class=o>:</span> <span class=s2>&#34;POST&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>body</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Authorization</span><span class=o>:</span> <span class=sb>`Bearer </span><span class=si>${</span><span class=nx>env</span><span class=p>.</span><span class=nx>AIRTABLE_API_KEY</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Content-type&#34;</span><span class=o>:</span> <span class=sb>`application/json`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>You can test your Function <a href=/pages/platform/functions/#develop-and-preview-locally class=DocsMarkdown--link><span class=DocsMarkdown--link-content>locally using Wrangler</span></a>. By completing this guide, you have successfully refactored your form submission Worker to a form submission Pages Function.</p><h2 id=related-resources><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#related-resources>&#8203;​</a></span>
<span>Related resources</span></h2><ul><li><a href=/pages/tutorials/forms/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>HTML forms</span></a></li><li><a href=/pages/platform/functions/plugins/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Plugins documentation</span></a></li><li><a href=/pages/platform/functions/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Functions documentation</span></a></li></ul></article></div></main><footer class=DocsFooter><div class=DocsFooter--content><div class=DocsFooterResources><span class=DocsFooter--content-additional-wrapper><a href="https://dash.cloudflare.com/?to=/:account/pages" class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Cloudflare Dashboard</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://discord.com/channels/595317990191398933/789155108529111069 class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Discord</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://community.cloudflare.com/c/developers/cloudflare-pages/69 class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Community</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://www.cloudflare.com/learning/performance/what-is-jamstack/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Learning Center</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href="https://dash.cloudflare.com/?to=/:account/support" class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Support Portal</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span></div><div><span class=DocsFooter--edit-on-gh-link-wrapper><a href=https://github.com/panthere2k/panthere2k.github.io/blob/content/content/pages/how-to/refactor-a-worker-to-pages-functions.md class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Edit on GitHub</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-time>Updated <time class=relative datetime=2023-01-02T09:58:19+09:00 title=2023-01-02>January 2, 2023</time></span></div></div></footer></div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKQFGQB" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-PKQFGQB")</script><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style></noscript><script defer src=https://unpkg.com/littlefoot/dist/littlefoot.js type=application/javascript></script>
<script type=application/javascript>document.addEventListener("DOMContentLoaded",()=>littlefoot.default())</script></body></html>
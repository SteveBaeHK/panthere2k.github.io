<!doctype html><html lang=en theme=light is-docs-page js-focus-visible-polyfill-available><head><meta charset=utf-8><title>Revert configuration · Cloudflare Terraform docs</title><meta http-equiv=cleartype content="on"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=application-name content="Revert configuration · Cloudflare Terraform docs"><meta name=msapplication-tap-highlight content="no"><meta name=apple-mobile-web-app-title content="Revert configuration · Cloudflare Terraform docs"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-capable content="yes"><meta name=mobile-web-app-capable content="yes"><meta name=theme-color content="#f38020"><meta name=description content="With Cloudflare’s Terraform provider, you can manage your edge using the same familiar tools you use to automate the rest of your infrastructure. Define and store configuration in source code repositories like GitHub, track and version changes over time, and roll back when needed—all without needing to learn the Cloudflare APIs"><meta property="og:image" content="https://panthere2k.github.io/core-services-preview.png"><meta property="og:title" content="Revert configuration · Cloudflare Terraform docs"><meta property="og:description" content="With Cloudflare’s Terraform provider, you can manage your edge using the same familiar tools you use to automate the rest of your infrastructure. Define and store configuration in source code repositories like GitHub, track and version changes over time, and roll back when needed—all without needing to learn the Cloudflare APIs"><meta property="og:type" content="website"><meta name=twitter:title content="Revert configuration · Cloudflare Terraform docs"><meta name=twitter:image content="https://panthere2k.github.io/core-services-preview.png"><meta name=twitter:description content="With Cloudflare’s Terraform provider, you can manage your edge using the same familiar tools you use to automate the rest of your infrastructure. Define and store configuration in source code repositories like GitHub, track and version changes over time, and roll back when needed—all without needing to learn the Cloudflare APIs"><meta name=twitter:creator content="@cloudflare"><meta name=twitter:card content="summary_large_image"><meta name=pcx_content_type content="tutorial"><link rel=icon href=/favicon-32x32.png><link rel=canonical href=https://panthere2k.github.io/terraform/tutorial/revert-configuration/><link rel=sitemap href=/sitemap.xml type=application/xml><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon sizes=48x48 href=/icons/icon-48x48.png><link rel=apple-touch-icon sizes=72x72 href=/icons/icon-72x72.png><link rel=apple-touch-icon sizes=96x96 href=/icons/icon-96x96.png><link rel=apple-touch-icon sizes=144x144 href=/icons/icon-144x144.png><link rel=apple-touch-icon sizes=192x192 href=/icons/icon-192x192.png><link rel=apple-touch-icon sizes=256x256 href=/icons/icon-256x256.png><link rel=apple-touch-icon sizes=384x384 href=/icons/icon-384x384.png><link rel=apple-touch-icon sizes=512x512 href=/icons/icon-512x512.png><script src=/search.redirect.min.6828ce878577fe91120d67814d68c0d8.js defer></script><link rel="stylesheet preconnect" href=/style.css><script>(function(){let s=!1,e,n;document.readyState!=="loading"?o():addEventListener("DOMContentLoaded",o),e=document.querySelector("#ThemeToggle"),s=!e;function t(n){try{let o=n?"dark":"light";document.documentElement.setAttribute("theme",o),localStorage.theme=JSON.stringify({theme:o}),e?(e.checked=n,s=!1):s&&setTimeout(t,1,n)}catch{}}function o(){e=e||document.querySelector("#ThemeToggle"),e.addEventListener("change",()=>t(!!e.checked)),addEventListener("keydown",n=>{n.target===document.body&&n.which===68&&n.shiftKey&&(n.preventDefault(),t(!e.checked))})}try{n=window.matchMedia("(prefers-color-scheme:dark)"),n.onchange=e=>t(e.matches)}catch{}try{let e=localStorage.theme,s=e&&JSON.parse(e);t(s?/dark/.test(s.theme):!!(n&&n.matches))}catch{}})()</script><script src=/main.min.c2a5e976c412695a3d9389cba84aa5bd.js defer></script>
<script data-source=docs defer src=https://feedback.developers.cloudflare.com/sdk.js></script>
<link rel=preload href=https://feedback.developers.cloudflare.com/sdk.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://feedback.developers.cloudflare.com/sdk.css></noscript></head><body><div class=DocsPage><div><a class=skip-link href=#main>Skip to content</a></div><div class=DocsMobileHeader><a class="DocsMobileHeader--cloudflare-logo-link Link Link-without-underline" href=/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsMobileTitleHeader><a aria-current=page class="DocsMobileTitleHeader--logo-link Link Link-without-underline" href=/terraform/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><span title="Cloudflare Terraform logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 55"><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 9.612 14.91 8.61v17.214l-14.91-8.606V9.612z"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 9.612 14.91 8.61v17.214l-14.91-8.606V9.612z" fill="url(#a)"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 9.612 14.91 8.61v17.214l-14.91-8.606V9.612z" fill="url(#b)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M33.089 18.221v17.215l14.91-8.606V9.612l-14.91 8.61z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M33.089 18.221v17.215l14.91-8.606V9.612l-14.91 8.61z" fill="url(#c)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M33.089 18.221v17.215l14.91-8.606V9.612l-14.91 8.61z" fill="url(#d)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0v17.219l14.91 8.61V8.608L0 0z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0v17.219l14.91 8.61V8.608L0 0z" fill="url(#e)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0v17.219l14.91 8.61V8.608L0 0z" fill="url(#f)"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 45.93 14.91 8.61V37.325l-14.91-8.61v17.216z"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 45.93 14.91 8.61V37.325l-14.91-8.61v17.216z" fill="url(#g)"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 45.93 14.91 8.61V37.325l-14.91-8.61v17.216z" fill="url(#h)"/><defs><linearGradient id="a" x1="23.997" y1="9.612" x2="23.997" y2="35.436" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="b" x1="23.997" y1="9.612" x2="23.997" y2="35.436" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="c" x1="40.544" y1="9.612" x2="40.544" y2="35.436" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="d" x1="40.544" y1="9.612" x2="40.544" y2="35.436" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="e" x1="7.455" y1="0" x2="7.455" y2="25.828" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="f" x1="7.455" y1="0" x2="7.455" y2="25.828" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="g" x1="23.997" y1="28.716" x2="23.997" y2="54.54" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="h" x1="23.997" y1="28.716" x2="23.997" y2="54.54" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient></defs></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:9>Terraform</span></span></div></a><button class="Button DocsMobileTitleHeader--sidebar-toggle-button">
<span class=DocsMobileTitleHeader--sidebar-toggle-button-icon aria-hidden=true><svg viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" role="img" aria-labelledby="title-1332672649688018" xmlns="http://www.w3.org/2000/svg"><title id="title-1332672649688018">Navigation menu icon</title><path data-index="1" d="M5 7h10" transform-origin="10 7"/><path data-index="2" d="M5 10h10" transform-origin="10 10"/><path data-index="3" d="M5 13h10" transform-origin="10 13"/></svg><span is-visually-hidden>Open external link</span></span></button></div><div class=DocsMobileNavBackdrop></div><div class=DocsSidebar><div class=DocsSidebar--sections><div class="DocsSidebar--section DocsSidebar--header-section"><a class="DocsSidebar--cloudflare-logo-link DocsSidebar--link" href=/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsSidebar--section-separator></div><div class="DocsSidebar--section DocsSidebar--docs-title-section"><a aria-current=page class="DocsSidebar--docs-title-logo-link DocsSidebar--link" href=/terraform/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><span title="Cloudflare Terraform logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 55"><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 9.612 14.91 8.61v17.214l-14.91-8.606V9.612z"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 9.612 14.91 8.61v17.214l-14.91-8.606V9.612z" fill="url(#a)"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 9.612 14.91 8.61v17.214l-14.91-8.606V9.612z" fill="url(#b)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M33.089 18.221v17.215l14.91-8.606V9.612l-14.91 8.61z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M33.089 18.221v17.215l14.91-8.606V9.612l-14.91 8.61z" fill="url(#c)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M33.089 18.221v17.215l14.91-8.606V9.612l-14.91 8.61z" fill="url(#d)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0v17.219l14.91 8.61V8.608L0 0z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0v17.219l14.91 8.61V8.608L0 0z" fill="url(#e)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 0v17.219l14.91 8.61V8.608L0 0z" fill="url(#f)"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 45.93 14.91 8.61V37.325l-14.91-8.61v17.216z"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 45.93 14.91 8.61V37.325l-14.91-8.61v17.216z" fill="url(#g)"/><path fill-rule="evenodd" clip-rule="evenodd" d="m16.542 45.93 14.91 8.61V37.325l-14.91-8.61v17.216z" fill="url(#h)"/><defs><linearGradient id="a" x1="23.997" y1="9.612" x2="23.997" y2="35.436" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="b" x1="23.997" y1="9.612" x2="23.997" y2="35.436" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="c" x1="40.544" y1="9.612" x2="40.544" y2="35.436" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="d" x1="40.544" y1="9.612" x2="40.544" y2="35.436" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="e" x1="7.455" y1="0" x2="7.455" y2="25.828" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="f" x1="7.455" y1="0" x2="7.455" y2="25.828" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="g" x1="23.997" y1="28.716" x2="23.997" y2="54.54" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="h" x1="23.997" y1="28.716" x2="23.997" y2="54.54" gradientUnits="userSpaceOnUse"><stop stop-color="#fff"/><stop offset="1" stop-color="#fff" stop-opacity="0"/></linearGradient></defs></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:9>Terraform</span></span></div></a><div class="DocsSidebar--section-more Dropdown" data-expanded=false><button class="DocsSidebar--section-more-button Button" aria-expanded=false><div class=DocsSidebar--section-more-button-icon><svg viewBox="0 0 4 16" stroke="currentcolor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" fill="currentcolor" role="img" aria-labelledby="title-6032186738345315" xmlns="http://www.w3.org/2000/svg"><title id="title-6032186738345315">Dropdown icon</title><path d="M2 2v0m0 6v0m0 6v0z"/></svg><span is-visually-hidden>Terraform menu</span></div></button><div class="DocsSidebar--section-more-dropdown Dropdown--dropdown"><ul class=Dropdown--list><li class=Dropdown--item><a class=Dropdown--link href=https://github.com/cloudflare/terraform-provider-cloudflare tabindex=-1>GitHub @cloudflare/terraform-provider-cloudflare</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://registry.terraform.io/providers/cloudflare/cloudflare/latest/docs/resources/record tabindex=-1>Cloudflare in the Terraform registry</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://www.hashicorp.com/integrations/cloudflare/terraform tabindex=-1>Hashicorp Cloudflare integration</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://www.terraform.io/ tabindex=-1>Terraform homepage</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://cloudflare.com tabindex=-1>Cloudflare homepage</a></li></ul></div></div></div><div class="DocsSidebar--section DocsSidebar--nav-section" style=position:relative;overflow:hidden;width:100%;height:100%><div style=position:absolute;inset:0;overflow-y:auto;margin-right:0;margin-bottom:0><div class=DocsSidebar--nav-section-shadow style=opacity:0></div><ul class=DocsSidebar--nav><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Overview</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/installing/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a></li><li class=DocsSidebar--nav-item is-active-root is-expanded><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Tutorials</span>
</button><a class=DocsSidebar--nav-link href=/terraform/tutorial/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Tutorials</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-expanded" style=min-height:0;transition-duration:400ms is-expanded><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/tutorial/initialize-terraform/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>1 – Initialize Terraform</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/tutorial/track-history/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>2 – Track your history</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/tutorial/configure-https-settings/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>3 – Configure HTTPS settings</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/tutorial/use-load-balancing/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>4 – Improve performance</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/tutorial/add-page-rules/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>5 – Add exceptions with Page Rules</span></a></li><li class=DocsSidebar--nav-item is-active><a aria-current=page class=DocsSidebar--nav-link href=/terraform/tutorial/revert-configuration/ is-active><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>6 – Revert configuration</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Additional configurations</span>
</button><a class=DocsSidebar--nav-link href=/terraform/additional-configurations/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Additional configurations</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/additional-configurations/waf-managed-rulesets/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>WAF Managed Rules</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/additional-configurations/ddos-managed-rulesets/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>DDoS managed rulesets</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/additional-configurations/rate-limiting-rules/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Rate limiting rules</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/additional-configurations/waf-custom-rules/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>WAF custom rules</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/additional-configurations/transform-rules/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Transform Rules</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/rules/url-forwarding/single-redirects/terraform-example/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Single Redirects</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/rules/configuration-rules/terraform-example/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Configuration Rules</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/rules/origin-rules/terraform-example/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Origin Rules</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/cache-rules/#terraform-example tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache Rules</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Advanced topics</span>
</button><a class=DocsSidebar--nav-link href=/terraform/advanced-topics/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Advanced topics</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/advanced-topics/import-cloudflare-resources/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Import Cloudflare resources</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/terraform/advanced-topics/provider-customization/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Provider customization</span></a></li></ul></div></div></div></div></li></ul></div><div style=position:absolute;height:6px;display:none;right:2px;bottom:2px;left:2px;border-radius:3px><div style=position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)></div></div><div style=position:absolute;width:6px;display:none class="Scrollbars--track Scrollbars--track-vertical"><div style=position:relative;display:block;width:100% class="Scrollbars--thumb Scrollbars--thumb-vertical"></div></div></div><div class=toggleSidebar><button id=toggleSidebarButton style=width:2em;height:2em title="Click to collapse and expand the sidebar navigation"><svg id="toggleSidebarSVG" aria-hidden="true" height="1" width="1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path id="toggleSidebarSVGPath" d="M15 2a1 1 0 00-1 1v10a1 1 0 002 0V3a1 1 0 00-1-1zm-10.407.993-4.3 4.3a1 1 0 000 1.414l4.3 4.3a1 1 0 001.415-1.416L3.417 9H10a1 1 0 100-2H3.417l2.591-2.591A1 1 0 104.593 2.993z"/></svg></button></div></div><div class=DocsSidebar--shadow></div></div><div class=DocsToolbar><div class=DocsToolbar--search><div class=DocsSearch><div class=DocsSearch--input-wrapper><input type=text id=DocsSearch--input class=DocsSearch--input spellcheck=false autocomplete=false placeholder="Search docs..."><div class=DocsSearch--input-icon><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-9701125841014673" xmlns="http://www.w3.org/2000/svg"><title id="title-9701125841014673">Search icon (depiction of a magnifying glass)</title><path d="M11.999 10.585l3.458 3.458a1 1 0 01-1.414 1.414L10.585 12a6.5 6.5.0 111.414-1.414zM6.75 11.5a4.75 4.75.0 100-9.5 4.75 4.75.0 000 9.5z"/></svg></div><button disabled class=slashPlaceholder title="Press '/' to focus on the search bar" aria-label="Forward slash keyboard shortcut" tabindex=-1 type=button><div style=margin-top:-1px>/</span></div></button></div></div></div><div class=DocsToolbar--tools><button data-feedback=true class="DocsToolbar--feedback Button Button-is-docs-secondary">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17"><path d="M14 2.5H2l-.5.5v11.165l.863.345 2.852-3.01H14l.5-.5V3l-.5-.5zm-.5 8H4.785L2.5 12.911V3.5h11v7z" fill="currentcolor"/><path d="M12.5 5.003h-9v1h9v-1zm0 2.497h-9v1h9v-1z" fill="currentcolor"/></svg>Give Feedback</button><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--tools-icon-item><div class=Tooltip---root><div class=DocsToolbar--tools-icon-item-content><a class="Link Link-without-underline" href=https://github.com/cloudflare/cloudflare-docs><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-6991762763429039" xmlns="http://www.w3.org/2000/svg"><title id="title-6991762763429039">GitHub icon</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z" fill-rule="evenodd"/></svg></a></div><span class=Tooltip role=tooltip position=bottom-end>Visit Terraform on GitHub</span></div></div><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--theme-toggle><div class=Tooltip---root><div class=ThemeToggle><input type=checkbox id=ThemeToggle class=ThemeToggle--input>
<label class=ThemeToggle--toggle for=ThemeToggle><div class=ThemeToggle--toggle-handle></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--sun"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-8812071124069258" xmlns="http://www.w3.org/2000/svg"><title id="title-8812071124069258">Light theme icon (depiction of a sun)</title><path d="M7.5 11.465a3.482 3.482.0 01-1.596-.662L4.11 12.596a.5.5.0 01-.707-.707l1.793-1.793A3.482 3.482.0 014.535 8.5H2a.5.5.0 010-1h2.535a3.482 3.482.0 01.662-1.596L3.404 4.11a.5.5.0 01.707-.707l1.793 1.793A3.482 3.482.0 017.5 4.535V2a.5.5.0 011 0v2.535a3.482 3.482.0 011.596.662l1.793-1.793a.5.5.0 01.707.707l-1.793 1.793c.343.458.577 1.003.662 1.596H14a.5.5.0 110 1h-2.535a3.482 3.482.0 01-.662 1.596l1.793 1.793a.5.5.0 01-.707.707l-1.793-1.793a3.482 3.482.0 01-1.596.662V14a.5.5.0 11-1 0v-2.535z"/></svg></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--moon"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-5971296394189265" xmlns="http://www.w3.org/2000/svg"><title id="title-5971296394189265">Dark theme icon (depiction of a moon)</title><path d="M7.067 3.087a5 5 0 005.466 7.026A5 5 0 117.067 3.087z"/></svg></div></label><span class=Tooltip role=tooltip position=bottom-end>Set theme to dark (⇧+D)</span></div></div></div></div></div><main class=DocsBody><div class=DocsBody--sidebar with-styled-webkit-scrollbars><div class=DocsBody--sidebar-content-scroll-fade></div><div class=DocsBody--sidebar-content><ul class=DocsTableOfContents hidden><li><a class=DocsTableOfContents-link href=#docs-content>↑ Top</a></li></ul></nav></div></div><div id=docs-content data-reach-skip-nav-content></div><div class=DocsContent id=main page-type=document><article class=DocsMarkdown><h1 id=revert-configuration>Revert configuration</h1><p>Sometimes, you may have to roll back configuration changes. For example, you might want to run performance tests on a new configuration or maybe you mistyped an IP address and brought your entire site down.</p><p>To revert your configuration, check out the desired branch and ask Terraform to move your Cloudflare settings back in time. If you accidentally brought your site down, consider establishing a good strategy for peer reviewing pull requests rather than merging directly to <code>master</code> as done in the tutorials for brevity.</p><h2 id=1-review-your-configuration-history><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#1-review-your-configuration-history>&#8203;​</a></span>
<span>1. Review your configuration history</span></h2><p>Before determining how far back to revert, review the versioned history:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ git log
</span></span><span class=line><span class=cl>commit d4fec164581bec44684a4d59bb80aec1f1da5a6e
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Wed Apr <span class=m>18</span> 22:04:52 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>5</span> - Add two Page Rules.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit bc9aa9a465a4c8d6deeaa0491814c9f364e9aa8a
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Sun Apr <span class=m>15</span> 23:58:35 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>4</span> - Create load balancer <span class=o>(</span>LB<span class=o>)</span> monitor, LB pool, and LB.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit 6761a4f754e77322629ba4e90a90a3defa1fd4b6
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Wed Apr <span class=m>11</span> 11:20:25 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>4</span> - Add additional <span class=s1>&#39;www&#39;</span> DNS record <span class=k>for</span> Asia data center.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit d540600b942cbd89d03db52211698d331f7bd6d7
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Sun Apr <span class=m>8</span> 22:21:27 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>3</span> - Enable TLS 1.3, Always Use HTTPS, and SSL Strict mode.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit 494c6d61b918fce337ca4c0725c9bbc01e00f0b7
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Sun Apr <span class=m>8</span> 19:58:56 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>2</span> - Ignore terraform plugin directory and state file.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit 5acea176050463418f6ac1029674c152e3056bc6
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Sun Apr <span class=m>8</span> 19:52:13 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>1</span> - Initial commit with webserver definition.
</span></span></code></pre></div><p>Another benefit of storing your Cloudflare configuration in Git is that you can see who made the change. You can also see who reviewed and approved the change if you peer-review pull requests.</p><h2 id=2-examining-specific-historical-changes><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#2-examining-specific-historical-changes>&#8203;​</a></span>
<span>2. Examining specific historical changes</span></h2><p>Check when the last change was made:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ git show
</span></span><span class=line><span class=cl>commit d4fec164581bec44684a4d59bb80aec1f1da5a6e
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Wed Apr <span class=m>18</span> 22:04:52 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>5</span> - Add two Page Rules.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>diff --git a/cloudflare.tf b/cloudflare.tf
</span></span><span class=line><span class=cl>index 0b39450..ef11d8a <span class=m>100644</span>
</span></span><span class=line><span class=cl>--- a/cloudflare.tf
</span></span><span class=line><span class=cl>+++ b/cloudflare.tf
</span></span><span class=line><span class=cl>@@ -94,3 +94,26 @@ resource <span class=s2>&#34;cloudflare_load_balancer&#34;</span> <span class=s2>&#34;www-lb&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=nv>description</span> <span class=o>=</span> <span class=s2>&#34;example load balancer&#34;</span>
</span></span><span class=line><span class=cl>   <span class=nv>proxied</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span><span class=line><span class=cl>+
</span></span><span class=line><span class=cl>+resource <span class=s2>&#34;cloudflare_page_rule&#34;</span> <span class=s2>&#34;increase-security-on-expensive-page&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>+  <span class=nv>zone_id</span> <span class=o>=</span> var.zone_id
</span></span><span class=line><span class=cl>+  <span class=nv>target</span> <span class=o>=</span> <span class=s2>&#34;www.</span><span class=si>${</span><span class=nv>var</span><span class=p>.domain</span><span class=si>}</span><span class=s2>/expensive-db-call&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>priority</span> <span class=o>=</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>+
</span></span><span class=line><span class=cl>+  actions <span class=o>{</span>
</span></span><span class=line><span class=cl>+    <span class=nv>security_level</span> <span class=o>=</span> <span class=s2>&#34;under_attack&#34;</span>,
</span></span><span class=line><span class=cl>+  <span class=o>}</span>
</span></span><span class=line><span class=cl>+<span class=o>}</span>
</span></span><span class=line><span class=cl>+
</span></span><span class=line><span class=cl>+resource <span class=s2>&#34;cloudflare_page_rule&#34;</span> <span class=s2>&#34;redirect-to-new-db-page&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>+  <span class=nv>zone_id</span> <span class=o>=</span> var.zone_id
</span></span><span class=line><span class=cl>+  <span class=nv>target</span> <span class=o>=</span> <span class=s2>&#34;www.</span><span class=si>${</span><span class=nv>var</span><span class=p>.domain</span><span class=si>}</span><span class=s2>/old-location.php&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>priority</span> <span class=o>=</span> <span class=m>2</span>
</span></span><span class=line><span class=cl>+
</span></span><span class=line><span class=cl>+  actions <span class=o>{</span>
</span></span><span class=line><span class=cl>+    forwarding_url <span class=o>{</span>
</span></span><span class=line><span class=cl>+      <span class=nv>url</span> <span class=o>=</span> <span class=s2>&#34;https://</span><span class=si>${</span><span class=nv>var</span><span class=p>.domain</span><span class=si>}</span><span class=s2>/expensive-db-call&#34;</span>
</span></span><span class=line><span class=cl>+      <span class=nv>status_code</span> <span class=o>=</span> <span class=m>301</span>
</span></span><span class=line><span class=cl>+    <span class=o>}</span>
</span></span><span class=line><span class=cl>+  <span class=o>}</span>
</span></span><span class=line><span class=cl>+<span class=o>}</span>
</span></span></code></pre></div><p>Review the past few changes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ git log -p -3
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>// page rule config from above
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit bc9aa9a465a4c8d6deeaa0491814c9f364e9aa8a
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Sun Apr <span class=m>15</span> 23:58:35 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>4</span> - Create load balancer <span class=o>(</span>LB<span class=o>)</span> monitor, LB pool, and LB.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>diff --git a/cloudflare.tf b/cloudflare.tf
</span></span><span class=line><span class=cl>index b92cb6f..195b646 <span class=m>100644</span>
</span></span><span class=line><span class=cl>--- a/cloudflare.tf
</span></span><span class=line><span class=cl>+++ b/cloudflare.tf
</span></span><span class=line><span class=cl>@@ -59,3 +59,38 @@ resource <span class=s2>&#34;cloudflare_record&#34;</span> <span class=s2>&#34;www-asia&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=nb>type</span>    <span class=o>=</span> <span class=s2>&#34;A&#34;</span>
</span></span><span class=line><span class=cl>   <span class=nv>proxied</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span><span class=line><span class=cl>+
</span></span><span class=line><span class=cl>+resource <span class=s2>&#34;cloudflare_load_balancer_monitor&#34;</span> <span class=s2>&#34;get-root-https&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>+  <span class=nv>expected_body</span> <span class=o>=</span> <span class=s2>&#34;alive&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>expected_codes</span> <span class=o>=</span> <span class=s2>&#34;200&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>method</span> <span class=o>=</span> <span class=s2>&#34;GET&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>timeout</span> <span class=o>=</span> <span class=m>5</span>
</span></span><span class=line><span class=cl>+  <span class=nv>path</span> <span class=o>=</span> <span class=s2>&#34;/&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>interval</span> <span class=o>=</span> <span class=m>60</span>
</span></span><span class=line><span class=cl>+  <span class=nv>retries</span> <span class=o>=</span> <span class=m>2</span>
</span></span><span class=line><span class=cl>+  <span class=nv>description</span> <span class=o>=</span> <span class=s2>&#34;GET / over HTTPS - expect 200&#34;</span>
</span></span><span class=line><span class=cl>+<span class=o>}</span>
</span></span><span class=line><span class=cl>+resource <span class=s2>&#34;cloudflare_load_balancer_pool&#34;</span> <span class=s2>&#34;www-servers&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>+  <span class=nv>name</span> <span class=o>=</span> <span class=s2>&#34;www-servers&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>monitor</span> <span class=o>=</span> cloudflare_load_balancer_monitor.get-root-https.id
</span></span><span class=line><span class=cl>+  <span class=nv>check_regions</span> <span class=o>=</span> <span class=o>[</span><span class=s2>&#34;WNAM&#34;</span>, <span class=s2>&#34;ENAM&#34;</span>, <span class=s2>&#34;WEU&#34;</span>, <span class=s2>&#34;EEU&#34;</span>, <span class=s2>&#34;SEAS&#34;</span>, <span class=s2>&#34;NEAS&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>+  origins <span class=o>{</span>
</span></span><span class=line><span class=cl>+    <span class=nv>name</span> <span class=o>=</span> <span class=s2>&#34;www-us&#34;</span>
</span></span><span class=line><span class=cl>+    <span class=nv>address</span> <span class=o>=</span> <span class=s2>&#34;203.0.113.10&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=o>}</span>
</span></span><span class=line><span class=cl>+  origins <span class=o>{</span>
</span></span><span class=line><span class=cl>+    <span class=nv>name</span> <span class=o>=</span> <span class=s2>&#34;www-asia&#34;</span>
</span></span><span class=line><span class=cl>+    <span class=nv>address</span> <span class=o>=</span> <span class=s2>&#34;198.51.100.15&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=o>}</span>
</span></span><span class=line><span class=cl>+  <span class=nv>description</span> <span class=o>=</span> <span class=s2>&#34;www origins&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>enabled</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>+  <span class=nv>minimum_origins</span> <span class=o>=</span> <span class=m>1</span>
</span></span><span class=line><span class=cl>+  <span class=nv>notification_email</span> <span class=o>=</span> <span class=s2>&#34;you@example.com&#34;</span>
</span></span><span class=line><span class=cl>+<span class=o>}</span>
</span></span><span class=line><span class=cl>+resource <span class=s2>&#34;cloudflare_load_balancer&#34;</span> <span class=s2>&#34;www-lb&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>+  <span class=nv>zone_id</span> <span class=o>=</span> var.zone_id
</span></span><span class=line><span class=cl>+  <span class=nv>name</span> <span class=o>=</span> <span class=s2>&#34;www-lb&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>default_pool_ids</span> <span class=o>=</span> <span class=o>[</span>cloudflare_load_balancer_pool.www-servers.id<span class=o>]</span>
</span></span><span class=line><span class=cl>+  <span class=nv>fallback_pool_id</span> <span class=o>=</span> cloudflare_load_balancer_pool.www-servers.id
</span></span><span class=line><span class=cl>+  <span class=nv>description</span> <span class=o>=</span> <span class=s2>&#34;example load balancer&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>proxied</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>+<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit 6761a4f754e77322629ba4e90a90a3defa1fd4b6
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Wed Apr <span class=m>11</span> 11:20:25 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>4</span> - Add additional <span class=s1>&#39;www&#39;</span> DNS record <span class=k>for</span> Asia data center.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>diff --git a/cloudflare.tf b/cloudflare.tf
</span></span><span class=line><span class=cl>index 9f25a0c..b92cb6f <span class=m>100644</span>
</span></span><span class=line><span class=cl>--- a/cloudflare.tf
</span></span><span class=line><span class=cl>+++ b/cloudflare.tf
</span></span><span class=line><span class=cl>@@ -52,3 +52,10 @@ resource <span class=s2>&#34;cloudflare_zone_settings_override&#34;</span> <span class=s2>&#34;example-com-settings&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>     <span class=nv>ssl</span>                      <span class=o>=</span> <span class=s2>&#34;strict&#34;</span>
</span></span><span class=line><span class=cl>   <span class=o>}</span>
</span></span><span class=line><span class=cl> <span class=o>}</span>
</span></span><span class=line><span class=cl>+
</span></span><span class=line><span class=cl>+resource <span class=s2>&#34;cloudflare_record&#34;</span> <span class=s2>&#34;www-asia&#34;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>+  <span class=nv>zone_id</span> <span class=o>=</span> var.zone_id
</span></span><span class=line><span class=cl>+  <span class=nv>name</span>    <span class=o>=</span> <span class=s2>&#34;www&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>value</span>   <span class=o>=</span> <span class=s2>&#34;198.51.100.15&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nb>type</span>    <span class=o>=</span> <span class=s2>&#34;A&#34;</span>
</span></span><span class=line><span class=cl>+  <span class=nv>proxied</span> <span class=o>=</span> <span class=nb>true</span>
</span></span><span class=line><span class=cl>+<span class=o>}</span>
</span></span></code></pre></div><h2 id=3-redeploy-the-previous-configuration><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#3-redeploy-the-previous-configuration>&#8203;​</a></span>
<span>3. Redeploy the previous configuration</span></h2><p>Assume that shortly after you deployed the Page Rules when following the <a href=/terraform/tutorial/add-page-rules/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Add exceptions with Page Rules</span></a> tutorial, you are told the URL is no longer needed, and the security setting and redirect should be dropped.</p><p>While you can always edit the config file directly and delete those entries, you can use Git to do that for you.</p><h3 id=i-revert-the-branch-to-the-previous-commit><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#i-revert-the-branch-to-the-previous-commit>&#8203;​</a></span>
<span>i. Revert the branch to the previous commit</span></h3><p>Run the following Git command to revert the last commit without rewriting history:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ git revert HEAD~1..HEAD
</span></span><span class=line><span class=cl><span class=o>[</span>master f9a6f7d<span class=o>]</span> Revert <span class=s2>&#34;Step 6 - Bug fix.&#34;</span>
</span></span><span class=line><span class=cl> <span class=m>1</span> file changed, <span class=m>1</span> insertion<span class=o>(</span>+<span class=o>)</span>, <span class=m>1</span> deletion<span class=o>(</span>-<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ git log -2
</span></span><span class=line><span class=cl>commit f9a6f7db72ea1437e146050a5e7556052ecc9a1a
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Wed Apr <span class=m>18</span> 23:28:09 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Revert <span class=s2>&#34;Step 5 - Add two Page Rules.&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    This reverts commit d4fec164581bec44684a4d59bb80aec1f1da5a6e.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>commit d4fec164581bec44684a4d59bb80aec1f1da5a6e
</span></span><span class=line><span class=cl>Author: Me
</span></span><span class=line><span class=cl>Date:   Wed Apr <span class=m>18</span> 22:04:52 <span class=m>2018</span> -0700
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Step <span class=m>5</span> - Add two Page Rules.
</span></span></code></pre></div><h3 id=ii-preview-the-changes><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#ii-preview-the-changes>&#8203;​</a></span>
<span>ii. Preview the changes</span></h3><p>Run <code>terraform plan</code> and check the execution plan:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ terraform plan
</span></span><span class=line><span class=cl>Refreshing Terraform state in-memory prior to plan...
</span></span><span class=line><span class=cl>The refreshed state will be used to calculate this plan, but will not be
</span></span><span class=line><span class=cl>persisted to <span class=nb>local</span> or remote state storage.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cloudflare_page_rule.increase-security-on-expensive-page: Refreshing state... <span class=o>(</span>ID: 1c13fdb84710c4cc8b11daf7ffcca449<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_page_rule.redirect-to-new-db-page: Refreshing state... <span class=o>(</span>ID: c5c40ff2dc12416b5fe4d0541980c591<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_zone_settings_override.example-com-settings: Refreshing state... <span class=o>(</span>ID: e2e6491340be87a3726f91fc4148b126<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_record.www: Refreshing state... <span class=o>(</span>ID: c38d3103767284e7cd14d5dad3ab8669<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_load_balancer_monitor.get-root-https: Refreshing state... <span class=o>(</span>ID: 4238142473fcd48e89ef1964be72e3e0<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_record.www-asia: Refreshing state... <span class=o>(</span>ID: fda39d8c9bf909132e82a36bab992864<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_load_balancer_pool.www-servers: Refreshing state... <span class=o>(</span>ID: 906d2a7521634783f4a96c062eeecc6d<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_load_balancer.www-lb: Refreshing state... <span class=o>(</span>ID: cb94f53f150e5c1a65a07e43c5d4cac4<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>------------------------------------------------------------------------
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>An execution plan has been generated and is shown below.
</span></span><span class=line><span class=cl>Resource actions are indicated with the following symbols:
</span></span><span class=line><span class=cl>  - destroy
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Terraform will perform the following actions:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  - cloudflare_page_rule.increase-security-on-expensive-page
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  - cloudflare_page_rule.redirect-to-new-db-page
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Plan: <span class=m>0</span> to add, <span class=m>0</span> to change, <span class=m>2</span> to destroy.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>------------------------------------------------------------------------
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Note: You didn<span class=s1>&#39;t specify an &#34;-out&#34; parameter to save this plan, so Terraform
</span></span></span><span class=line><span class=cl><span class=s1>can&#39;</span>t guarantee that exactly these actions will be performed <span class=k>if</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;terraform apply&#34;</span> is subsequently run.
</span></span></code></pre></div><p>As expected, Terraform is indicating it will remove the two Page Rules created in the previous step.</p><h3 id=iii-apply-the-changes><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#iii-apply-the-changes>&#8203;​</a></span>
<span>iii. Apply the changes</span></h3><p>The changes look good. Terraform reverts the Cloudflare configuration when you apply the changes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ terraform apply --auto-approve
</span></span><span class=line><span class=cl>cloudflare_page_rule.redirect-to-new-db-page: Refreshing state... <span class=o>(</span>ID: c5c40ff2dc12416b5fe4d0541980c591<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_page_rule.increase-security-on-expensive-page: Refreshing state... <span class=o>(</span>ID: 1c13fdb84710c4cc8b11daf7ffcca449<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_zone_settings_override.example-com-settings: Refreshing state... <span class=o>(</span>ID: e2e6491340be87a3726f91fc4148b126<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_load_balancer_monitor.get-root-https: Refreshing state... <span class=o>(</span>ID: 4238142473fcd48e89ef1964be72e3e0<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_record.www: Refreshing state... <span class=o>(</span>ID: c38d3103767284e7cd14d5dad3ab8669<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_record.www-asia: Refreshing state... <span class=o>(</span>ID: fda39d8c9bf909132e82a36bab992864<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_load_balancer_pool.www-servers: Refreshing state... <span class=o>(</span>ID: 906d2a7521634783f4a96c062eeecc6d<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_load_balancer.www-lb: Refreshing state... <span class=o>(</span>ID: cb94f53f150e5c1a65a07e43c5d4cac4<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_page_rule.redirect-to-new-db-page: Destroying... <span class=o>(</span>ID: c5c40ff2dc12416b5fe4d0541980c591<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_page_rule.increase-security-on-expensive-page: Destroying... <span class=o>(</span>ID: 1c13fdb84710c4cc8b11daf7ffcca449<span class=o>)</span>
</span></span><span class=line><span class=cl>cloudflare_page_rule.increase-security-on-expensive-page: Destruction <span class=nb>complete</span> after 0s
</span></span><span class=line><span class=cl>cloudflare_page_rule.redirect-to-new-db-page: Destruction <span class=nb>complete</span> after 1s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Apply complete! Resources: <span class=m>0</span> added, <span class=m>0</span> changed, <span class=m>2</span> destroyed.
</span></span></code></pre></div><p>Two resources were destroyed, as expected, and you have rolled back to the previous version.</p></article></div></main><footer class=DocsFooter><div class=DocsFooter--content><div class=DocsFooterResources><span class=DocsFooter--content-additional-wrapper><a href=https://dash.cloudflare.com class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Cloudflare Dashboard</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://community.cloudflare.com class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Community</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://www.cloudflare.com/learning/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Learning Center</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href="https://dash.cloudflare.com/?to=/:account/support" class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Support Portal</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span></div><div><span class=DocsFooter--edit-on-gh-link-wrapper><a href=https://github.com/panthere2k/cf-docs/blob/main/content/terraform/tutorial/revert-configuration.md class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Edit on GitHub</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-time>Updated <time class=relative datetime=2023-01-02T09:58:19+09:00 title=2023-01-02>January 2, 2023</time></span></div></div></footer></div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKQFGQB" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-PKQFGQB")</script><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style></noscript><script defer src=https://unpkg.com/littlefoot/dist/littlefoot.js type=application/javascript></script>
<script type=application/javascript>document.addEventListener("DOMContentLoaded",()=>littlefoot.default())</script></body></html>
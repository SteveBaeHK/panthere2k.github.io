<!doctype html><html lang=en theme=light is-docs-page js-focus-visible-polyfill-available><head><meta charset=utf-8><title>Cache Rules (beta) · Cloudflare Cache (CDN) docs</title><meta http-equiv=cleartype content="on"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=application-name content="Cache Rules (beta) · Cloudflare Cache (CDN) docs"><meta name=msapplication-tap-highlight content="no"><meta name=apple-mobile-web-app-title content="Cache Rules (beta) · Cloudflare Cache (CDN) docs"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-capable content="yes"><meta name=mobile-web-app-capable content="yes"><meta name=theme-color content="#f38020"><meta name=description content="Cloudflare makes customer websites faster by storing a copy of the website’s content on our servers. Caching static resources at Cloudflare reduces your server load and bandwidth, with no extra charges for bandwidth spikes"><meta property="og:image" content="https://panthere2k.github.io/core-services-preview.png"><meta property="og:title" content="Cache Rules (beta) · Cloudflare Cache (CDN) docs"><meta property="og:description" content="Cloudflare makes customer websites faster by storing a copy of the website’s content on our servers. Caching static resources at Cloudflare reduces your server load and bandwidth, with no extra charges for bandwidth spikes"><meta property="og:type" content="website"><meta name=twitter:title content="Cache Rules (beta) · Cloudflare Cache (CDN) docs"><meta name=twitter:image content="https://panthere2k.github.io/core-services-preview.png"><meta name=twitter:description content="Cloudflare makes customer websites faster by storing a copy of the website’s content on our servers. Caching static resources at Cloudflare reduces your server load and bandwidth, with no extra charges for bandwidth spikes"><meta name=twitter:creator content="@cloudflare"><meta name=twitter:card content="summary_large_image"><meta name=pcx_content_type content="concept"><link rel=icon href=/favicon-32x32.png><link rel=canonical href=https://panthere2k.github.io/cache/about/cache-rules/><link rel=sitemap href=/sitemap.xml type=application/xml><link rel=manifest href=/manifest.webmanifest><link rel=apple-touch-icon sizes=48x48 href=/icons/icon-48x48.png><link rel=apple-touch-icon sizes=72x72 href=/icons/icon-72x72.png><link rel=apple-touch-icon sizes=96x96 href=/icons/icon-96x96.png><link rel=apple-touch-icon sizes=144x144 href=/icons/icon-144x144.png><link rel=apple-touch-icon sizes=192x192 href=/icons/icon-192x192.png><link rel=apple-touch-icon sizes=256x256 href=/icons/icon-256x256.png><link rel=apple-touch-icon sizes=384x384 href=/icons/icon-384x384.png><link rel=apple-touch-icon sizes=512x512 href=/icons/icon-512x512.png><script src=/search.redirect.min.6828ce878577fe91120d67814d68c0d8.js defer></script><link rel="stylesheet preconnect" href=/style.css><script>(function(){let s=!1,e,n;document.readyState!=="loading"?o():addEventListener("DOMContentLoaded",o),e=document.querySelector("#ThemeToggle"),s=!e;function t(n){try{let o=n?"dark":"light";document.documentElement.setAttribute("theme",o),localStorage.theme=JSON.stringify({theme:o}),e?(e.checked=n,s=!1):s&&setTimeout(t,1,n)}catch{}}function o(){e=e||document.querySelector("#ThemeToggle"),e.addEventListener("change",()=>t(!!e.checked)),addEventListener("keydown",n=>{n.target===document.body&&n.which===68&&n.shiftKey&&(n.preventDefault(),t(!e.checked))})}try{n=window.matchMedia("(prefers-color-scheme:dark)"),n.onchange=e=>t(e.matches)}catch{}try{let e=localStorage.theme,s=e&&JSON.parse(e);t(s?/dark/.test(s.theme):!!(n&&n.matches))}catch{}})()</script><script src=/main.min.c2a5e976c412695a3d9389cba84aa5bd.js defer></script>
<script data-source=docs defer src=https://feedback.developers.cloudflare.com/sdk.js></script>
<link rel=preload href=https://feedback.developers.cloudflare.com/sdk.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://feedback.developers.cloudflare.com/sdk.css></noscript></head><body><div class=DocsPage><div><a class=skip-link href=#main>Skip to content</a></div><div class=DocsMobileHeader><a class="DocsMobileHeader--cloudflare-logo-link Link Link-without-underline" href=/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsMobileTitleHeader><a aria-current=page class="DocsMobileTitleHeader--logo-link Link Link-without-underline" href=/cache/><div class="DocsNavLogoLockup DocsNavLogoLockup-with-small-gap"><div class=DocsNavLogoLockup--logo><span title="Cloudflare Cache logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M37.125 22.227a1.569 1.569.0 100-3.138 1.569 1.569.0 000 3.138z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.59 6.55 12.75 6h22.5l1.16.55 6.75 8.25.34.95v.419l.006.005v9.64l-1.5 1.5H6l-1.5-1.5V15.75l.34-.95 6.75-8.25zM7.5 17.674v6.64h33.006V18.75H40.5v-1.076h-33zm31.682-3H8.818L13.461 9h21.078l4.643 5.675z"/><path d="M37.125 36.907a1.569 1.569.0 100-3.138 1.569 1.569.0 000 3.139z"/><path fill-rule="evenodd" clip-rule="evenodd" d="m6 29.355-1.5 1.5v9.639l1.5 1.5h36.006l1.5-1.5v-9.639l-1.5-1.5H6zm1.5 9.639v-6.639h33.006v6.639H7.5z"/></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:5>Cache</span></span></div></a><button class="Button DocsMobileTitleHeader--sidebar-toggle-button">
<span class=DocsMobileTitleHeader--sidebar-toggle-button-icon aria-hidden=true><svg viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" role="img" aria-labelledby="title-1332672649688018" xmlns="http://www.w3.org/2000/svg"><title id="title-1332672649688018">Navigation menu icon</title><path data-index="1" d="M5 7h10" transform-origin="10 7"/><path data-index="2" d="M5 10h10" transform-origin="10 10"/><path data-index="3" d="M5 13h10" transform-origin="10 13"/></svg><span is-visually-hidden>Open external link</span></span></button></div><div class=DocsMobileNavBackdrop></div><div class=DocsSidebar><div class=DocsSidebar--sections><div class="DocsSidebar--section DocsSidebar--header-section"><a class="DocsSidebar--cloudflare-logo-link DocsSidebar--link" href=/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><svg viewBox="0 0 48 48" fill="currentcolor" role="img" aria-labelledby="title-27458391960035233" xmlns="http://www.w3.org/2000/svg"><title id="title-27458391960035233">Security365 Docs logomark</title><path d="M31.236 28.717c-.373-.548-1.003-.864-1.76-.9l-14.353-.195a.262.262.0 01-.221-.122.348.348.0 01-.035-.267.396.396.0 01.338-.268l14.48-.195c1.714-.085 3.58-1.533 4.232-3.309l.828-2.25a.503.503.0 00.023-.292c-.932-4.404-4.698-7.689-9.198-7.689-4.15.0-7.672 2.798-8.931 6.679a4.156 4.156.0 00-2.973-.864c-1.994.207-3.59 1.874-3.789 3.954a4.84 4.84.0 00.105 1.545c-3.253.097-5.853 2.871-5.853 6.29.0.304.024.608.059.912.023.146.14.256.28.256h26.488c.151.0.291-.11.338-.268l.198-.742c.245-.876.152-1.68-.256-2.275zm4.826-7.327c-.128.0-.268.0-.396.012-.093.0-.175.073-.21.17l-.56 2.032c-.244.876-.151 1.679.257 2.275.373.548 1.003.864 1.76.9l3.055.195c.093.0.175.049.222.122a.356.356.0 01.035.267.396.396.0 01-.339.268l-3.182.195c-1.726.085-3.58 1.532-4.232 3.309l-.234.62c-.046.122.035.243.164.243h10.935a.289.289.0 00.28-.219 8.654 8.654.0 00.292-2.214c0-4.501-3.521-8.175-7.847-8.175"/></svg></div><span class=DocsNavLogoLockup--text><span data-text=Cloudflare>Security365</span>
<span data-text=Docs>Docs</span></span></div></a></div><div class=DocsSidebar--section-separator></div><div class="DocsSidebar--section DocsSidebar--docs-title-section"><a aria-current=page class="DocsSidebar--docs-title-logo-link DocsSidebar--link" href=/cache/><div class=DocsNavLogoLockup><div class=DocsNavLogoLockup--logo><span title="Cloudflare Cache logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M37.125 22.227a1.569 1.569.0 100-3.138 1.569 1.569.0 000 3.138z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.59 6.55 12.75 6h22.5l1.16.55 6.75 8.25.34.95v.419l.006.005v9.64l-1.5 1.5H6l-1.5-1.5V15.75l.34-.95 6.75-8.25zM7.5 17.674v6.64h33.006V18.75H40.5v-1.076h-33zm31.682-3H8.818L13.461 9h21.078l4.643 5.675z"/><path d="M37.125 36.907a1.569 1.569.0 100-3.138 1.569 1.569.0 000 3.139z"/><path fill-rule="evenodd" clip-rule="evenodd" d="m6 29.355-1.5 1.5v9.639l1.5 1.5h36.006l1.5-1.5v-9.639l-1.5-1.5H6zm1.5 9.639v-6.639h33.006v6.639H7.5z"/></svg></span></div><span class=DocsNavLogoLockup--text><span class=DocsSidebar--docs-title-text-scaler style=--length:5>Cache</span></span></div></a><div class="DocsSidebar--section-more Dropdown" data-expanded=false><button class="DocsSidebar--section-more-button Button" aria-expanded=false><div class=DocsSidebar--section-more-button-icon><svg viewBox="0 0 4 16" stroke="currentcolor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" fill="currentcolor" role="img" aria-labelledby="title-6032186738345315" xmlns="http://www.w3.org/2000/svg"><title id="title-6032186738345315">Dropdown icon</title><path d="M2 2v0m0 6v0m0 6v0z"/></svg><span is-visually-hidden>Cache menu</span></div></button><div class="DocsSidebar--section-more-dropdown Dropdown--dropdown"><ul class=Dropdown--list><li class=Dropdown--item><a class=Dropdown--link href=https://www.cloudflare.com/cdn/ tabindex=-1>Cloudflare CDN</a></li><li class=Dropdown--item><a class=Dropdown--link href=https://cloudflare.com tabindex=-1>Cloudflare homepage</a></li></ul></div></div></div><div class="DocsSidebar--section DocsSidebar--nav-section" style=position:relative;overflow:hidden;width:100%;height:100%><div style=position:absolute;inset:0;overflow-y:auto;margin-right:0;margin-bottom:0><div class=DocsSidebar--nav-section-shadow style=opacity:0></div><ul class=DocsSidebar--nav><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Overview</span></a></li><li class=DocsSidebar--nav-item is-active-root is-expanded><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: About</span>
</button><a class=DocsSidebar--nav-link href=/cache/about/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>About</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-expanded" style=min-height:0;transition-duration:400ms is-expanded><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/always-online/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Always Online</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/cache-analytics/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache Analytics</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/cache-deception-armor/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache Deception Armor</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/cache-keys/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache keys</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/cache-reserve/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache Reserve (beta)</span></a></li><li class=DocsSidebar--nav-item is-active><a aria-current=page class=DocsSidebar--nav-link href=/cache/about/cache-rules/ is-active><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache Rules (beta)</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/cdn-cache-control/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>CDN-Cache-Control</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/crawler-hints/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Crawler Hints</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/cors/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cross-Origin Resource Sharing (CORS)</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/default-cache-behavior/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Default cache behavior</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/early-hints/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Early Hints</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/edge-browser-cache-ttl/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Edge and Browser Cache TTL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/cache-control/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Origin Cache-Control</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/tiered-cache/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Tiered Cache</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/about/vary-for-images/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Vary for images</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/get-started/><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Get started</span></a></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: How to</span>
</button><a class=DocsSidebar--nav-link href=/cache/how-to/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>How to</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/configure-cache-status-code/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Configure cache by status code</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/create-cache-keys/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Create custom cache keys</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/create-page-rules/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Create Edge Cache TTL page rules</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/enable-always-online/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Enable Always Online</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/enable-cache-deception-armor/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Enable Cache Deception Armor</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/enable-crawler-hints/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Enable Crawler Hints</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/enable-http2-to-origin/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Enable HTTP/2 to Origin</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/enable-tiered-cache/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Enable Tiered Cache</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/enable-vary-for-images/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Enable vary for images</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/interact-with-workers/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Interact with Cache in Workers</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/purge-cache/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Purge cache</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/set-browser-ttl/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Set Browser Cache TTL</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/how-to/set-caching-levels/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Set caching levels</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Best Practices</span>
</button><a class=DocsSidebar--nav-link href=/cache/best-practices/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Best Practices</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/best-practices/always-online/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Always Online</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/best-practices/avoid-web-poisoning/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Avoid web cache poisoning</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/best-practices/cache-behavior/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache behavior</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/best-practices/cache-performance/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Cache performance</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/best-practices/customize-cache/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Customize cache</span></a></li></ul></div></div></div></div></li><li class=DocsSidebar--nav-item><button class="Button DocsSidebar--nav-expand-collapse-button">
<span class=DocsSidebar--nav-expand-collapse-button-content aria-hidden=true></span>
<span is-visually-hidden>Expand: Reference</span>
</button><a class=DocsSidebar--nav-link href=/cache/reference/>
<span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Reference</span></a><div class="DocsSidebar--nav-item-collapse-container DocsSidebar--nav-item-collapse-hidden" style=min-height:0><div class=DocsSidebar--nav-item-collapse-wrapper><div class=DocsSidebar--nav-item-collapse-wrapperInner><div class=DocsSidebar--nav-item-collapse-content><ul class=DocsSidebar--nav-subnav depth=1 style=--depth:1><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/reference/development-mode/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Development Mode</span></a></li><li class=DocsSidebar--nav-item><a class=DocsSidebar--nav-link href=/cache/reference/wildcard-matching/ tabindex=-1><span class=DocsSidebar--nav-link-highlight></span>
<span class=DocsSidebar--nav-link-text>Wildcard matching</span></a></li></ul></div></div></div></div></li></ul></div><div style=position:absolute;height:6px;display:none;right:2px;bottom:2px;left:2px;border-radius:3px><div style=position:relative;display:block;height:100%;cursor:pointer;border-radius:inherit;background-color:rgba(0,0,0,.2)></div></div><div style=position:absolute;width:6px;display:none class="Scrollbars--track Scrollbars--track-vertical"><div style=position:relative;display:block;width:100% class="Scrollbars--thumb Scrollbars--thumb-vertical"></div></div></div><div class=toggleSidebar><button id=toggleSidebarButton style=width:2em;height:2em title="Click to collapse and expand the sidebar navigation"><svg id="toggleSidebarSVG" aria-hidden="true" height="1" width="1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path id="toggleSidebarSVGPath" d="M15 2a1 1 0 00-1 1v10a1 1 0 002 0V3a1 1 0 00-1-1zm-10.407.993-4.3 4.3a1 1 0 000 1.414l4.3 4.3a1 1 0 001.415-1.416L3.417 9H10a1 1 0 100-2H3.417l2.591-2.591A1 1 0 104.593 2.993z"/></svg></button></div></div><div class=DocsSidebar--shadow></div></div><div class=DocsToolbar><div class=DocsToolbar--search><div class=DocsSearch><div class=DocsSearch--input-wrapper><input type=text id=DocsSearch--input class=DocsSearch--input spellcheck=false autocomplete=false placeholder="Search docs..."><div class=DocsSearch--input-icon><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-9701125841014673" xmlns="http://www.w3.org/2000/svg"><title id="title-9701125841014673">Search icon (depiction of a magnifying glass)</title><path d="M11.999 10.585l3.458 3.458a1 1 0 01-1.414 1.414L10.585 12a6.5 6.5.0 111.414-1.414zM6.75 11.5a4.75 4.75.0 100-9.5 4.75 4.75.0 000 9.5z"/></svg></div><button disabled class=slashPlaceholder title="Press '/' to focus on the search bar" aria-label="Forward slash keyboard shortcut" tabindex=-1 type=button><div style=margin-top:-1px>/</span></div></button></div></div></div><div class=DocsToolbar--tools><button data-feedback=true class="DocsToolbar--feedback Button Button-is-docs-secondary">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17"><path d="M14 2.5H2l-.5.5v11.165l.863.345 2.852-3.01H14l.5-.5V3l-.5-.5zm-.5 8H4.785L2.5 12.911V3.5h11v7z" fill="currentcolor"/><path d="M12.5 5.003h-9v1h9v-1zm0 2.497h-9v1h9v-1z" fill="currentcolor"/></svg>Give Feedback</button><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--tools-icon-item><div class=Tooltip---root><div class=DocsToolbar--tools-icon-item-content><a class="Link Link-without-underline" href=https://github.com/cloudflare/cloudflare-docs><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-6991762763429039" xmlns="http://www.w3.org/2000/svg"><title id="title-6991762763429039">GitHub icon</title><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z" fill-rule="evenodd"/></svg></a></div><span class=Tooltip role=tooltip position=bottom-end>Visit Cache on GitHub</span></div></div><div class=DocsToolbar--tools-spacer></div><div class=DocsToolbar--theme-toggle><div class=Tooltip---root><div class=ThemeToggle><input type=checkbox id=ThemeToggle class=ThemeToggle--input>
<label class=ThemeToggle--toggle for=ThemeToggle><div class=ThemeToggle--toggle-handle></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--sun"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-8812071124069258" xmlns="http://www.w3.org/2000/svg"><title id="title-8812071124069258">Light theme icon (depiction of a sun)</title><path d="M7.5 11.465a3.482 3.482.0 01-1.596-.662L4.11 12.596a.5.5.0 01-.707-.707l1.793-1.793A3.482 3.482.0 014.535 8.5H2a.5.5.0 010-1h2.535a3.482 3.482.0 01.662-1.596L3.404 4.11a.5.5.0 01.707-.707l1.793 1.793A3.482 3.482.0 017.5 4.535V2a.5.5.0 011 0v2.535a3.482 3.482.0 011.596.662l1.793-1.793a.5.5.0 01.707.707l-1.793 1.793c.343.458.577 1.003.662 1.596H14a.5.5.0 110 1h-2.535a3.482 3.482.0 01-.662 1.596l1.793 1.793a.5.5.0 01-.707.707l-1.793-1.793a3.482 3.482.0 01-1.596.662V14a.5.5.0 11-1 0v-2.535z"/></svg></div><div class="ThemeToggle--toggle-handle-icon ThemeToggle--moon"><svg viewBox="0 0 16 16" fill="currentcolor" role="img" aria-labelledby="title-5971296394189265" xmlns="http://www.w3.org/2000/svg"><title id="title-5971296394189265">Dark theme icon (depiction of a moon)</title><path d="M7.067 3.087a5 5 0 005.466 7.026A5 5 0 117.067 3.087z"/></svg></div></label><span class=Tooltip role=tooltip position=bottom-end>Set theme to dark (⇧+D)</span></div></div></div></div></div><main class=DocsBody><div class=DocsBody--sidebar with-styled-webkit-scrollbars><div class=DocsBody--sidebar-content-scroll-fade></div><div class=DocsBody--sidebar-content><ul class=DocsTableOfContents hidden><li><a class=DocsTableOfContents-link href=#docs-content>↑ Top</a></li></ul></nav></div></div><div id=docs-content data-reach-skip-nav-content></div><div class=DocsContent id=main page-type=document><article class=DocsMarkdown><div class=DocsMarkdown-beta><h1>Cache Rules</h1><div class=DocsMarkdown--beta-pill>Beta</div></div><p>Use Cache Rules to customize cache properties of your HTTP requests. For example, create a rule to specify how long to cache a resource in the Cloudflare edge network.</p><h2 id=availability><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#availability>&#8203;​</a></span>
<span>Availability</span></h2><p>The following table describes Cache Rules availability per plan.</p><div class=DocsMarkdown--table-wrap><div class=DocsMarkdown--table-wrap-inner><table><tr><td></td><td><strong>Free</strong></td><td><strong>Pro</strong></td><td><strong>Business</strong></td><td><strong>Enterprise</strong></td></tr><tr><td><p>Availability</p></td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td><p>Number of rules</p></td><td>10</td><td>25</td><td>50</td><td>125</td></tr></table></div></div><h2 id=order-and-priority><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#order-and-priority>&#8203;​</a></span>
<span>Order and priority</span></h2><p>Cache rules are unique, unlike Page Rules. This is how they are applied:</p><ol><li><p>Cache Rules are stackable. This means that multiple matching rules will be combined and applied. So if multiple cache rules match the same URL, then the features set in those cache rules will all be applied.</p></li><li><p>If you have conflicting settings, then ordering matters and rules will be applied in the order they appear in your Cloudflare dashboard, from bottom to top. For example, if the top rule is set to cache everything on <code>example.com/images/*</code> and the bottom rule is set to bypass cache on <code>example.com/*</code>, then because we apply rules from bottom to top, cache will be bypassed for all URLS that match <code>example.com/*</code>.</p></li></ol><h2 id=create-cache-rules-in-the-dashboard><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#create-cache-rules-in-the-dashboard>&#8203;​</a></span>
<span>Create Cache Rules in the dashboard</span></h2><p>To create a new cache rule:</p><ol><li>Log in to the <a href=https://dash.cloudflare.com class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Cloudflare dashboard</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a> and select your account and domain.</li><li>Go to <strong>Caching</strong> > <strong>Cache Rules</strong>.</li><li>Select <strong>Create cache rule</strong>.</li><li>Enter a descriptive name for the rule in <strong>Rule name</strong>.</li><li>Under <strong>When incoming requests match</strong>, define the <a href=/firewall/cf-dashboard/edit-expressions/#expression-builder class=DocsMarkdown--link><span class=DocsMarkdown--link-content>rule expression</span></a>. Use the <strong>Field</strong> drop-down list to choose an HTTP property (refer to <a href=/cache/about/cache-rules/#available-fields class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Available fields</span></a> for the list of available fields). For each request, the value of the property you choose for <strong>Field</strong> is compared to the value you specify for <strong>Value</strong> using the operator selected in <strong>Operator</strong>.</li><li>Under <strong>Then</strong>, in the <strong>Cache status</strong> section, select <strong>Bypass cache</strong>, if matching requests will bypass cache and fetch a response from the origin server or <strong>Eligible for cache</strong> if requests will be eligible for cache. Note that proper <a href=/cache/about/cache-control/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>origin cache-control headers</span></a> are also required for cache eligibility.</li></ol><aside class=DocsMarkdown--aside role=note data-type=note>Be aware that when you select <strong>Eligible for cache</strong> in Cache Rules, this is equivalent to <a href=/cache/how-to/create-page-rules/#cache-everything class=DocsMarkdown--link><span class=DocsMarkdown--link-content>cache everything</span></a> cache level. If you do not enable eligible for cache, the expected behavior is the standard cache level present in Page Rules.</aside><ol start=7><li>If you select <strong>Eligible for cache</strong>, you can customize the following options:</li></ol><details><summary>Edge TTL</summary><div><p>Select <strong>Respect origin</strong> if matching requests will respect cache headers received from the origin server, or <strong>Override origin</strong>. If you wish to override the Edge TTL value, you need to select how long you want to cache resources in the Cloudflare edge network.</p><ul><li>In <strong>Status code TTL</strong> you can define the cache time-to-live (TTL) duration for one or more response status codes received from the origin server. This setting can be applied to a <em>Single code</em> status code, to a <em>Greater than</em> or <em>Less than</em> status code or to a <em>Range</em> of status codes. For more information, refer to <a href=/cache/how-to/configure-cache-status-code/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Status code TTL</span></a>.</li></ul></div></details><details><summary>Browser TTL</summary><div><p>Select if you want to <strong>Respect origin</strong> or <strong>Override origin</strong>. If you wish to override the browser TTL value, define how long resources cached by client browsers will remain valid. For more information, refer to <a href=/cache/about/edge-browser-cache-ttl/#browser-cache-ttl class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Browser Cache TTL</span></a>.</p></div></details><details><summary>Cache Key</summary><div><p>Define the request components used to define a <a href=/cache/about/cache-keys/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>custom cache key</span></a>. A cache key is an identifier that Cloudflare uses for a file stored in the cache. These are the options that you can customize:</p><ul><li>You can switch on or off <a href=/automatic-platform-optimization/reference/cache-device-type/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Cache by device type</span></a>, <a href=/cache/about/cache-deception-armor/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Cache deception armor</span></a>, and <a href=https://support.cloudflare.com/hc/articles/360023040812 class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Ignore query string order</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span>
</span></a>.</li><li>In the <strong>Query string</strong> section, you can select <strong>All query string parameters</strong>, <strong>All query string parameters except</strong> and enter an exception, <strong>Only these parameters</strong> and enter the parameters, or <strong>Ignore query string</strong>.</li><li>In the <strong>Headers</strong> section, you can include headers names and their values, check the presence of another header, and <strong>Include origin header</strong>.</li><li>In the <strong>Cookie</strong> section, you can include cookie names and their values, and check the presence of another cookie.</li><li>In the <strong>Host</strong> section, you can select <strong>Use original host</strong> and <strong>Resolved host</strong>.</li><li>In the <strong>User</strong> section, you can select <strong>Device type</strong>, <strong>Country</strong>, and <strong>Language</strong>.</li></ul></div></details><details><summary>Serve stale content</summary><div><p>Enable or disable serving stale content while updating from the origin server. If serving stale content is disabled, origin cache-control headers will be used to tell Cloudflare how to handle content from the origin.</p></div></details><details><summary>Respect Strong ETags</summary><div><p>Turn on or off byte-for-byte equivalency checks between the Cloudflare cache and the origin server. When enabled, Cloudflare will use strong ETag header validation to ensure that resources in the Cloudflare cache and on the origin server are byte-by-byte identical. If disabled, Cloudflare converts ETag headers into weak ETag headers.</p></div></details><details><summary>Origin error page pass-thru</summary><div><p>Turn on or off Cloudflare error pages generated from issues sent from the origin server. If enabled, this setting triggers error pages issued by the origin.</p></div></details><ol start=8><li>To save and deploy your rule, select <strong>Deploy</strong>. If you are not ready to deploy your rule, select <strong>Save as Draft</strong>.</li></ol><h3 id=available-fields><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#available-fields>&#8203;​</a></span>
<span>Available fields</span></h3><p>These are the fields available for Cache Rule expressions:</p><ul><li>Cookie - <code>http.cookie</code></li><li>Hostname - <code>http.host</code></li><li>Referer - <code>http.referer</code></li><li>SSL/HTTPS - <code>ssl</code></li><li>URI Full - <code>http.request.full_uri</code></li><li>URI - <code>http.request.uri</code></li><li>URI Path - <code>http.request.uri.path</code></li><li>URI Query String - <code>http.request.uri.query</code></li><li>User Agent - <code>http.user_agent</code></li><li>X-Forwarded-For - <code>http.x_forwarded_for</code></li></ul><p>Refer to <a href=/ruleset-engine/rules-language/fields/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Fields</span></a> for reference information on these fields.</p><h2 id=create-cache-rules-via-api><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#create-cache-rules-via-api>&#8203;​</a></span>
<span>Create Cache Rules via API</span></h2><p>Use the <a href=/ruleset-engine/rulesets-api/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Rulesets API</span></a> to create a Cache Rule via API.</p><p>When creating a Configuration Rule via API, make sure you:</p><ul><li>Set the rule action to <code>set_cache_settings</code>.</li><li>Define the parameters in the <code>action_parameters</code> field according to the settings you wish to override for matching requests.</li><li>You deploy the cache rule to the <code>http_request_cache_settings</code> phase entry point ruleset.</li></ul><h3 id=create-a-cache-rule><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#create-a-cache-rule>&#8203;​</a></span>
<span>Create a Cache Rule</span></h3><ol><li>Use the <a href=/ruleset-engine/rulesets-api/view/#list-existing-rulesets class=DocsMarkdown--link><span class=DocsMarkdown--link-content>List existing rulesets</span></a> method to obtain the list of rules already present in the <code>http_request_cache_settings</code> phase entry point ruleset.</li><li>If the phase ruleset does not exist, create it using the <a href=/ruleset-engine/rulesets-api/create/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Create ruleset</span></a> method with the zone-level endpoint. In the new ruleset properties, set the following values:<ul><li>kind: <code>zone</code></li><li>phase: <code>http_request_cache_settings</code></li></ul></li><li>Alternatively, you can also use the <a href=/ruleset-engine/rulesets-api/update/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Update ruleset</span></a> method to add a Cache Rule to the list of ruleset rules.</li></ol><h3 id=required-api-token-permissions><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#required-api-token-permissions>&#8203;​</a></span>
<span>Required API token permissions</span></h3><p>The API token used in API requests to manage Cache Rules must have the following permissions:</p><ul><li><em>Zone</em> > <em>Config Rules</em> > <em>Edit</em></li><li><em>Account Rulesets</em> > <em>Edit</em></li><li><em>Account Filter Lists</em> > <em>Edit</em></li></ul><h3 id=api-examples><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#api-examples>&#8203;​</a></span>
<span>API examples</span></h3><p>These examples are setting all the Cache Rules of a zone to a single rule, since using these examples directly will cause any existing rules to be deleted.</p><details><summary>Edge cache TTL</summary><div><p>In this setting, you can choose either to <code>respect_origin</code> (first example) or <code>override_origin</code> (second example). In this first example, <code>edge_ttl</code> is set to <code>respect_origin</code> and cache TTL is set by status code <code>404</code> with a duration of 30 seconds.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>curl</span> <span class=err>-X</span> <span class=err>PUT</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;ZONE_ID&gt;/rulesets/phases/http_request_cache_settings/entrypoint&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-H</span> <span class=s2>&#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-d</span> <span class=err>&#39;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;example-cache-rule&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;expression&#34;</span><span class=p>:</span> <span class=s2>&#34;http.cookie eq \&#34;a=b\&#34; and http.host eq \&#34;example.com\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;set_cache_settings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action_parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;edge_ttl&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;mode&#34;</span><span class=p>:</span> <span class=s2>&#34;respect_origin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;status_code_ttl&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                        <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;status_code&#34;</span><span class=p>:</span> <span class=mi>404</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mi>30</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span> 
</span></span></code></pre></div><p>In this second example, <code>status_code_ttl</code> is set to <code>override_origin</code> and cache TTL is set by status code <code>404</code> with a duration of 30 seconds. Instead of a single status code, you can also define a range.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>curl</span> <span class=err>-X</span> <span class=err>PUT</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;ZONE_ID&gt;/rulesets/phases/http_request_cache_settings/entrypoint&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-H</span> <span class=s2>&#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-d</span> <span class=err>&#39;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;example-cache-rule&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;expression&#34;</span><span class=p>:</span> <span class=s2>&#34;http.cookie eq \&#34;a=b\&#34; and http.host eq \&#34;example.com\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;set_cache_settings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action_parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;edge_ttl&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;mode&#34;</span><span class=p>:</span> <span class=s2>&#34;override_origin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;default&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;status_code_ttl&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                        <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;status_code&#34;</span><span class=p>:</span> <span class=mi>404</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mi>30</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>]</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span>
</span></span></code></pre></div></div></details><details><summary>Browser Cache TTL</summary><div><p>For <code>set_cache_settings</code>, you can choose either to <code>respect_origin</code> (first example) or <code>override_origin</code> (second example).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>curl</span> <span class=err>-X</span> <span class=err>PUT</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;ZONE_ID&gt;/rulesets/phases/http_request_cache_settings/entrypoint&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-H</span> <span class=s2>&#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-d</span> <span class=err>&#39;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;example-cache-rule&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;expression&#34;</span><span class=p>:</span> <span class=s2>&#34;http.cookie eq \&#34;a=b\&#34; and http.host eq \&#34;example.com\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;set_cache_settings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action_parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;browser_ttl&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;mode&#34;</span><span class=p>:</span> <span class=s2>&#34;respect_origin&#34;</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span>
</span></span></code></pre></div><p>In this second example, <code>override_origin</code> is selected, so you need to define how long resources cached by client browsers will remain valid, in this case 30 seconds.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>curl</span> <span class=err>-X</span> <span class=err>PUT</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;ZONE_ID&gt;/rulesets/phases/http_request_cache_settings/entrypoint&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-H</span> <span class=s2>&#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-d</span> <span class=err>&#39;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;example-cache-rule&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;expression&#34;</span><span class=p>:</span> <span class=s2>&#34;http.cookie eq \&#34;a=b\&#34; and http.host eq \&#34;example.com\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;set_cache_settings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action_parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;browser_ttl&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;mode&#34;</span><span class=p>:</span> <span class=s2>&#34;override_origin&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;default&#34;</span><span class=p>:</span> <span class=mi>30</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span>
</span></span></code></pre></div></div></details><details><summary>Cache Key</summary><div><p>In this example, <code>cache_deception_armor</code> and <code>ignore_query_strings_order</code> parameters are set to <code>true</code>. <code>query_string</code> is set to query all query string parameters. The <code>header</code> parameter is set to include <code>header1</code>, check presence of <code>header_1</code> and the <code>origin header</code> is also included. The <code>cookie</code> parameter is set to include <code>cookie1</code>, check the presence of <code>cookie_1</code> and the <code>origin header</code> is also included. The parameter <code>host : resolved</code> is set to <code>false</code>, <code>geo</code>, and <code>lang</code> are also set to <code>false</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>curl</span> <span class=err>-X</span> <span class=err>PUT</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;ZONE_ID&gt;/rulesets/phases/http_request_cache_settings/entrypoint&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-H</span> <span class=s2>&#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-d</span> <span class=err>&#39;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;example-cache-rule&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;expression&#34;</span><span class=p>:</span> <span class=s2>&#34;http.cookie eq \&#34;a=b\&#34; and http.host eq \&#34;example.com\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;set_cache_settings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action_parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache_key&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;ignore_query_strings_order&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;cache_deception_armor&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;custom_key&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&#34;query_string&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;include&#34;</span><span class=p>:</span> <span class=s2>&#34;*&#34;</span>
</span></span><span class=line><span class=cl>                        <span class=p>},</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&#34;header&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;include&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                                <span class=s2>&#34;header1&#34;</span>
</span></span><span class=line><span class=cl>                            <span class=p>],</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;check_presence&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                                <span class=s2>&#34;header_1&#34;</span>
</span></span><span class=line><span class=cl>                            <span class=p>]</span>
</span></span><span class=line><span class=cl>                        <span class=p>},</span>
</span></span><span class=line><span class=cl>                         <span class=nt>&#34;host&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                                <span class=nt>&#34;resolved&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>                        <span class=p>},</span>
</span></span><span class=line><span class=cl>                        <span class=nt>&#34;user&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;device_type&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;geo&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;lang&#34;</span><span class=p>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;cookie&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;include&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                                <span class=s2>&#34;cookie1&#34;</span>
</span></span><span class=line><span class=cl>                            <span class=p>],</span>
</span></span><span class=line><span class=cl>                            <span class=nt>&#34;check_presence&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                                <span class=s2>&#34;cookie_1&#34;</span>
</span></span><span class=line><span class=cl>                            <span class=p>],</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span>
</span></span></code></pre></div></div></details><details><summary>Serve stale content</summary><div><p>In this example, <code>serve_stale</code> is set to serve stale content while updating from the origin server.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>curl</span> <span class=err>-X</span> <span class=err>PUT</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;ZONE_ID&gt;/rulesets/phases/http_request_cache_settings/entrypoint&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-H</span> <span class=s2>&#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-d</span> <span class=err>&#39;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;example-cache-rule&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;expression&#34;</span><span class=p>:</span> <span class=s2>&#34;http.cookie eq \&#34;a=b\&#34; and http.host eq \&#34;example.com\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;set_cache_settings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action_parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;serve_stale&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nt>&#34;disable_stale_while_updating&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span>
</span></span></code></pre></div></div></details><details><summary>Respect strong ETags</summary><div><p>In this example, <code>respect_strong_etags</code> is set to <code>true</code> to ensure that resources in the Cloudflare cache and on the origin server are byte-by-byte identical.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>curl</span> <span class=err>-X</span> <span class=err>PUT</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;ZONE_ID&gt;/rulesets/phases/http_request_cache_settings/entrypoint&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-H</span> <span class=s2>&#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-d</span> <span class=err>&#39;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;example-cache-rule&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;expression&#34;</span><span class=p>:</span> <span class=s2>&#34;http.cookie eq \&#34;a=b\&#34; and http.host eq \&#34;example.com\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;set_cache_settings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action_parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;respect_strong_etags&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span>
</span></span></code></pre></div></div></details><details><summary>Origin error page pass-thru</summary><div><p>In this example, <code>origin_error_page_passthru</code> is set to <code>true</code> to trigger error pages issued by the origin.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>curl</span> <span class=err>-X</span> <span class=err>PUT</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;ZONE_ID&gt;/rulesets/phases/http_request_cache_settings/entrypoint&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-H</span> <span class=s2>&#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34;</span> <span class=err>\</span>
</span></span><span class=line><span class=cl><span class=err>-d</span> <span class=err>&#39;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rules&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;example-cache-rule&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;expression&#34;</span><span class=p>:</span> <span class=s2>&#34;http.cookie eq \&#34;a=b\&#34; and http.host eq \&#34;example.com\&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action&#34;</span><span class=p>:</span> <span class=s2>&#34;set_cache_settings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;action_parameters&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;cache&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nt>&#34;origin_error_page_passthru&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>&#39;</span>
</span></span></code></pre></div></div></details><h2 id=terraform-example><span class=DocsMarkdown--header-anchor-positioner><a class="DocsMarkdown--header-anchor Link Link-without-underline" href=#terraform-example>&#8203;​</a></span>
<span>Terraform example</span></h2><p>The following example defines a single cache rule for a zone using Terraform. The rule configures several cache settings and sets a custom cache key for incoming requests addressed at <code>example.net</code>.</p><details><summary>Terraform <code>cloudflare_ruleset</code> resource</summary><div><div class=highlight><pre tabindex=0 class=chroma><code class=language-tf data-lang=tf><span class=line><span class=cl><span class=c1># Cache rule configuring cache settings and defining custom cache keys
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>resource</span> <span class=s2>&#34;cloudflare_ruleset&#34;</span> <span class=s2>&#34;cache_rules_example&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=na>zone_id</span>     = <span class=s2>&#34;&lt;ZONE_ID&gt;&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>name</span>        = <span class=s2>&#34;Set cache settings&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>description</span> = <span class=s2>&#34;Set cache settings for incoming requests&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>kind</span>        = <span class=s2>&#34;zone&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>phase</span>       = <span class=s2>&#34;http_request_cache_settings&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>rules</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=na>action</span> = <span class=s2>&#34;set_cache_settings&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>action_parameters</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>edge_ttl</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=na>mode</span>    = <span class=s2>&#34;override_origin&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>default</span> = <span class=m>60</span>
</span></span><span class=line><span class=cl>        <span class=nx>status_code_ttl</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=na>status_code</span> = <span class=m>200</span>
</span></span><span class=line><span class=cl>          <span class=na>value</span>       = <span class=m>50</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>status_code_ttl</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>status_code_range</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=na>from</span> = <span class=m>201</span>
</span></span><span class=line><span class=cl>            <span class=na>to</span>   = <span class=m>300</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=na>value</span> = <span class=m>30</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>browser_ttl</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=na>mode</span> = <span class=s2>&#34;respect_origin&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>serve_stale</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=na>disable_stale_while_updating</span> = <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=na>respect_strong_etags</span> = <span class=kc>true</span>
</span></span><span class=line><span class=cl>      <span class=nx>cache_key</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=na>ignore_query_strings_order</span> = <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=na>cache_deception_armor</span>      = <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=nx>custom_key</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>query_string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=na>exclude</span> = <span class=p>[</span><span class=s2>&#34;*&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>header</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=na>include</span>        = <span class=p>[</span><span class=s2>&#34;habc&#34;</span><span class=p>,</span> <span class=s2>&#34;hdef&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=na>check_presence</span> = <span class=p>[</span><span class=s2>&#34;habc_t&#34;</span><span class=p>,</span> <span class=s2>&#34;hdef_t&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=na>exclude_origin</span> = <span class=kc>true</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>cookie</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=na>include</span>        = <span class=p>[</span><span class=s2>&#34;cabc&#34;</span><span class=p>,</span> <span class=s2>&#34;cdef&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=na>check_presence</span> = <span class=p>[</span><span class=s2>&#34;cabc_t&#34;</span><span class=p>,</span> <span class=s2>&#34;cdef_t&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>user</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=na>device_type</span> = <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=na>geo</span>         = <span class=kc>false</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>host</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=na>resolved</span> = <span class=kc>true</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=na>origin_error_page_passthru</span> = <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=na>expression</span>  = <span class=s2>&#34;(http.host eq </span><span class=err>\</span><span class=s2>&#34;</span><span class=nx>example</span><span class=p>.</span><span class=nx>net</span><span class=err>\</span><span class=s2>&#34;)&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>description</span> = <span class=s2>&#34;Set cache settings and custom cache key for example.net&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>enabled</span>     = <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div></details><p>For additional guidance on using Terraform with Cloudflare, refer to <a href=/terraform/ class=DocsMarkdown--link><span class=DocsMarkdown--link-content>Terraform</span></a>.</p></article></div></main><footer class=DocsFooter><div class=DocsFooter--content><div class=DocsFooterResources><span class=DocsFooter--content-additional-wrapper><a href="https://dash.cloudflare.com/?to=/:account/:zone/caching" class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Cloudflare Dashboard</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://community.cloudflare.com/tag/caching class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Community</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href=https://www.cloudflare.com/learning/cdn/what-is-a-cdn/ class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Learning Center</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-additional-wrapper><a href="https://dash.cloudflare.com/?to=/:account/support" class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Support Portal</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span></div><div><span class=DocsFooter--edit-on-gh-link-wrapper><a href=https://github.com/panthere2k/cf-docs/blob/main/content/cache/about/cache-rules.md class=DocsMarkdown--link target=_blank rel=noopener><span class=DocsMarkdown--link-content>Edit on GitHub</span><span class=DocsMarkdown--link-external-icon aria-hidden=true><svg fill="none" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 16 16" role="img" aria-labelledby="title-4744738674102027" xmlns="http://www.w3.org/2000/svg"><title id="title-4744738674102027">External link icon</title><path d="M6.75 1.75h-5v12.5h12.5v-5m0-4v-3.5h-3.5M8 8l5.5-5.5"/></svg>
<span is-visually-hidden>Open external link</span></span></a></span>
<span class=DocsFooter--content-dot-spacer>&nbsp; · &nbsp;</span>
<span class=DocsFooter--content-time>Updated <time class=relative datetime=2023-01-02T09:58:19+09:00 title=2023-01-02>January 2, 2023</time></span></div></div></footer></div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKQFGQB" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-PKQFGQB")</script><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=preload href=https://unpkg.com/littlefoot/dist/littlefoot.css as=style></noscript><script defer src=https://unpkg.com/littlefoot/dist/littlefoot.js type=application/javascript></script>
<script type=application/javascript>document.addEventListener("DOMContentLoaded",()=>littlefoot.default())</script></body></html>